if (self.CavalryLogger) { CavalryLogger.start_js(["Q9GGl"]); }

__d("BandicootSession",[],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze({ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",CLOSED:"CLOSED"}),h=10*60*1e3,i=14*24*60*60*1e3;function j(a){return Date.now()-a.lastUpdated}function a(a){return!!(typeof a==="object"&&a&&a.lastUpdated&&a.status)}function b(a){if(a.status===g.CLOSED)return!1;else if(a.status===g.INACTIVE&&j(a)>h)return!1;return!0}function c(a){return a.status===g.ACTIVE&&j(a)>h}function d(a){return j(a)>i}e.exports={Status:g,isValidSession:a,isTrackedSession:b,isOrphanSession:d,isCrashedSession:c}}),null);
__d("Bandicoot",["invariant","BandicootSession","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=5*1e3,i=h*2,j="Bandicoot:",k=(c=b("BandicootSession")).Status,l=c.isValidSession,m=c.isTrackedSession,n=c.isCrashedSession,o=c.isOrphanSession;function a(){try{var a=window.localStorage;if(a){var c="__test"+Date.now();a.setItem(c,"");a.removeItem(c)}return a}catch(a){b("FBLogger")("bandicoot").warn("Local storage is full");return null}}var p=a();d=function(){function a(a){this.$5=j+a,this.$4={},this.$1=this.$7.bind(this),this.sessionID=null,this.sessionStartTime=null,this.storage=p}var c=a.prototype;c.getCrashTimeData=function(){var a=window.performance&&window.performance.memory||{},b=this.sessionStartTime;return{duration:b?Date.now()-b:0,tabs:Object.keys(this.$8()).length,jsHeapSizeLimit:a.jsHeapSizeLimit,totalJSHeapSize:a.totalJSHeapSize,usedJSHeapSize:a.usedJSHeapSize,elementsInDOM:document.getElementsByTagName("*").length,uri:window.location.href}};c.getLogTimeData=function(){return{userAgent:window.navigator.userAgent}};c.logCrash=function(a,c,d){b("FBLogger")("bandicoot").warn("Session %s crashed at %s",a,d)};c.logBrowserUnsupported=function(){b("FBLogger")("bandicoot").warn("Browser not supported")};c.logTrackingError=function(){b("FBLogger")("bandicoot").warn("Failed to record data for current session")};c.startSession=function(){var a=this;if(!this.storage){this.logBrowserUnsupported();return}if(this.$2)return;this.sessionID||(this.sessionID=Math.random().toString(36).slice(2,9));this.sessionStartTime||(this.sessionStartTime=Date.now());this.$2=setInterval(function(){a.$9()},h);this.$9();document.addEventListener&&document.addEventListener("visibilitychange",this.$1);this.$10()};c.endSession=function(){if(!this.storage)return;if(!this.$2)return;clearInterval(this.$2);this.$2=null;this.$3||this.$11({status:k.CLOSED});this.sessionID=null;this.sessionStartTime=null;document.removeEventListener&&document.removeEventListener("visibilitychange",this.$1)};c.logKnownCrashes=function(){var a=this;if(!this.storage)return;if(!this.$2){var b=this.$8();b=this.$12(b,function(b,c){if(n(b)){a.logCrash(c,b,a.getLogTimeData());return null}else return b});this.$13(b)}};c.$14=function(){var a=this.sessionID;a||g(0,663);return a};c.$9=function(){var a=this.$8();this.$15(a);a=this.$16(a);this.$13(a)};c.$15=function(a){var b=this.$14(),c=a[b]?a[b]:{};a[b]=babelHelpers["extends"]({},c,this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$17()})};c.$12=function(a,b){var c={};Object.keys(a).forEach(function(d){var e=a[d];if(l(e)&&m(e)&&!o(e)){e=b(e,d);e&&(c[d]=e)}});return c};c.$16=function(a){var b=this;return this.$12(a,function(a,c){if(n(a)){var d=a.loggerReportTime||0;if(Date.now()-d>i)a.loggerReportTime=Date.now(),a.loggerReportSession=b.$14();else if(a.loggerReportSession==b.$14()){b.logCrash(c,a,b.getLogTimeData());b.$4[c]=!0;return null}}return a})};c.$8=function(a){a=a||this.$5;var c=this.storage.getItem(a)||"{}";try{c=JSON.parse(c)}catch(d){c={},this.storage.removeItem(a),b("FBLogger")("bandicoot").catching(d).warn("Invalid JSON data")}return c};c.$11=function(a){a.lastUpdated=Date.now();var b=this.$8(),c=this.sessionID;c&&b[c]&&(Object.assign(b[c],a),this.$13(b))};c.$13=function(a){a=JSON.stringify(a);try{this.storage.setItem(this.$5,a)}catch(d){a=this.$6;var c=Date.now();(!a||c>a+h)&&(this.logTrackingError(),this.$6=c);try{this.storage.removeItem(this.$5)}catch(a){this.$3=!0,this.endSession(),b("FBLogger")("bandicoot").catching(a).warn("Removing from storage failed")}}};c.$10=function(){for(var a=0;a<this.storage.length;++a){var b=this.storage.key(a);if(b.indexOf(j)===0&&b!==this.$5){var c=this.$8(b),d=Object.keys(c).every(function(a){a=c[a];return!l(a)||o(a)});d&&this.storage.removeItem(b)}}};c.$7=function(){this.$11({status:this.$17()})};c.$17=function(){return document.hidden?k.INACTIVE:k.ACTIVE};return a}();e.exports=d}),null);
__d("FileHasher",["WebWorker","emptyFunction","fileSliceName","FileHashWorkerResource"],(function(a,b,c,d,e,f){a=function(){"use strict";a.isSupported=function(){return b("WebWorker").isSupported()};function a(){var a=this,c=b("FileHashWorkerResource");b("WebWorker").prepareResource(c);this.$1=new(b("WebWorker"))(c).setMessageHandler(function(b){a.$2(b)}).execute()}var c=a.prototype;c.hash=function(a,c){this.$2=c;this.$1.postMessage({file:a,fileSliceName:b("fileSliceName")});return this};c.destroy=function(){this.$2=b("emptyFunction"),this.$1.terminate()};return a}();e.exports=a}),null);
__d("AssertionError",["ManagedError"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}return b}(b("ManagedError"));e.exports=a}),null);
__d("Assert",["AssertionError","sprintf"],(function(a,b,c,d,e,f){function g(a,c){if(typeof a!=="boolean"||!a)throw new(b("AssertionError"))(c);return a}function h(a,c,d){var e;if(c===void 0)e="undefined";else if(c===null)e="null";else{var f=Object.prototype.toString.call(c);e=/\s(\w*)/.exec(f)[1].toLowerCase()}g(a.indexOf(e)!==-1,d||b("sprintf")("Expression is of type %s, not %s",e,a));return c}function a(a,b,c){g(b instanceof a,c||"Expression not instance of type");return b}function i(a,b){j["is"+a]=b,j["maybe"+a]=function(a,c){a!=null&&b(a,c)}}var j={isInstanceOf:a,isTrue:g,isTruthy:function(a,b){return g(!!a,b)},type:h,define:function(a,b){a=a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase(),i(a,function(a,c){g(b(a),c)})}};["Array","Boolean","Date","Function","Null","Number","Object","Regexp","String","Undefined"].forEach(function(a){i(a,h.bind(null,a.toLowerCase()))});e.exports=j}),null);
__d("FBSphericalMetadataTags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPHERICAL:"FBSpherical:Spherical",INITIAL_VERTICAL_FOV_DEGREES:"FBSpherical:InitialVerticalFOVDegrees",GUIDE:"FBSpherical:Guide",HOTSPOT:"FBSpherical:HotspotMetadata",USED_360_DIRECTOR:"FBSpherical:Used360Director"})}),null);
__d("GSphericalMetadataTags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPHERICAL:"GSpherical:Spherical",INITIAL_VIEW_HEADING_DEGREES:"GSpherical:InitialViewHeadingDegrees",INITIAL_VIEW_PITCH_DEGREES:"GSpherical:InitialViewPitchDegrees",PROJECTION_TYPE:"GSpherical:ProjectionType",STEREO_MODE:"GSpherical:StereoMode",STITCHED:"GSpherical:Stitched",STITCHING_SOFTWARE:"GSpherical:StitchingSoftware",CROPPED_AREA_IMAGE_WIDTH_PIXELS:"GSphercal:CroppedAreaImageWidthPixels",CROPPED_AREA_IMAGE_HEIGHT_PIXELS:"GSphercal:CroppedAreaImageHeightPixels",CROPPED_AREA_LEFT_PIXELS:"GSphercal:CroppedAreaLeftPixels",CROPPED_AREA_TOP_PIXELS:"GSphercal:CroppedAreaTopPixels",FULL_PANO_WIDTH_PIXELS:"GSphercal:FullPanoWidthPixels",FULL_PANO_HEIGHT_PIXELS:"GSphercal:FullPanoHeightPixels"})}),null);
__d("SphericalVideoMetadataTags",["FBSphericalMetadataTags","GSphericalMetadataTags"],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GSPHERICAL:b("GSphericalMetadataTags"),FBSPHERICAL:b("FBSphericalMetadataTags")});e.exports=a}),null);
__d("ResumableUploadServiceState.enum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CANCEL:"upload-cancel",FAIL:"upload-fail",FILE_TOO_LARGE:"upload-too-large",NOT_STARTED:"upload-not-started",PROGRESS:"upload-progress",START:"upload-start",SUCCESS:"upload-success",TRANSPORT_FAILURE:"upload-transport-fail"});e.exports=a}),null);
__d("ResumableUploadAsyncService",["regeneratorRuntime","Promise","AsyncRequest","EventEmitter","ResumableUploadServiceState.enum","URI","uuid"],(function(a,b,c,d,e,f){"use strict";var g,h="rupload",i="facebook.com";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,j,k,l,m,n){var o;o=a.call(this)||this;o.consumer=c;o.accessToken=d;o.sessionKey=e||b("uuid")();o.contentKey=f||"";o.contentValue=g||"";o.serviceName=j&&j!=""?j:h;o.serviceDomain=k&&k!=""?k:i;o.receiveParameters=l;o.flowCaptureHeaderValue=m;o.tracingHeaderValue=n;return o}c.create=function(a){return new c(a.consumer,a.accessToken,a.sessionKey||"",a.contentKey,a.contentValue,a.serviceName,a.serviceDomain,a.receiveParameters,a.flowCaptureHeaderValue,a.tracingHeaderValue)};var d=c.prototype;d.resume=function(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return b("regeneratorRuntime").awrap(this.sendOffsetRequest());case 3:c=e.sent;this.emit(b("ResumableUploadServiceState.enum").START,{offset:c.offset});e.next=7;return b("regeneratorRuntime").awrap(this.sendUploadRequest(a,c));case 7:d=e.sent;this.emit(b("ResumableUploadServiceState.enum").SUCCESS,d.h);e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.emit(b("ResumableUploadServiceState.enum").FAIL,e.t0);case 14:this.abortUpload=void 0;case 15:case"end":return e.stop()}},null,this,[[0,11]])};d.cancel=function(){this.abortUpload&&this.abortUpload(),this.emit(b("ResumableUploadServiceState.enum").CANCEL)};d.decorateRequestFlowCaptureHeader=function(a){this.flowCaptureHeaderValue&&a.setRequestHeader("X-Fb-Flow-Capture",String(this.flowCaptureHeaderValue))};d.sendOffsetRequest=function(){var a=this;return new(b("Promise"))(function(c,d){var e=new(b("AsyncRequest"))().disableInteractionServerTracing().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(a.getUploadUri()).setReadOnly(!0).setRequestHeader("Authorization","OAuth "+a.accessToken).setHandler(function(a){return c(JSON.parse(a.payload.response))}).setErrorHandler(d).setOption("suppressEvaluation",!0).setTransportErrorHandler(function(c){a.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,c)});a.decorateRequestFlowCaptureHeader(e);a.abortUpload=function(){return e.abort()};e.send()})};d.sendUploadRequest=function(a,c){var d=this;c=c||{};var e=c.offset;c=c.duplicate;var f=c?"":a.slice(e);return new(b("Promise"))(function(c,g){var h=new(b("AsyncRequest"))().disableInteractionServerTracing().setAllowCrossOrigin(!0).setAllowCredentials(!0).setURI(d.getUploadUri()).setRawData(f).setHandler(function(a){return c(JSON.parse(a.payload.response))}).setErrorHandler(g).setRequestHeader("Authorization","OAuth "+d.accessToken).setRequestHeader("X-Entity-Name",encodeURIComponent(a.name)).setRequestHeader("X-Entity-Type",a.type).setRequestHeader("X-Entity-Length",String(a.size)).setRequestHeader("Offset",String(e)).setOption("suppressEvaluation",!0).setUploadProgressHandler(function(c){c=new ProgressEvent("upload-service",{total:a.size,loaded:c.loaded+Number(e)});d.emit(b("ResumableUploadServiceState.enum").PROGRESS,c)}).setTransportErrorHandler(function(a){d.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,a)});d.decorateRequestFlowCaptureHeader(h);d.abortUpload=function(){return h.abort()};g=d.receiveParameters;g&&(h.setRequestHeader("start_offset",String(g.start_offset)).setRequestHeader("end_offset",String(g.end_offset)).setRequestHeader("composer_session_id",String(g.composer_session_id)).setRequestHeader("id",String(g.upload_session_id)),g.fb_region&&h.setRequestHeader("X-FB-Region",String(g.fb_region)));d.tracingHeaderValue&&h.setRequestHeader("x-fb-product-log",d.tracingHeaderValue);h.send()})};d.getUploadUri=function(){var a=this.getServiceName();a=new(g||(g=b("URI")))("https://"+a+"/"+this.consumer+"/"+this.sessionKey);this.contentKey&&this.contentValue&&(a=a.addQueryData(this.contentKey,this.contentValue));return a};d.getServiceName=function(){return this.serviceName+"."+this.serviceDomain};return c}(b("EventEmitter"));e.exports=a}),null);
__d("ResumableUploadService",["Promise","AsyncRequest","EventEmitter","ResumableUploadServiceState.enum","URI","immutable","uuid"],(function(a,b,c,d,e,f){"use strict";var g,h="rupload",i="facebook.com";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,j,k,l,m,n,o,p){var q;q=a.call(this)||this;q.consumer=c;q.accessToken=d;q.sessionKey=e||b("uuid")();q.contentKey=f||"";q.contentValue=g||"";q.serviceName=j&&j!=""?j:h;q.serviceDomain=k&&k!=""?k:i;q.receiveParameters=l;q.flowCaptureHeaderValue=m;q.skipOffsetFetching=n;q.additionalHeaders=(c=o)!=null?c:b("immutable").Map();q.tracingHeaderValue=p;return q}c.create=function(a){return new c(a.consumer,a.accessToken,a.sessionKey||"",a.contentKey,a.contentValue,a.serviceName,a.serviceDomain,a.receiveParameters,a.flowCaptureHeaderValue,a.skipOffsetFetching,a.additionalHeaders,a.tracingHeaderValue)};var d=c.prototype;d.resume=function(a){var c=this,d=this.getServiceName(),e=new(g||(g=b("URI")))("https://"+d+"/"+this.consumer+"/"+this.sessionKey);this.contentKey&&this.contentValue&&(e=e.addQueryData(this.contentKey,this.contentValue));d=function(){return new(b("Promise"))(function(a,d){a=new(b("AsyncRequest"))().disableInteractionServerTracing().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(e).setReadOnly(!0).setHandler(a).setErrorHandler(d).setOption("suppressEvaluation",!0).setTransportErrorHandler(function(a){c.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,a,{method:"GET"})});c.decorateRequestFlowCaptureHeader(a);a.send()})};var f=function(d){return new(b("Promise"))(function(f,g){var h=0;if(d!==void 0){var i=JSON.parse(d.payload.response);h=i.offset}c.emit(b("ResumableUploadServiceState.enum").START,{offset:h});c.uploadAsyncRequest=new(b("AsyncRequest"))().disableInteractionServerTracing().setAllowCrossOrigin(!0).setAllowCredentials(!0).setURI(e).setRawData(a.slice(h)).setHandler(f).setErrorHandler(g).setRequestHeader("X-Entity-Name",encodeURIComponent(a.name)).setRequestHeader("X-Entity-Type",a.type).setRequestHeader("X-Entity-Length",String(a.size)).setRequestHeader("Offset",String(h)).setOption("suppressEvaluation",!0).setUploadProgressHandler(function(d){d=new ProgressEvent("upload-service",{total:a.size,loaded:d.loaded+Number(h)});c.emit(b("ResumableUploadServiceState.enum").PROGRESS,d)}).setTransportErrorHandler(function(a){c.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,a,{method:"POST",offset:h})});c.decorateRequestFlowCaptureHeader(c.uploadAsyncRequest);if(c.receiveParameters){i=c.receiveParameters;c.uploadAsyncRequest.setRequestHeader("start_offset",String(i.start_offset));c.uploadAsyncRequest.setRequestHeader("end_offset",String(i.end_offset));c.uploadAsyncRequest.setRequestHeader("composer_session_id",String(i.composer_session_id));c.uploadAsyncRequest.setRequestHeader("id",String(i.upload_session_id));c.uploadAsyncRequest.setRequestHeader("product_media_id",String(i.product_media_id));i.xpv_asset_id&&c.uploadAsyncRequest.setRequestHeader("xpv_asset_id",String(i.xpv_asset_id));i.fb_region&&c.uploadAsyncRequest.setRequestHeader("X-FB-Region",String(i.fb_region));i.total_file_size&&c.uploadAsyncRequest.setRequestHeader("X-Total-Asset-Size",String(i.total_file_size))}c.additionalHeaders.size>0&&c.uploadAsyncRequest.setRequestHeader("X-Thrift-Params",JSON.stringify(c.additionalHeaders));c.tracingHeaderValue&&c.uploadAsyncRequest.setRequestHeader("x-fb-product-log",c.tracingHeaderValue);c.uploadAsyncRequest.send()})},h=function(a){if(a!=null){a=JSON.parse(a.payload.response);a.return_whole==null?c.emit(b("ResumableUploadServiceState.enum").SUCCESS,a.h):c.emit(b("ResumableUploadServiceState.enum").SUCCESS,a)}else c.emit(b("ResumableUploadServiceState.enum").FAIL,"uploading failed")},i=function(a){return c.emit(b("ResumableUploadServiceState.enum").FAIL,a)};d=this.skipOffsetFetching?b("Promise").resolve():d();return d.then(f,i).then(h,i)};d.getServiceName=function(){return this.serviceName+"."+this.serviceDomain};d.cancel=function(){this.uploadAsyncRequest&&this.uploadAsyncRequest.abort(),this.emit(b("ResumableUploadServiceState.enum").CANCEL)};d.decorateRequestFlowCaptureHeader=function(a){this.flowCaptureHeaderValue&&a.setRequestHeader("X-Fb-Flow-Capture",String(this.flowCaptureHeaderValue))};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VideoUploadSphericalLogger",["Banzai"],(function(a,b,c,d,e,f){var g=3e3;a=function(){"use strict";function a(){this.$1={},this.$2=!1,this.$3=0}var c=a.prototype;c.log=function(){this.$2?this.$4():this.$5()};c.$5=function(){b("Banzai").post("spherical_video_composer_upload",babelHelpers["extends"]({},this.$1))};c.$4=function(){var a=Date.now();a-this.$3>g&&(this.$3=a,this.$5())};c.setDirectorsCutEnabled=function(a){this.$1.directors_cut_enabled=a;return this};c.setFieldOfView=function(a){this.$1.field_of_view=a;return this};c.setFileExtension=function(a){this.$1.file_extension=a;return this};c.setHasSphericalMetadata=function(a){this.$1.has_spherical_metadata=a;return this};c.setPitchDegrees=function(a){this.$1.pitch_degrees=a;return this};c.setTargetID=function(a){this.$1.target_id=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setUserAction=function(a){this.$1.user_action=a;a==="drag_video_preview"||a==="scroll_video_preview"?this.$2=!0:this.$2=!1;return this};c.setVideoPreviewPosition=function(a){this.$1.video_preview_position=a;return this};c.setYawDegrees=function(a){this.$1.yaw_degrees=a;return this};c.setIsRedesign=function(a){this.$1.is_redesign=a;return this};c.setFinalGuideEnabled=function(a){this.$1.final_guide_enabled=a;return this};c.setFinalNumGuidePoints=function(a){this.$1.final_num_guide_points=a;return this};c.setIsNuxTest=function(a){this.$1.is_nux_test=a;return this};return a}();e.exports=new a()}),null);
__d("VideoUploadCallbacksMixin",[],(function(a,b,c,d,e,f){"use strict";function g(a){return Array.isArray(a)?a:[a]}a={inform:function(a,b){var c=this.__callbacksByType;if(c==null)return;a=g(a);a.forEach(function(a){var d=c[a];if(d==null)return;d.forEach(function(c){try{c(a,b)}catch(a){}})})},subscribe:function(a,b){var c,d=this.__callbacksByType=(c=this.__callbacksByType)!=null?c:{},e=g(a);e.forEach(function(a){a=d[a]=(a=d[a])!=null?a:[];a.push(b)});var f=!1;return{remove:function(){if(f===!0)return;f=!0;e.forEach(function(a){var c=d[a];if(c==null)return;var e=c.indexOf(b);e!==-1&&c.splice(e,1);c.length===0&&delete d[a]})}}}};e.exports=a}),null);
__d("VideoUploadCrashMonitor",["Bandicoot","VideoUploadLogger"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f,g,h,i){var j;j=a.call(this,"VideoUploadSession")||this;j.$VideoUploadCrashMonitor1={waterfallID:b,actorID:c,source:d,targetID:e,loggingDelay:f,supportsChunking:g,composerEntryPointRef:h,flowStarted:i};return j}var d=c.prototype;d.flowStarted=function(){this.$VideoUploadCrashMonitor1.flowStarted=!0};d.getCrashTimeData=function(){return this.$VideoUploadCrashMonitor1};d.logCrash=function(a,c,d){if(!c.waterfallID)return;a=new(b("VideoUploadLogger"))({actor_id:c.actorID,source:c.source,waterfall_id:c.waterfallID,target_id:c.targetID,delay:c.loggingDelay,is_chunked_upload:c.supportsChunking,composer_entry_point_ref:c.composerEntryPointRef});d={error:"Crash Detected",error_description:"Detected video upload did not complete due to a crash"};a.logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,d);c.flowStarted&&a.logEvent(b("VideoUploadLogger").EVENT_RESIGNED_FLOW,{})};return c}(b("Bandicoot"));e.exports=a}),null);
__d("VideoUploadFileValidator",["errorCode","fbt","requireCond","cr:909496","cr:909497","React"],(function(a,b,c,d,e,f,g,h){var i=b("React"),j=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],k=["VIDEO__INVALID_GUIDE_DATA"];a=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.validate=function(a,b){return this.$2(a)&&this.$3(a)&&this.$4(a.getExtension()==="gif",b)};c.getValidationErrorMessage=function(a,b){return this.$5(a)||this.$6(a)||this.$7(a.getExtension()==="gif",b)};a.canReplaceVideoForError=function(a){if(!a)return!0;if(k.indexOf(a)>-1)return!1;return j.indexOf(a)>-1?!0:!1};c.$2=function(a){a=this.$5(a);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$5=function(a){if(this.$1.extensions[a.getExtension()])return;a="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?";a=i.jsx(b("cr:909497"),{target:"_blank",href:a,children:h._("recommended formats")});return{summary:h._("Unsupported File Format"),description:h._("Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[h._param("link",a)])}};c.$3=function(a){a=this.$6(a);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$6=function(a){var b;if(a.getSize()===null)return;a.getSize()<this.$1.minSize&&(b=this.$8());a.getSize()>this.$1.maxSize&&(b=this.$9());return b};c.$8=function(){var a=Math.round(this.$1.minSize/1024);return{summary:h._("Video File Too Small"),description:h._("The video file you tried to upload is too small. The minimum size for a video file is {min-size} KB. Please try again with a larger file.",[h._param("min-size",a)])}};c.$9=function(){var a=Math.floor(this.$1.maxSize/1024/1024);return{summary:h._("Video File Too Large"),description:h._("The video file you tried to upload is too large. The maximum size for a video file is {max-size} MB. Please try again with a smaller file.",[h._param("max-size",a)])}};c.$4=function(a,c){a=this.$7(a,c);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$7=function(a,b){var c;if(!b)return;var d=b.format.duration;d&&(d>this.$1.maxLength&&(c=this.$10()),d<this.$1.minLength&&!a&&(c=this.$11()));if(!b.streams||!b.streams.primaryVideo)return;d=b.streams.primaryVideo.width;a=b.streams.primaryVideo.height;var e=0,f=0;b.videoPlayerData!==null&&(e=b.videoPlayerData.height,f=b.videoPlayerData.width);this.$1.acceptDimensionsFromPlayer&&f!==0&&e!==0&&(d=f,a=e);!b.streams.primaryVideo&&b.streams.primaryAudio&&(c=this.$12());d<this.$1.minWidth&&(c=this.$13());a<this.$1.minHeight&&(c=this.$14());f=d/a;this.$1.require16to9AspectRatio&&((f>2||f<1.6)&&(c=this.$15()));this.$1.minAspectRatio&&(f<this.$1.minAspectRatio&&(c=this.$16()));this.$1.maxAspectRatio&&(f>this.$1.maxAspectRatio&&(c=this.$17()));return c};c.$10=function(){if(this.$1.source==="profile_video")return{summary:h._("Profile Video Duration Too Long"),description:h._("The maximum length is {max-length} seconds. Please upload a shorter video.",[h._param("max-length",this.$1.maxLength)])};else return{summary:h._("Video Duration Too Long"),description:h._("The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[h._param("max-length",Math.round(this.$1.maxLength/60))])}};c.$11=function(){return{summary:h._("Video File Too Short"),description:h._({"second":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.","seconds":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video."},[h._param("min-length",this.$1.minLength),h._enum(this.$1.minLength===1?"second":"seconds",{second:"second",seconds:"seconds"})])}};c.$12=function(){var a="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?";a=i.jsx(b("cr:909497"),{href:a,children:h._("supported video format")});return{summary:h._("No Video Detected"),description:h._("It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[h._param("supported-video-format link",a)])}};c.$13=function(){return{summary:h._("Video Width Too Narrow"),description:h._("The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[h._param("min-width",this.$1.minWidth)])}};c.$15=function(){return{summary:h._("Problem Uploading Video"),description:h._("Videos look best when they have a 16:9 aspect ratio. Please edit your video and upload again.")}};c.$14=function(){return{summary:h._("Video Height Too Short"),description:h._("The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[h._param("min-height",this.$1.minHeight)])}};c.$17=function(){return{summary:h._("Video Too Wide"),description:h._("The video you selected is too wide. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}. Please record and upload a taller video.",[h._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),h._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}};c.$16=function(){return{summary:h._("Video Too Tall"),description:h._("The video you selected is too tall. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}. Please record and upload a narrower video.",[h._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),h._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}};return a}();e.exports=a}),null);
__d("submitForm",["DOM"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.querySelector('input[type="submit"]');c!=null?c.click():(c=b("DOM").create("input",{type:"submit",className:"hidden_elem"}),b("DOM").appendContent(a,c),c.click(),b("DOM").remove(c))};e.exports=a}),null);
__d("VideoUploadRequest",["AsyncRequest","DOM","DTSG","FileForm","Form","VideoUploadFeatureDetector","emptyFunction","flattenPHPQueryData","submitForm"],(function(a,b,c,d,e,f){var g="video";a=function(){"use strict";function a(a){this.$1=a;this.$2=null;this.$3=!1;this.$4=null;this.$5=null;this.$6=null;this.$7=null;this.$8=a=b("emptyFunction");this.$9=a;this.$10=a;this.$11=a;this.$12=null}var c=a.prototype;c.setAllowCrossOrigin=function(a){this.$3=a;return this};c.setData=function(a){this.$4=a;return this};c.setWaterfallID=function(a){this.$6=a;return this};c.setSuccessHandler=function(a){this.$8=a;return this};c.setErrorHandler=function(a){this.$9=a;return this};c.setTransportErrorHandler=function(a){this.$10=a;return this};c.setUploadProgressHandler=function(a){this.$11=a;return this};c.setTimeoutHandler=function(a,b){this.$7=a;this.$12=b;return this};c.setThumbnail=function(a){this.$13=a;return this};c.setCustomProfileImage=function(a){this.$14=a;return this};c.setCustomBackgroundImage=function(a){this.$15=a;return this};c.setFeedBackgroundImage=function(a){this.$16=a;return this};c.setHandle=function(a){this.$5=a;return this};c.setCaptions=function(a){this.$17=a;return this};c.setPollOptionImages=function(a){this.$18=a;return this};c.send=function(){if(this.$2)throw new Error("An upload request is already in progress.");if(b("VideoUploadFeatureDetector").supportsXHR()){this.$2=this.$19();if(this.$13||this.$17||this.$14||this.$15||this.$16||this.$18){var a=new FormData();this.$13&&a.append("thumb",this.$13);this.$14&&a.append("schedule_custom_profile_image",this.$14);this.$15&&a.append("schedule_custom_background_image",this.$15);this.$16&&a.append("schedule_feed_background_image",this.$16);this.$17&&this.$17.forEach(function(b,c){c=b.getIsDefault()?"captions_default":"captions_file"+c;a.append(c,b.getFile())});if(this.$18){var c=this.$18;Object.keys(c).forEach(function(b){a.append(b,c[b])})}if(this.$4){var d=b("flattenPHPQueryData")(this.$4);Object.keys(d).forEach(function(b){a.append(b,d[b])})}this.$2.setRawData(a)}this.$2.send()}else this.$2=this.$20(),this.$21(this.$2)};c.sendChunk=function(a){if(this.$2)throw new Error("An upload request is already in progress.");var b=new FormData();this.$5?b.append("fbuploader_video_file_chunk",this.$5):b.append("video_file_chunk",a);this.$2=this.$19();this.$2.setRawData(b);this.$2.send()};c.sendFile=function(a){if(this.$2)throw new Error("An upload request is already in progress.");this.$2=this.$20();var c=a.cloneNode(!1);a.name=g;b("DOM").replace(a,c);b("DOM").appendContent(this.$2.getRoot(),a);this.$21(this.$2);a.name=c.name;b("DOM").replace(c,a)};c.abort=function(){if(!this.$2)return;this.$2.abort();this.$2=null};c.$19=function(){var a=this.__getAsyncRequest().setAllowCrossOrigin(this.$3).setURI(this.$1).setData(this.$4).setRequestHeader("X_FB_VIDEO_WATERFALL_ID",this.$6).setHandler(this.$8).setErrorHandler(this.$9).setTransportErrorHandler(this.$10).setUploadProgressHandler(this.$11);this.$12&&a.setTimeoutHandler(this.$7,this.$12);return a};c.__getAsyncRequest=function(){return new(b("AsyncRequest"))()};c.$20=function(){var a=b("DOM").create("form",{action:this.$1,method:"POST"});b("Form").createHiddenInputs(babelHelpers["extends"]({fb_dtsg:b("DTSG").getToken()},this.$4),a);a=new(b("FileForm"))(a,null,{allowCrossOrigin:this.$3});a.subscribe("success",this.$22.bind(this));a.subscribe("failure",this.$23.bind(this));a.subscribe("progress",this.$24.bind(this));return a};c.$21=function(a){b("DOM").appendContent(document.body,a.getRoot()),b("submitForm")(a.getRoot())};c.$22=function(a,b){this.$8(b.response)};c.$23=function(a,b){this.$9(b.response)};c.$24=function(a,b){this.$11(b.event)};return a}();e.exports=a}),null);
__d("VideoUploadRequestContext",[],(function(a,b,c,d,e,f){a=function(){"use strict";function a(){this.$14=!1,this.$21=0,this.$22=!1,this.$23=!1,this.$26=!1,this.reset()}var b=a.prototype;b.setFile=function(a){this.$1=a;return this};b.getFile=function(){return this.$1};b.setMetadata=function(a){this.$24=a;return this};b.getMetadata=function(){return this.$24};b.setVideoID=function(a){this.$2=a;return this};b.getVideoID=function(){return this.$2};b.setXPVAssetID=function(a){this.$29=a;return this};b.getXPVAssetID=function(){return this.$29};b.setUploadSessionID=function(a){this.$3=a;return this};b.getUploadSessionID=function(){return this.$3};b.setFbRegion=function(a){this.$4=a;return this};b.getFbRegion=function(){return this.$4};b.setStartOffset=function(a){this.$5=a;return this};b.getStartOffset=function(){return this.$5};b.setEndOffset=function(a){this.$6=a;return this};b.getEndOffset=function(){return this.$6};b.setPartitionStartOffset=function(a){this.$17=a;return this};b.getPartitionStartOffset=function(){return this.$17};b.setPartitionEndOffset=function(a){this.$18=a;return this};b.getPartitionEndOffset=function(){return this.$18};b.setPartitionNo=function(a){this.$19=a;return this};b.getPartitionNo=function(){return this.$19};b.setTargetID=function(a){this.$7=a;return this};b.getTargetID=function(){return this.$7};b.setSource=function(a){this.$8=a;return this};b.setComposerDialogVersion=function(a){this.$9=a;return this};b.getComposerDialogVersion=function(){return this.$9};b.getSource=function(){return this.$8};b.setWaterfallID=function(a){this.$10=a;return this};b.getWaterfallID=function(){return this.$10};b.setComposerEntryPointRef=function(a){this.$11=a;return this};b.getComposerEntryPointRef=function(){return this.$11};b.setComposerWorkSharedDraftMode=function(a){this.$12=a;return this};b.getComposerWorkSharedDraftMode=function(){return this.$12};b.setHasFileBeenReplaced=function(a){this.$14=a;return this};b.getHasFileBeenReplaced=function(){return this.$14};b.setSupportsChunking=function(a){this.$15=a;return this};b.getSupportsChunking=function(){return this.$15};b.setSupportsFileAPI=function(a){this.$16=a;return this};b.getSupportsFileAPI=function(){return this.$16};b.setCreatorProduct=function(a){this.$20=a;return this};b.getCreatorProduct=function(){return this.$20};b.setLastKnownUploadSpeed=function(a){this.$21=a;return this};b.getLastKnownUploadSpeed=function(){return this.$21||0};b.setUseParallelChunks=function(a){this.$22=a;return this};b.getUseParallelChunks=function(){return this.$22};b.setIsSphericalVideo=function(a){this.$23=a;return this};b.getIsSphericalVideo=function(){return this.$23};b.setSphericalMetadata=function(a){this.$25=a;return this};b.getSphericalMetadata=function(){return this.$25};b.setEnableOmnistab=function(a){this.$26=a;return this};b.getEnableOmnistab=function(){return this.$26};b.setClientChunkSize=function(a){this.$27=a;return this};b.getClientChunkSize=function(){return this.$27};b.setVideoPublisherActionSource=function(a){this.$28=a;return this};b.getVideoPublisherActionSource=function(){return this.$28};b.setComposerSessionID=function(a){this.$13=a;return this};b.getComposerSessionID=function(){return this.$13};b.setRetryState=function(a){this.$30=a;return this};b.getRetryState=function(){return this.$30};b.reset=function(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null,this.$12=null,this.$14=!1,this.$15=null,this.$16=null,this.$17=null,this.$18=null,this.$19=null,this.$20=null,this.$21=0,this.$22=!1,this.$23=!1,this.$24={},this.$25={},this.$26=!1,this.$27=null,this.$28={},this.$13=null,this.$30=null};return a}();e.exports=a}),null);
__d("VideoUploadPostRequestManager",["requireCond","cr:909282","VideoUploadLogger","VideoUploadRequest","clearTimeout","mixin","setTimeout"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f){var g;g=a.call(this)||this;g.$VideoUploadPostRequestManager2=b;g.$VideoUploadPostRequestManager3=c;g.$VideoUploadPostRequestManager4=d;g.$VideoUploadPostRequestManager5=0;g.$VideoUploadPostRequestManager6=e;g.$VideoUploadPostRequestManager7=f;g.$VideoUploadPostRequestManager8=0;return g}var d=c.prototype;d.$VideoUploadPostRequestManager9=function(){return this.$VideoUploadPostRequestManager1?new(b("VideoUploadLogger"))({source:this.$VideoUploadPostRequestManager1.getSource(),waterfall_id:this.$VideoUploadPostRequestManager1.getWaterfallID(),target_id:this.$VideoUploadPostRequestManager1.getTargetID(),composer_entry_point_ref:this.$VideoUploadPostRequestManager1.getComposerEntryPointRef&&this.$VideoUploadPostRequestManager1.getComposerEntryPointRef()}):null};d.getRequest=function(){return this.$VideoUploadPostRequestManager10};d.sendRequest=function(a){this.$VideoUploadPostRequestManager1=a;if(this.$VideoUploadPostRequestManager10){var c=this.$VideoUploadPostRequestManager9();c&&c.logEvent(b("VideoUploadLogger").EVENT_DUPLICATE_POST_REQUEST);return}this.$VideoUploadPostRequestManager11=babelHelpers["extends"]({},a.getMetadata(),this.__createRequestData(a));this.$VideoUploadPostRequestManager12=this.$VideoUploadPostRequestManager11.thumb;this.$VideoUploadPostRequestManager13=this.$VideoUploadPostRequestManager11.schedule_custom_profile_image;this.$VideoUploadPostRequestManager14=this.$VideoUploadPostRequestManager11.schedule_custom_background_image;this.$VideoUploadPostRequestManager15=this.$VideoUploadPostRequestManager11.schedule_feed_background_image;delete this.$VideoUploadPostRequestManager11.thumb;this.$VideoUploadPostRequestManager16=this.$VideoUploadPostRequestManager11.captions;delete this.$VideoUploadPostRequestManager11.captions;this.$VideoUploadPostRequestManager17=a.getWaterfallID();this.$VideoUploadPostRequestManager18=this.$VideoUploadPostRequestManager11.pollImages;this.$VideoUploadPostRequestManager19();this.inform("request-started")};d.$VideoUploadPostRequestManager19=function(){b("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=null,this.$VideoUploadPostRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager2).setAllowCrossOrigin(!0).setData(this.$VideoUploadPostRequestManager11).setThumbnail(this.$VideoUploadPostRequestManager12).setCustomProfileImage(this.$VideoUploadPostRequestManager13).setCustomBackgroundImage(this.$VideoUploadPostRequestManager14).setFeedBackgroundImage(this.$VideoUploadPostRequestManager15).setCaptions(this.$VideoUploadPostRequestManager16).setWaterfallID(this.$VideoUploadPostRequestManager17).setPollOptionImages(this.$VideoUploadPostRequestManager18).setSuccessHandler(this.$VideoUploadPostRequestManager21.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager22.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager23.bind(this)),this.$VideoUploadPostRequestManager10.send()};d.__createRequestData=function(a){return{video_id:a.getVideoID(),target_id:a.getTargetID(),source:a.getSource(),waterfall_id:a.getWaterfallID(),creator_product:a.getCreatorProduct(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_dialog_version:a.getComposerDialogVersion(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking()}};d.__getVideoUploadRequest=function(a){return new(b("VideoUploadRequest"))(a)};d.clearRequest=function(){this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager8=0,this.$VideoUploadPostRequestManager5=0};d.isInProgress=function(){return!!this.$VideoUploadPostRequestManager10};d.$VideoUploadPostRequestManager24=function(a){b("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=b("setTimeout")(this.$VideoUploadPostRequestManager19.bind(this),a)};d.$VideoUploadPostRequestManager25=function(a,b){return Math.pow(a,b)*1e3};d.$VideoUploadPostRequestManager21=function(a){a=a.getPayload();this.inform("request-finished",{video_id:a.video_id,video_asset_id:a.video_asset_id,container_type:a.container_type,transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,premiere_destination_video_id:a.premiere_destination_video_id});this.clearRequest()};d.$VideoUploadPostRequestManager26=function(a){this.inform("request-failed",{error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,error_is_transient:a.isTransient()}),this.clearRequest()};d.$VideoUploadPostRequestManager22=function(a){this.$VideoUploadPostRequestManager10=null;this.$VideoUploadPostRequestManager5=0;var c=this.$VideoUploadPostRequestManager9();if(c){var d={server_retries:this.$VideoUploadPostRequestManager8,extra_data:{failure_is_transient:a.isTransient()}};c.logEvent(b("VideoUploadLogger").EVENT_HANDLING_SERVER_FAILURE_RESPONSE,d)}a.isTransient()&&this.$VideoUploadPostRequestManager8<this.$VideoUploadPostRequestManager6?(this.$VideoUploadPostRequestManager8++,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager7,this.$VideoUploadPostRequestManager8))):this.$VideoUploadPostRequestManager26(a)};d.$VideoUploadPostRequestManager23=function(a){var c=this.$VideoUploadPostRequestManager9();if(c){var d={extra_data:{transport_retries:this.$VideoUploadPostRequestManager5}};c.logEvent(b("VideoUploadLogger").EVENT_HANDLING_TRANSPORT_FAILURE_RESPONSE,d)}this.$VideoUploadPostRequestManager3===0||this.$VideoUploadPostRequestManager5>=this.$VideoUploadPostRequestManager3?this.$VideoUploadPostRequestManager26(a):(this.$VideoUploadPostRequestManager5++,this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager4,this.$VideoUploadPostRequestManager5)))};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("Network",["mixInEventEmitter"],(function(a,b,c,d,e,f){var g=!0,h=a.navigator.connection,i={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"};function c(){return g}function d(a){if(a==g)return;g=a;l.emit(a?"online":"offline")}function f(){return h?h.bandwidth:g?Infinity:0}function j(){return h?h.metered:!1}function k(){var a=h?String(h.type):"0";return i[a]||a}var l={getBandwidth:f,getType:k,isMetered:j,isOnline:c,setOnline:d};b("mixInEventEmitter")(l,{online:!0,offline:!0});l=l;a.addEventListener?(a.addEventListener("online",d.bind(null,!0)),a.addEventListener("offline",d.bind(null,!1))):a.attachEvent&&(a.attachEvent("online",d.bind(null,!0)),a.attachEvent("offline",d.bind(null,!1)));e.exports=l}),null);
__d("VideoUploadConnectionMonitor",["requireCond","cr:909282","Network","VideoUploadFeatureDetector","debounce","mixin","setTimeout"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$VideoUploadConnectionMonitor1=!1;c.$VideoUploadConnectionMonitor2=[];c.$VideoUploadConnectionMonitor3=!1;c.$VideoUploadConnectionMonitor4=!0;c.$VideoUploadConnectionMonitor5=b("debounce")(function(){this.$VideoUploadConnectionMonitor6(!1)}.bind(babelHelpers.assertThisInitialized(c)),2e3);return c}var d=c.prototype;d.notifyStart=function(){if(this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor2.length===0&&(this.$VideoUploadConnectionMonitor2.push(b("Network").addListener("online",function(){this.$VideoUploadConnectionMonitor6(!0)}.bind(this))),this.$VideoUploadConnectionMonitor2.push(b("Network").addListener("offline",function(){this.$VideoUploadConnectionMonitor1?this.$VideoUploadConnectionMonitor5():(this.$VideoUploadConnectionMonitor5.reset(),b("setTimeout")(this.$VideoUploadConnectionMonitor5,2e3))}.bind(this))));this.$VideoUploadConnectionMonitor3=!0};d.notifyProgress=function(a){if(!this.$VideoUploadConnectionMonitor3)return;if(!a)return;b("VideoUploadFeatureDetector").supportsFullProgress()&&(this.$VideoUploadConnectionMonitor1=!0,a.total&&a.loaded===a.total?this.$VideoUploadConnectionMonitor5.reset():this.$VideoUploadConnectionMonitor5())};d.notifySuccess=function(){if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(!0)};d.notifyTransportError=function(){if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=!1;this.$VideoUploadConnectionMonitor6(!1)};d.notifyError=function(){if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(!0)};d.isOnline=function(){return this.$VideoUploadConnectionMonitor4};d.reset=function(){while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=!1};d.$VideoUploadConnectionMonitor6=function(a){this.$VideoUploadConnectionMonitor5.reset(),this.$VideoUploadConnectionMonitor4!==a&&(this.$VideoUploadConnectionMonitor4=a,this.$VideoUploadConnectionMonitor4?this.inform("online"):this.inform("offline"))};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("VideoUploadReceiveRequestManager",["fbt","requireCond","cr:909282","BanzaiODS","ResumableUploadAsyncService","ResumableUploadService","ResumableUploadServiceState.enum","VideoUploadConnectionMonitor","VideoUploadRequest","clearTimeout","md5","mixin","setTimeout","uuid"],(function(a,b,c,d,e,f,g){var h=1363037,i={INITIAL:"initial",NEXT_CHUNK:"next chunk",INVALID_OFFSET_RETRY:"invalid offset retry",SERVER_FAILURE_RETRY:"server failure retry",TRANSPORT_FAILURE_RETRY:"transport failure retry",TIMEOUT_RETRY:"timeout retry",BACK_ONLINE:"back online"};a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var A;m===void 0&&(m="");n===void 0&&(n=!1);o===void 0&&(o=!1);p===void 0&&(p=null);q===void 0&&(q=null);r===void 0&&(r=null);s===void 0&&(s=0);t===void 0&&(t=!1);u===void 0&&(u=!1);v===void 0&&(v=!1);w===void 0&&(w=!1);x===void 0&&(x=!1);y===void 0&&(y=!1);z===void 0&&(z=0);A=a.call(this)||this;A.$VideoUploadReceiveRequestManager1=c;A.$VideoUploadReceiveRequestManager2=d;A.$VideoUploadReceiveRequestManager3=e!=null?e:0;A.$VideoUploadReceiveRequestManager4=f;A.$VideoUploadReceiveRequestManager5=g;A.$VideoUploadReceiveRequestManager6=h;A.$VideoUploadReceiveRequestManager7=i;A.$VideoUploadReceiveRequestManager8=j;A.$VideoUploadReceiveRequestManager9=k;A.$VideoUploadReceiveRequestManager10=l;A.$VideoUploadReceiveRequestManager11=0;A.$VideoUploadReceiveRequestManager14=0;A.$VideoUploadReceiveRequestManager15=0;A.$VideoUploadReceiveRequestManager16=null;A.$VideoUploadReceiveRequestManager17=null;A.$VideoUploadReceiveRequestManager18=0;A.$VideoUploadReceiveRequestManager19="constructed";A.$VideoUploadReceiveRequestManager13=null;A.$VideoUploadReceiveRequestManager20=null;A.$VideoUploadReceiveRequestManager21=null;A.$VideoUploadReceiveRequestManager22=m;A.$VideoUploadReceiveRequestManager24=o;A.$VideoUploadReceiveRequestManager23=n;A.$VideoUploadReceiveRequestManager25=p;A.$VideoUploadReceiveRequestManager26=!1;A.$VideoUploadReceiveRequestManager27=q;A.$VideoUploadReceiveRequestManager30=t;A.$VideoUploadReceiveRequestManager31=u;A.$VideoUploadReceiveRequestManager32=v;A.$VideoUploadReceiveRequestManager29=s;A.$VideoUploadReceiveRequestManager33=w;A.$VideoUploadReceiveRequestManager28=r;A.$VideoUploadReceiveRequestManager34=x;A.$VideoUploadReceiveRequestManager12=b("uuid")();A.$VideoUploadReceiveRequestManager35=y;A.$VideoUploadReceiveRequestManager36=z;A.$VideoUploadReceiveRequestManager41=null;A.$VideoUploadReceiveRequestManager42=null;A.$VideoUploadReceiveRequestManager40=!1;A.$VideoUploadReceiveRequestManager39=null;A.$VideoUploadReceiveRequestManager37=new(b("VideoUploadConnectionMonitor"))();A.$VideoUploadReceiveRequestManager37.subscribe("online",A.$VideoUploadReceiveRequestManager50.bind(babelHelpers.assertThisInitialized(A)));A.$VideoUploadReceiveRequestManager37.subscribe("offline",A.$VideoUploadReceiveRequestManager51.bind(babelHelpers.assertThisInitialized(A)));return A}var d=c.prototype;d.updateVideoID=function(a){if(this.$VideoUploadReceiveRequestManager38.getVideoID())return;this.$VideoUploadReceiveRequestManager38.setVideoID(a);this.$VideoUploadReceiveRequestManager45&&this.$VideoUploadReceiveRequestManager45.setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager38));this.$VideoUploadReceiveRequestManager52()};d.isResumabilityEnabled=function(){return this.$VideoUploadReceiveRequestManager23};d.isResumableServiceProxyReceiveEnabled=function(){return this.$VideoUploadReceiveRequestManager30};d.sendRequest=function(a){this.$VideoUploadReceiveRequestManager19="sending request";if(this.$VideoUploadReceiveRequestManager45){this.$VideoUploadReceiveRequestManager19="request already in progress";return}this.$VideoUploadReceiveRequestManager18=a.getEndOffset()-a.getStartOffset();this.$VideoUploadReceiveRequestManager38=a;this.$VideoUploadReceiveRequestManager53(i.INITIAL)};d.cancelRequest=function(){if(!this.$VideoUploadReceiveRequestManager45)return;this.$VideoUploadReceiveRequestManager45.abort();this.$VideoUploadReceiveRequestManager21!==void 0&&this.$VideoUploadReceiveRequestManager21!==null&&this.$VideoUploadReceiveRequestManager21.cancel();this.$VideoUploadReceiveRequestManager54();this.inform("request-canceled")};d.appendStateLogData=function(a,b){a[b+"request_manager_state"]=this.$VideoUploadReceiveRequestManager19,a[b+"upload_speed"]=this.$VideoUploadReceiveRequestManager17,a[b+"transport_retries"]=this.$VideoUploadReceiveRequestManager11,a[b+"server_retries"]=this.$VideoUploadReceiveRequestManager14,a[b+"timeout_retries"]=this.$VideoUploadReceiveRequestManager15,a[b+"last_timeout_value"]=this.$VideoUploadReceiveRequestManager43,a[b+"last_request_start_time"]=this.$VideoUploadReceiveRequestManager16,a[b+"pending_request"]=this.$VideoUploadReceiveRequestManager45!=null,a[b+"pending_timer"]=this.$VideoUploadReceiveRequestManager46!=null,a[b+"cached_chunk"]=this.$VideoUploadReceiveRequestManager44!=null,a[b+"early_receive_start"]=this.$VideoUploadReceiveRequestManager40,this.$VideoUploadReceiveRequestManager38!=null&&(a[b+"start_offset"]=this.$VideoUploadReceiveRequestManager38.getStartOffset(),a[b+"end_offset"]=this.$VideoUploadReceiveRequestManager38.getEndOffset(),a[b+"partition_start_offset"]=this.$VideoUploadReceiveRequestManager38.getPartitionStartOffset(),a[b+"partition_end_offset"]=this.$VideoUploadReceiveRequestManager38.getPartitionEndOffset()),this.$VideoUploadReceiveRequestManager37!=null&&(a[b+"connection_monitor_online"]=this.$VideoUploadReceiveRequestManager37.isOnline())};d.getHostName=function(a){try{return new URL(a).hostname}catch(a){return null}};d.$VideoUploadReceiveRequestManager54=function(){this.$VideoUploadReceiveRequestManager45=null,this.$VideoUploadReceiveRequestManager44=null,this.$VideoUploadReceiveRequestManager11=0,this.$VideoUploadReceiveRequestManager14=0,this.$VideoUploadReceiveRequestManager12=b("uuid")(),this.$VideoUploadReceiveRequestManager15=0,this.$VideoUploadReceiveRequestManager16=null,this.$VideoUploadReceiveRequestManager17=null,this.$VideoUploadReceiveRequestManager18=0,this.$VideoUploadReceiveRequestManager41=null,this.$VideoUploadReceiveRequestManager42=null,this.$VideoUploadReceiveRequestManager40=!1,this.$VideoUploadReceiveRequestManager26=!1,this.$VideoUploadReceiveRequestManager39=null,this.$VideoUploadReceiveRequestManager38.reset(),this.$VideoUploadReceiveRequestManager37.reset(),b("clearTimeout")(this.$VideoUploadReceiveRequestManager46),this.$VideoUploadReceiveRequestManager46=null};d.$VideoUploadReceiveRequestManager53=function(a,c){b("clearTimeout")(this.$VideoUploadReceiveRequestManager46);this.$VideoUploadReceiveRequestManager46=null;this.$VideoUploadReceiveRequestManager20=a;this.$VideoUploadReceiveRequestManager13=b("uuid")();if(this.$VideoUploadReceiveRequestManager38.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager38.getStartOffset()>=this.$VideoUploadReceiveRequestManager38.getPartitionEndOffset()){!c?(this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager14,upload_speed:this.$VideoUploadReceiveRequestManager17,request_manager_state:this.$VideoUploadReceiveRequestManager19,upload_domain:this.$VideoUploadReceiveRequestManager39,debug:{request_reason:this.$VideoUploadReceiveRequestManager20,single_request_id:this.$VideoUploadReceiveRequestManager13}}),this.$VideoUploadReceiveRequestManager19="request finished - notified"):this.$VideoUploadReceiveRequestManager19="request finished - not notified";return}this.$VideoUploadReceiveRequestManager45=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(!0).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager38)).setWaterfallID(this.$VideoUploadReceiveRequestManager38.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager55.bind(this));this.$VideoUploadReceiveRequestManager23||this.$VideoUploadReceiveRequestManager45.setUploadProgressHandler(this.$VideoUploadReceiveRequestManager56.bind(this));this.$VideoUploadReceiveRequestManager16=Date.now();this.$VideoUploadReceiveRequestManager39=this.getHostName(this.$VideoUploadReceiveRequestManager1);a=!1;if(this.$VideoUploadReceiveRequestManager38.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager5){c=this.$VideoUploadReceiveRequestManager57(this.$VideoUploadReceiveRequestManager38.getEndOffset()-this.$VideoUploadReceiveRequestManager38.getStartOffset(),this.$VideoUploadReceiveRequestManager17);this.$VideoUploadReceiveRequestManager45.setTimeoutHandler(c,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager19="sending chunk with timeout = "+c;this.$VideoUploadReceiveRequestManager43=c}else this.$VideoUploadReceiveRequestManager19="sending chunk without timeout";c=this.$VideoUploadReceiveRequestManager58();if(c===null||c===void 0){this.$VideoUploadReceiveRequestManager59({error_description:"Provided chunk is null.",error_is_transient:!1});return}else this.$VideoUploadReceiveRequestManager23&&this.$VideoUploadReceiveRequestManager29<this.$VideoUploadReceiveRequestManager38.getFile().getSize()?(a=!0,this.$VideoUploadReceiveRequestManager60(c)):this.$VideoUploadReceiveRequestManager45.sendChunk(c)}else this.$VideoUploadReceiveRequestManager19="sending file",this.$VideoUploadReceiveRequestManager45.sendFile(this.$VideoUploadReceiveRequestManager38.getFile().getFileInput());this.$VideoUploadReceiveRequestManager61(a);this.$VideoUploadReceiveRequestManager37.notifyStart();this.inform("request-started",{start_offset:this.$VideoUploadReceiveRequestManager38.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager14,upload_speed:this.$VideoUploadReceiveRequestManager17,request_manager_state:this.$VideoUploadReceiveRequestManager19,upload_domain:this.$VideoUploadReceiveRequestManager39,debug:{request_reason:this.$VideoUploadReceiveRequestManager20,single_request_id:this.$VideoUploadReceiveRequestManager13}})};d.$VideoUploadReceiveRequestManager61=function(a){(this.$VideoUploadReceiveRequestManager38.getSource()==="create_flow"||this.$VideoUploadReceiveRequestManager38.getSource()==="ads_interfaces")&&b("BanzaiODS").bumpEntityKey(2966,"video_ads_upload",a?"upload_service":"graph_api")};d.$VideoUploadReceiveRequestManager62=function(a,b,c){!this.$VideoUploadReceiveRequestManager38.getVideoID()?(this.$VideoUploadReceiveRequestManager41=a,this.$VideoUploadReceiveRequestManager42=b):a(b,c)};d.$VideoUploadReceiveRequestManager52=function(){this.$VideoUploadReceiveRequestManager41&&(this.$VideoUploadReceiveRequestManager41(this.$VideoUploadReceiveRequestManager42),this.$VideoUploadReceiveRequestManager41=null,this.$VideoUploadReceiveRequestManager42=null)};d.$VideoUploadReceiveRequestManager60=function(a){var c,d=this.$VideoUploadReceiveRequestManager38.getFile(),e=d.getFile().lastModified+d.getFile().name+d.getFile().type+this.$VideoUploadReceiveRequestManager63();e=String(b("md5")(e))+"-"+this.$VideoUploadReceiveRequestManager38.getStartOffset()+"-"+this.$VideoUploadReceiveRequestManager38.getEndOffset();c=((c=this.$VideoUploadReceiveRequestManager38)==null?void 0:c.getRetryState())==null?this.$VideoUploadReceiveRequestManager14+this.$VideoUploadReceiveRequestManager11+this.$VideoUploadReceiveRequestManager15:this.$VideoUploadReceiveRequestManager38.getRetryState().getTotalRetryCount();d=this.$VideoUploadReceiveRequestManager35&&this.$VideoUploadReceiveRequestManager36<d.getSize()?["video_upload_www",[this.$VideoUploadReceiveRequestManager12,String(c)].join("_"),[String(this.$VideoUploadReceiveRequestManager38.getWaterfallID()),String(this.$VideoUploadReceiveRequestManager38.getVideoID())].join("_")].join(":"):null;this.isResumabilityEnabled()&&this.$VideoUploadReceiveRequestManager25&&this.$VideoUploadReceiveRequestManager11>this.$VideoUploadReceiveRequestManager2/3&&(this.$VideoUploadReceiveRequestManager26=!0);c="fb_video";this.$VideoUploadReceiveRequestManager30&&(c="fb_video2");var f=null;if(this.$VideoUploadReceiveRequestManager30||this.$VideoUploadReceiveRequestManager31){var g={};g.start_offset=this.$VideoUploadReceiveRequestManager38.getStartOffset();g.end_offset=this.$VideoUploadReceiveRequestManager38.getEndOffset();g.composer_session_id=this.$VideoUploadReceiveRequestManager38.getWaterfallID();g.upload_session_id=this.$VideoUploadReceiveRequestManager38.getUploadSessionID();g.product_media_id=this.$VideoUploadReceiveRequestManager38.getVideoID();g.xpv_asset_id=this.$VideoUploadReceiveRequestManager38.getXPVAssetID();g.fb_region=this.$VideoUploadReceiveRequestManager38.getFbRegion();this.$VideoUploadReceiveRequestManager32&&(g.total_file_size=this.$VideoUploadReceiveRequestManager38.getFile().getSize());f=g}g={};g.consumer=c;g.accessToken=this.$VideoUploadReceiveRequestManager22;g.sessionKey=e;g.serviceName=this.$VideoUploadReceiveRequestManager26?null:this.$VideoUploadReceiveRequestManager25;g.serviceDomain=this.$VideoUploadReceiveRequestManager27;g.receiveParameters=f;g.flowCaptureHeaderValue=this.$VideoUploadReceiveRequestManager34?this.$VideoUploadReceiveRequestManager38.getWaterfallID():null;g.tracingHeaderValue=d;this.$VideoUploadReceiveRequestManager24?c=b("ResumableUploadAsyncService").create(g):c=b("ResumableUploadService").create(g);this.$VideoUploadReceiveRequestManager21=c;this.$VideoUploadReceiveRequestManager39=c.getServiceName();this.$VideoUploadReceiveRequestManager64();c.resume(a);this.inform("resumable-called",{debug:{single_request_id:this.$VideoUploadReceiveRequestManager13,authority:this.$VideoUploadReceiveRequestManager39}})};d.$VideoUploadReceiveRequestManager64=function(){var a=this;this.$VideoUploadReceiveRequestManager38.getVideoID()||(this.$VideoUploadReceiveRequestManager40=!0);var c=this.$VideoUploadReceiveRequestManager21;if(c===null||c===void 0)return;c.addListener(b("ResumableUploadServiceState.enum").START,function(b){a.inform("resumable-started",{resume_from_offset:b.offset,debug:{single_request_id:a.$VideoUploadReceiveRequestManager13,partition:a.$VideoUploadReceiveRequestManager38.getPartitionNo(),authority:a.$VideoUploadReceiveRequestManager39}})});this.$VideoUploadReceiveRequestManager47=function(b){a.inform("resumable-failed",{error_code:b.getError(),error_description:b.getErrorDescription(),error_summary:b.getErrorSummary(),error_is_transient:b.isTransient(),debug:{error_source:"service",single_request_id:a.$VideoUploadReceiveRequestManager13,partition:a.$VideoUploadReceiveRequestManager38.getPartitionNo(),authority:a.$VideoUploadReceiveRequestManager39}}),a.__handleServerFailureResponse(b)};c.addListener(b("ResumableUploadServiceState.enum").FAIL,function(b){a.$VideoUploadReceiveRequestManager62(a.$VideoUploadReceiveRequestManager47,b)});this.$VideoUploadReceiveRequestManager48=function(b){!a.$VideoUploadReceiveRequestManager30?(a.$VideoUploadReceiveRequestManager45.setHandle(b),a.$VideoUploadReceiveRequestManager45.sendChunk(null)):a.__handleSuccessResponsePayload({start_offset:a.$VideoUploadReceiveRequestManager38.getEndOffset(),end_offset:a.$VideoUploadReceiveRequestManager38.getPartitionEndOffset()}),a.inform("resumable-success",{everstore_handle:b,debug:{single_request_id:a.$VideoUploadReceiveRequestManager13,partition:a.$VideoUploadReceiveRequestManager38.getPartitionNo(),authority:a.$VideoUploadReceiveRequestManager39}})};c.addListener(b("ResumableUploadServiceState.enum").SUCCESS,function(b){a.$VideoUploadReceiveRequestManager62(a.$VideoUploadReceiveRequestManager48,b)});this.$VideoUploadReceiveRequestManager49=function(b,c){a.inform("resumable-failed",{error_code:b.getError(),error_description:b.getErrorDescription(),error_summary:b.getErrorSummary(),error_is_transient:b.isTransient(),resume_from_offset:c.offset,debug:{error_source:"transport",single_request_id:a.$VideoUploadReceiveRequestManager13,partition:a.$VideoUploadReceiveRequestManager38.getPartitionNo(),method:c.method,authority:a.$VideoUploadReceiveRequestManager39}}),a.$VideoUploadReceiveRequestManager55(b)};c.addListener(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,function(b,c){a.$VideoUploadReceiveRequestManager62(a.$VideoUploadReceiveRequestManager49,b,c)});c.addListener(b("ResumableUploadServiceState.enum").PROGRESS,function(b){a.$VideoUploadReceiveRequestManager33&&(a.$VideoUploadReceiveRequestManager11=0),a.$VideoUploadReceiveRequestManager56(b)})};d.__getVideoUploadRequest=function(a){return new(b("VideoUploadRequest"))(a)};d.$VideoUploadReceiveRequestManager65=function(a,c){this.$VideoUploadReceiveRequestManager19="setting request to send after"+c,b("clearTimeout")(this.$VideoUploadReceiveRequestManager46),this.$VideoUploadReceiveRequestManager46=b("setTimeout")(this.$VideoUploadReceiveRequestManager53.bind(this,a),c)};d.$VideoUploadReceiveRequestManager58=function(){if(this.$VideoUploadReceiveRequestManager44)return this.$VideoUploadReceiveRequestManager44;var a=this.$VideoUploadReceiveRequestManager38.getFile();if(this.$VideoUploadReceiveRequestManager23){var b=a.getFile();this.$VideoUploadReceiveRequestManager44=b?b.slice(this.$VideoUploadReceiveRequestManager38.getStartOffset(),this.$VideoUploadReceiveRequestManager38.getEndOffset(),"application/octet-stream"):null}else this.$VideoUploadReceiveRequestManager44=a.getChunk(this.$VideoUploadReceiveRequestManager38.getStartOffset(),this.$VideoUploadReceiveRequestManager38.getEndOffset());return this.$VideoUploadReceiveRequestManager44};d.__createRequestData=function(a){return{composer_session_id:a.getComposerSessionID(),video_id:a.getVideoID(),start_offset:a.getStartOffset(),end_offset:a.getEndOffset(),source:a.getSource(),target_id:a.getTargetID(),waterfall_id:a.getWaterfallID(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_work_shared_draft_mode:a.getComposerWorkSharedDraftMode(),composer_dialog_version:a.getComposerDialogVersion(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager17,partition_start_offset:a.getPartitionStartOffset(),partition_end_offset:a.getPartitionEndOffset()}};d.__handleSuccessResponse=function(a){a=a.getPayload();this.__handleSuccessResponsePayload(a)};d.__handleSuccessResponsePayload=function(a){this.$VideoUploadReceiveRequestManager19="success response received";var c=Date.now()-(this.$VideoUploadReceiveRequestManager16||0);c=c===0?1:c;if(a.start_offset===this.$VideoUploadReceiveRequestManager38.getEndOffset()){var d=this.$VideoUploadReceiveRequestManager38.getEndOffset()-this.$VideoUploadReceiveRequestManager38.getStartOffset();this.$VideoUploadReceiveRequestManager17=Math.floor(d/c)}else this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager37.notifySuccess();this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager38.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager14,upload_speed:this.$VideoUploadReceiveRequestManager17,request_manager_state:this.$VideoUploadReceiveRequestManager19,upload_domain:this.$VideoUploadReceiveRequestManager39,debug:{request_reason:this.$VideoUploadReceiveRequestManager20,single_request_id:this.$VideoUploadReceiveRequestManager13}});this.$VideoUploadReceiveRequestManager38.setStartOffset(a.start_offset);d=a.end_offset;this.$VideoUploadReceiveRequestManager38.getClientChunkSize()&&(d=a.start_offset+Math.min(this.$VideoUploadReceiveRequestManager38.getPartitionEndOffset()-a.start_offset,this.$VideoUploadReceiveRequestManager38.getClientChunkSize()));this.$VideoUploadReceiveRequestManager38.setEndOffset(d);this.$VideoUploadReceiveRequestManager38.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager17);this.$VideoUploadReceiveRequestManager45=null;this.$VideoUploadReceiveRequestManager44=null;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager14=0;this.$VideoUploadReceiveRequestManager12=b("uuid")();this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager38.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager53(i.NEXT_CHUNK,!0)};d.$VideoUploadReceiveRequestManager66=function(a){var b=this,c=a.getPayload();this.$VideoUploadReceiveRequestManager19="invalid offset response received start="+c.start_offset+" end="+c.end_offset;(this.$VideoUploadReceiveRequestManager38.getStartOffset()!=c.start_offset||this.$VideoUploadReceiveRequestManager38.getEndOffset()!=c.end_offset)&&(this.$VideoUploadReceiveRequestManager38.setStartOffset(c.start_offset),this.$VideoUploadReceiveRequestManager38.setEndOffset(c.end_offset),this.$VideoUploadReceiveRequestManager44=null);((c=this.$VideoUploadReceiveRequestManager38)==null?void 0:c.getRetryState())==null?(this.$VideoUploadReceiveRequestManager14++,this.$VideoUploadReceiveRequestManager53(i.INVALID_OFFSET_RETRY)):this.$VideoUploadReceiveRequestManager38.getRetryState().handleRetry({context:{location:"receive-invalid_offset"},retryHandler:function(a){return b.$VideoUploadReceiveRequestManager65(i.INVALID_OFFSET_RETRY,a)},failureHandler:function(){return b.$VideoUploadReceiveRequestManager67(a)}})};d.__handleServerFailureResponse=function(a){var b=this;this.$VideoUploadReceiveRequestManager19="failure response received";this.$VideoUploadReceiveRequestManager45=null;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager37.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(a.getError()))this.$VideoUploadReceiveRequestManager66(a);else{var c;((c=this.$VideoUploadReceiveRequestManager38)==null?void 0:c.getRetryState())==null?(a.isTransient()||this.$VideoUploadReceiveRequestManager10)&&this.$VideoUploadReceiveRequestManager14<this.$VideoUploadReceiveRequestManager4?(this.$VideoUploadReceiveRequestManager19="transient server error",this.$VideoUploadReceiveRequestManager14++,this.$VideoUploadReceiveRequestManager65(i.SERVER_FAILURE_RETRY,this.$VideoUploadReceiveRequestManager68(this.$VideoUploadReceiveRequestManager9,this.$VideoUploadReceiveRequestManager14,0))):this.$VideoUploadReceiveRequestManager67(a):this.$VideoUploadReceiveRequestManager38.getRetryState().handleRetry({context:{location:"receive-server_issue",error_code:a.getError()},predicate:function(){return a.isTransient()},retryHandler:function(a){b.$VideoUploadReceiveRequestManager19="transient server error",b.$VideoUploadReceiveRequestManager65(i.SERVER_FAILURE_RETRY,a)},failureHandler:function(){return b.$VideoUploadReceiveRequestManager67(a)}})}};d.__handleResponseTimeout=function(a){var b=this;this.inform("request-timeout",{start_offset:this.$VideoUploadReceiveRequestManager38.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager38.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager14,timeout_retries:this.$VideoUploadReceiveRequestManager15,upload_speed:this.$VideoUploadReceiveRequestManager17,request_manager_state:this.$VideoUploadReceiveRequestManager19,debug:{upload_domain:this.$VideoUploadReceiveRequestManager39,single_request_id:this.$VideoUploadReceiveRequestManager13}});this.$VideoUploadReceiveRequestManager45.abort();this.$VideoUploadReceiveRequestManager45=null;this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager37.notifyTransportError();var c=function(){var a=b.$VideoUploadReceiveRequestManager38.getEndOffset()-b.$VideoUploadReceiveRequestManager38.getStartOffset();a=Math.floor(a/2);a=Math.max(a,b.$VideoUploadReceiveRequestManager18);var c=b.$VideoUploadReceiveRequestManager38.getEndOffset();c=Math.min(c,b.$VideoUploadReceiveRequestManager38.getStartOffset()+a);b.$VideoUploadReceiveRequestManager38.setEndOffset(c);b.$VideoUploadReceiveRequestManager44=null;b.$VideoUploadReceiveRequestManager19="resending after timeout with chunksize="+a;b.$VideoUploadReceiveRequestManager53(i.TIMEOUT_RETRY)},d=function(){b.$VideoUploadReceiveRequestManager59({error_code:1006,error_description:g._("Your browser appears to be offline. Please check your internet connection and try again."),error_summary:g._("No Network Connection"),error_is_transient:!0})};((a=this.$VideoUploadReceiveRequestManager38)==null?void 0:a.getRetryState())==null?++this.$VideoUploadReceiveRequestManager15<=this.$VideoUploadReceiveRequestManager6?c():d():this.$VideoUploadReceiveRequestManager38.getRetryState().handleRetry({context:{location:"receive-timeout",error_code:1006},retryHandler:function(a){return c()},failureHandler:function(){return d()}})};d.__hasInvalidStartOffsetAndHasRetries=function(a){return a===h&&this.$VideoUploadReceiveRequestManager14<this.$VideoUploadReceiveRequestManager4};d.$VideoUploadReceiveRequestManager55=function(a){var b,c=this;this.$VideoUploadReceiveRequestManager37.notifyTransportError();this.$VideoUploadReceiveRequestManager17=null;((b=this.$VideoUploadReceiveRequestManager38)==null?void 0:b.getRetryState())==null?(this.$VideoUploadReceiveRequestManager15=0,this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager2?(this.$VideoUploadReceiveRequestManager19="resending after transport failure",this.$VideoUploadReceiveRequestManager11++,this.$VideoUploadReceiveRequestManager45=null,this.$VideoUploadReceiveRequestManager65(i.TRANSPORT_FAILURE_RETRY,this.$VideoUploadReceiveRequestManager68(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11,this.$VideoUploadReceiveRequestManager3))):this.$VideoUploadReceiveRequestManager67(a)):this.$VideoUploadReceiveRequestManager38.getRetryState().handleRetry({context:{location:"receive-transport_issue",error_code:a.getError()},retryHandler:function(a){c.$VideoUploadReceiveRequestManager45=null,c.$VideoUploadReceiveRequestManager19="resending after transport failure",c.$VideoUploadReceiveRequestManager65(i.TRANSPORT_FAILURE_RETRY,a)},failureHandler:function(){return c.$VideoUploadReceiveRequestManager67(a)}})};d.$VideoUploadReceiveRequestManager67=function(a){this.$VideoUploadReceiveRequestManager59({error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),error_is_transient:a.isTransient(),upload_domain:this.uploadDomain})};d.$VideoUploadReceiveRequestManager59=function(a){this.$VideoUploadReceiveRequestManager19="handling failure error",a.debug=babelHelpers["extends"]({},a.debug,{single_request_id:this.$VideoUploadReceiveRequestManager13}),this.inform("request-failed",a),this.$VideoUploadReceiveRequestManager54()};d.$VideoUploadReceiveRequestManager56=function(a){this.$VideoUploadReceiveRequestManager37.notifyProgress(a),this.$VideoUploadReceiveRequestManager38&&this.$VideoUploadReceiveRequestManager38.getFile()&&this.inform("request-progressed",{file_size:this.$VideoUploadReceiveRequestManager38.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager38.getStartOffset(),sent_bytes:a.loaded,transport_retries:this.$VideoUploadReceiveRequestManager11,upload_domain:this.$VideoUploadReceiveRequestManager39,debug:{single_request_id:this.$VideoUploadReceiveRequestManager13}})};d.$VideoUploadReceiveRequestManager50=function(){var a;this.inform("online");this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager15=0;(a=this.$VideoUploadReceiveRequestManager38)==null?void 0:(a=a.getRetryState())==null?void 0:a.resetDelay();this.$VideoUploadReceiveRequestManager46&&this.$VideoUploadReceiveRequestManager53(i.BACK_ONLINE)};d.$VideoUploadReceiveRequestManager51=function(){this.inform("offline")};d.$VideoUploadReceiveRequestManager68=function(a,b,c){var d;this.$VideoUploadReceiveRequestManager23?d=Math.min(Math.pow(a,b),8)*1e3:d=Math.pow(a,b)*1e3;c>0&&(d=Math.min(d,c));return d};d.$VideoUploadReceiveRequestManager57=function(a,b){b!==void 0&&b!==null&&b>0?b=b:b=10;a=Math.floor(a/b*this.$VideoUploadReceiveRequestManager7/100);return Math.max(a,3e4)};d.$VideoUploadReceiveRequestManager63=function(){return this.$VideoUploadReceiveRequestManager28?this.$VideoUploadReceiveRequestManager28:this.$VideoUploadReceiveRequestManager38.getWaterfallID()};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("VideoUploadStartRequestManager",["requireCond","cr:909282","Assert","FileHasher","VideoUploadRequest","clearTimeout","mixin","performanceNow","setTimeout"],(function(a,b,c,d,e,f){var g;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f,g,h,i){var j;j=a.call(this)||this;j.$VideoUploadStartRequestManager1=b;j.$VideoUploadStartRequestManager2=c;j.$VideoUploadStartRequestManager3=d;j.$VideoUploadStartRequestManager4=e;j.$VideoUploadStartRequestManager5=0;j.$VideoUploadStartRequestManager6=f;j.$VideoUploadStartRequestManager7=g;j.$VideoUploadStartRequestManager8=h;j.$VideoUploadStartRequestManager9=i;j.$VideoUploadStartRequestManager10=0;return j}var d=c.prototype;d.getRequest=function(){return this.$VideoUploadStartRequestManager11};d.sendRequest=function(a){var c=this;if(this.$VideoUploadStartRequestManager12||this.$VideoUploadStartRequestManager11)return;this.$VideoUploadStartRequestManager13=a;this.$VideoUploadStartRequestManager6&&this.$VideoUploadStartRequestManager13.getFile().getFile()&&this.$VideoUploadStartRequestManager13.getFile().getFile().size<this.$VideoUploadStartRequestManager7&&b("FileHasher").isSupported()?(this.$VideoUploadStartRequestManager14=(g||(g=b("performanceNow")))(),this.$VideoUploadStartRequestManager12=new(b("FileHasher"))(),this.$VideoUploadStartRequestManager12.hash(this.$VideoUploadStartRequestManager13.getFile().getFile(),function(a){c.$VideoUploadStartRequestManager14=(g||(g=b("performanceNow")))()-c.$VideoUploadStartRequestManager14,c.$VideoUploadStartRequestManager15=a.hash,c.$VideoUploadStartRequestManager12.destroy(),c.$VideoUploadStartRequestManager12=null,a.hash||(c.$VideoUploadStartRequestManager16=a.exception),c.$VideoUploadStartRequestManager17()})):this.$VideoUploadStartRequestManager17()};d.$VideoUploadStartRequestManager17=function(){this.$VideoUploadStartRequestManager18(),this.inform("request-started",{hash_time:this.$VideoUploadStartRequestManager14,hash_exception:this.$VideoUploadStartRequestManager16})};d.$VideoUploadStartRequestManager18=function(){b("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null,this.$VideoUploadStartRequestManager11=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(!0).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager13,this.$VideoUploadStartRequestManager15)).setWaterfallID(this.$VideoUploadStartRequestManager13.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager20.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager21.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager22.bind(this)),this.$VideoUploadStartRequestManager11.send()};d.__getVideoUploadRequest=function(a){return new(b("VideoUploadRequest"))(a)};d.__getDataToSend=function(a,b){return{file_size:a.getFile().getSize(),file_extension:a.getFile().getExtension(),target_id:a.getTargetID(),source:a.getSource(),composer_dialog_version:a.getComposerDialogVersion(),waterfall_id:a.getWaterfallID(),composer_session_id:a.getComposerSessionID(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_work_shared_draft_mode:a.getComposerWorkSharedDraftMode(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking(),supports_file_api:a.getSupportsFileAPI(),partition_start_offset:a.getPartitionStartOffset(),partition_end_offset:a.getPartitionEndOffset(),creator_product:a.getCreatorProduct(),original_file_hash:b,spherical:a.getIsSphericalVideo(),spherical_metadata:a.getSphericalMetadata(),video_publisher_action_source:a.getVideoPublisherActionSource()}};d.cancelRequest=function(){this.$VideoUploadStartRequestManager23(),this.inform("request-canceled")};d.$VideoUploadStartRequestManager24=function(a){b("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=b("setTimeout")(this.$VideoUploadStartRequestManager18.bind(this),a)};d.$VideoUploadStartRequestManager23=function(){this.$VideoUploadStartRequestManager12&&(this.$VideoUploadStartRequestManager12.destroy(),this.$VideoUploadStartRequestManager12=null),this.$VideoUploadStartRequestManager11&&(this.$VideoUploadStartRequestManager11.abort(),this.$VideoUploadStartRequestManager11=null),this.$VideoUploadStartRequestManager10=0,this.$VideoUploadStartRequestManager5=0,this.$VideoUploadStartRequestManager13=null,b("clearTimeout")(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null};d.$VideoUploadStartRequestManager25=function(a,b,c){a=Math.pow(a,b)*1e3;c>0&&(a=Math.min(a,c));return a};d.$VideoUploadStartRequestManager20=function(a){var c;(c=this.$VideoUploadStartRequestManager13)==null?void 0:(c=c.getRetryState())==null?void 0:c.resetDelay();c=a.getPayload();this.inform("request-finished",this.__getSuccessInformData(c));this.$VideoUploadStartRequestManager11=null;b("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")};d.__getSuccessInformData=function(a){return{video_id:a.video_id,xpv_asset_id:a.xpv_asset_id,upload_session_id:a.upload_session_id,fb_region:a.region_hint,start_offset:a.start_offset,end_offset:a.end_offset,transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,skip_upload:a.skip_upload,hash_time:this.$VideoUploadStartRequestManager14}};d.$VideoUploadStartRequestManager26=function(a){this.inform("request-failed",this.$VideoUploadStartRequestManager27(a)),this.$VideoUploadStartRequestManager11=null,b("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")};d.$VideoUploadStartRequestManager21=function(a){var b,c=this;this.$VideoUploadStartRequestManager11=null;var d=(b=this.$VideoUploadStartRequestManager13)==null?void 0:b.getRetryState();d==null?(this.$VideoUploadStartRequestManager5=0,a.isTransient()&&this.$VideoUploadStartRequestManager10<this.$VideoUploadStartRequestManager8?(this.$VideoUploadStartRequestManager10++,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager9,this.$VideoUploadStartRequestManager10))):this.$VideoUploadStartRequestManager26(a)):d.handleRetry({context:{location:"start-server_issue",error_code:a.getError()},predicate:function(){return a.isTransient()},retryHandler:function(a){c.$VideoUploadStartRequestManager10=d.getTotalRetryCount(),c.$VideoUploadStartRequestManager24(a)},failureHandler:function(){return c.$VideoUploadStartRequestManager26(a)}})};d.$VideoUploadStartRequestManager22=function(a){var b,c=this;((b=this.$VideoUploadStartRequestManager13)==null?void 0:b.getRetryState())==null?this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager5>=this.$VideoUploadStartRequestManager2?this.$VideoUploadStartRequestManager26(a):(this.$VideoUploadStartRequestManager5++,this.$VideoUploadStartRequestManager11=null,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager5,this.$VideoUploadStartRequestManager4))):this.$VideoUploadStartRequestManager13.getRetryState().handleRetry({context:{location:"start-transport_issue",error_code:a.getError()},retryHandler:function(a){c.$VideoUploadStartRequestManager11=null,c.$VideoUploadStartRequestManager24(a)},failureHandler:function(){return c.$VideoUploadStartRequestManager26(a)}})};d.$VideoUploadStartRequestManager27=function(a){return{error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,error_is_transient:a.isTransient()}};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("ISOVideoBoxConstants",[],(function(a,b,c,d,e,f){"use strict";a={BOX_BASE_SIZE:8,GSPHERICAL_UUID:[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],FBSPHERICAL_UUID:[174,36,178,77,60,143,79,24,138,123,224,9,193,56,53,193]};e.exports=a}),null);
__d("VideoStereoFormat",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MONO:"mono",LEFT_RIGHT:"left-right",TOP_BOTTOM:"top-bottom"})}),null);
__d("VideoSphericalMetadataUtil",["SphericalVideoMetadataTags","VideoProjection","VideoStereoFormat"],(function(a,b,c,d,e,f){"use strict";a={parseXMLToDocument:function(a){if(!a)return null;a=a.replace(/\0/g,"");if(window.DOMParser){var b=new DOMParser();b=b.parseFromString(a,"text/xml")}else b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a);return b},stringToProjectionType:function(a){if(Object.values(b("VideoProjection")).includes(a))return a;else return null},stringToStereoMode:function(a){if(Object.values(b("VideoStereoFormat")).includes(a))return a;else return null},getUnsupportedGSphericalTagsXML:function(a){a=a.getElementsByTagNameNS("*","*");var c=null;for(var d=0;d<a.length;d++){var e=a[d],f=e.nodeName,g=e.parentElement;if(f!=="parsererror"&&g&&g.nodeName!=="parsererror"&&Object.values(b("SphericalVideoMetadataTags").GSPHERICAL).indexOf(f)<0&&Object.values(b("SphericalVideoMetadataTags").GSPHERICAL).indexOf(g.nodeName)<0){c||(c="");g=e.outerHTML;c+="<"+f+g.slice(f.length+1,-(f.length+1))+f+">"}}return c},isGoogleVR180:function(a,b,c,d,e){if(null!==b&&null!==c&&null!==d&&null!==e&&a.projectionType==="equirectangular"&&(a.stereoMode==="left-right"||a.stereoMode==="top-bottom")){a=parseInt(b,10);b=parseInt(c,10);c=parseInt(d,10);d=parseInt(e,10);if(Math.abs(a-c/2)<=1&&Math.abs(b-d)<=1)return!0}return!1},arrayBufferToFile:function(a,b,c){return new File([a],b,{type:c})},stringToArrayBuffer:function(a){var b=new ArrayBuffer(a.length),c=new DataView(b);for(var d=0;d<a.length;d++)c.setUint8(d,a.charCodeAt(d));return b},bufferToFile:function(a,b,c){a=a.buffer;return this.arrayBufferToFile(a,b,c)},uuidArrayEquals:function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}};e.exports=a}),null);
__d("checkForSphericalTag",["VideoSphericalMetadataUtil"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("VideoSphericalMetadataUtil").parseXMLToDocument(a);if(!a)return!1;a=a.getElementsByTagNameNS("*","Spherical");if(a.length===0)return!1;a=a[0];a=a.childNodes[0].nodeValue;return a.toLowerCase()==="true"}e.exports=a}),null);
__d("getVideo64BitAtomLength",["Int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){var f=a.getUint32(c+e+d);a=a.getUint32(c+d+e+e);return new(b("Int64"))(a,f).toNumber()}e.exports=a}),null);
__d("VideoUploadMetadataParser",["regeneratorRuntime","Promise","Bootloader","ISOVideoBoxConstants","VideoSphericalMetadataUtil","VideoUploadFeatureDetector","VideoUploadSphericalLogger","checkForSphericalTag","fileSlice","getVideo64BitAtomLength","gkx","nullthrows","promiseDone"],(function(a,b,c,d,e,f){var g=4,h=4,i=5242880,j=24,k=88,l=20,m=16,n=4,o=84,p=20,q=62,r=4,s=12,t=12,u=16,v=16,w={0:36,1:52,2:72},x=1,y=1,z=4,A=1,B=1,C=4,D=4,E=1e3,F=16,G=32,H=34;c=function(){"use strict";function c(a,c,d){this.$1=a,this.$2=c,this.$3=d,this.$4=b("gkx")("1495127")}var d=c.prototype;d.getHandler=function(){return this.$2};d.parse=function(){if(!b("VideoUploadFeatureDetector").supportsFileReading()){this.$2(null);return null}switch(this.$1.getExtension()){case"mp4":case"mov":case"m4v":case"3gp":case"3g2":b("VideoUploadSphericalLogger").setFileExtension(this.$1.getExtension());break;case"mkv":if(b("gkx")("816873")){b("VideoUploadSphericalLogger").setFileExtension(this.$1.getExtension());break}default:this.$2(null);return null}return this.$5()};d.$5=function(){var a=this,c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=this.$6();d=this.$7();return e.abrupt("return",new(b("Promise"))(function(e,f){try{b("promiseDone")(b("Promise").all([c,d]).then(function(b){var c=b[0];if(c.completed){b=b[1];c.videoPlayerData=b;a.$2(c)}e(c)},function(b){a.$2(null),f(b)}))}catch(b){a.$2(null),f(b)}}));case 3:case"end":return e.stop()}},null,this)};d.$6=function(){var a=this,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.t0=this.$1.getExtension();d.next=d.t0==="mp4"?3:d.t0==="mov"?3:d.t0==="m4v"?3:d.t0==="3gp"?3:d.t0==="3g2"?3:d.t0==="mkv"?5:8;break;case 3:c=this.$8(0,Math.min(i,this.$1.getSize()||0),null);return d.abrupt("break",9);case 5:d.next=7;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(d,e){b("Bootloader").loadModules(["VideoUploadMetadataMKVParser"],function(a){a=new a(this.$1);c=a.parse();d()}.bind(a),"VideoUploadMetadataParser")}));case 7:return d.abrupt("break",9);case 8:throw new Error("Unrecognized file extension in _parseImpl");case 9:return d.abrupt("return",b("nullthrows")(c));case 10:case"end":return d.stop()}},null,this)};d.$8=function(a,c,d){var e=this,f=new FileReader(),g=new(b("Promise"))(function(g,h){f.onload=function(j){var k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:m.prev=0;if(f.result instanceof ArrayBuffer){m.next=3;break}throw new Error("reader.result is something other than ArrayBuffer");case 3:k=e.$9(new DataView(f.result),0,c-a,a,d);if(!k.completed){m.next=10;break}j=e.$10(k);j.completed=!0;g(j);m.next=14;break;case 10:m.next=12;return b("regeneratorRuntime").awrap(e.$8(a+k.nextOffset,Math.min(e.$1.getSize()||0,a+k.nextOffset+i),k));case 12:l=m.sent,g(l);case 14:m.next=19;break;case 16:m.prev=16,m.t0=m["catch"](0),h(m.t0);case 19:case"end":return m.stop()}},null,this,[[0,16]])};var j=e.$1.getFile();f.readAsArrayBuffer(b("fileSlice").call(j,a,c))});return g};d.$7=function(){if(!this.$3||!a.URL||!a.URL.createObjectURL)return null;var c=this.$1.getFile(),d=document.createElement("video"),e=new(b("Promise"))(function(a,b){var c=window.setTimeout(function(){window.clearTimeout(c),b("Video onloadedmetadata timed out")},E)}),f=new(b("Promise"))(function(b,e){d.onloadedmetadata=function(){try{var a={width:d.videoWidth,height:d.videoHeight};b(a)}catch(a){e(a)}};try{d.src=a.URL.createObjectURL(c)}catch(a){e(a)}});return b("Promise").race([f,e])};d.$11=function(a,b,c){var d=[];for(var e=0;e<c;e++)d.push(String.fromCharCode(a.getUint8(b+e)));return d.join("")};d.$12=function(a,b,c){var d={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_map:[]},e=0;d.version=a.getUint8(b+e);e=x;d.ambisonic_type=a.getUint8(b+e);e+=y;d.ambisonic_order=a.getUint32(b+e);e+=z;d.ambisonic_channel_ordering=a.getUint8(b+e);e+=A;d.ambisonic_normalization=a.getUint8(b+e);e+=B;d.num_channels=a.getUint32(b+e);e+=C;for(var f=0;f<d.num_channels;f++){d.channel_map.push(a.getUint32(b+e));e+=D;if(e>c)return null}return JSON.stringify(d)};d.$13=function(a,c,d,e){try{var f=h+g,i=b("ISOVideoBoxConstants").GSPHERICAL_UUID.length;if(f+i<d){var j=[];for(var k=0;k<i;k++)j.push(a.getUint8(c+f+k));k=b("VideoSphericalMetadataUtil").uuidArrayEquals(j,b("ISOVideoBoxConstants").GSPHERICAL_UUID);j=b("VideoSphericalMetadataUtil").uuidArrayEquals(j,b("ISOVideoBoxConstants").FBSPHERICAL_UUID);f+=i;if(k||j){i=this.$11(a,c+f,d-f);b("checkForSphericalTag")(i)&&(e.sphericalMetadata.spherical=!0,j?e.sphericalMetadata.FBSphericalMetadataXML=i:e.sphericalMetadata.sphericalMetadataXml=i)}}}catch(a){}};d.$9=function(a,c,d,e,f){f=f||{widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:!1,sphericalMetadata:{sphericalMetadataXml:null,FBSphericalMetadataXML:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:!1,endOfMediaInformationAtomOffset:null,streamSampleCounts:[],samples:[]};var i=null;while(c<d){var x=a.getUint32(c),y=this.$11(a,c+g,h);x===1&&(x=b("getVideo64BitAtomLength")(a,c,h,g));if(c+x>d){f.completed=!1;f.nextOffset=c;x>d&&(f.nextOffset+=x);return f}f.isParsingInMediaInformationAtom&&c>=Number(f.endOfMediaInformationAtomOffset)&&(f.isParsingInMediaInformationAtom=!1,f.endOfMediaInformationAtomOffset=null);if(c+e===0&&y!=="ftyp")throw new Error("No ftyp atom");if(x===0)throw new Error("len is 0");var z=function(){var b=a.getUint32(c+l),d=a.getUint32(c+j);return d/b};switch(y){case"moov":case"trak":case"mdia":case"stbl":c+=g+h;break;case"mvhd":f.duration=z();c+=x;break;case"tkhd":y=a.getUint16(c+o);var A=a.getUint16(c+k);f.widths.push(y);f.heights.push(A);f.samples.push({descriptions:[]});i=a.getUint32(c+p);c+=x;break;case"hdlr":if(!f.isParsingInMediaInformationAtom){y=this.$11(a,c+m,n);switch(y){case"vide":y="video";break;case"soun":y="audio";break;case"subt":y="subtitle";break;default:y="data"}f.streamTypes.push(y)}c+=x;break;case"mdhd":f.streamDurations.push(z());c+=x;break;case"uuid":this.$13(a,c,x,f);c+=x;break;case"meta":A=t+s+r;y=this.$11(a,c+A,4);if(y!=="face"){c+=x;break}z=g+h+q;A=this.$11(a,c+z,x-z);A!==null&&((f.sphericalMetadata.fbSpatialAudioMetadataXml===null||f.sphericalMetadata.fbSpatialAudioMetadataXml===void 0)&&(f.sphericalMetadata.fbSpatialAudioMetadataXml="<fb360_spatial_audio>"),i?f.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <track id="'+i.toString()+'">\n                  '+A+"\n                </track>\n              ":f.sphericalMetadata.fbSpatialAudioMetadataXml+="\n                <spatial_audio_formatting>\n                  "+A+"\n                </spatial_audio_formatting>\n              ");c+=x;break;case"minf":y=this.$11(a,c+2*g+h,h);y==="smhd"||y==="vmhd"?(c+=g+h,f.isParsingInMediaInformationAtom=!0,f.endOfMediaInformationAtomOffset=c+x):(f.streamSampleCounts.push(null),c+=x);break;case"stsd":c+=u;break;case"avc1":if(this.$4&&f.samples.length>0){z=f.samples[f.samples.length-1];z.descriptions.push({width:a.getUint16(c+G),height:a.getUint16(c+H)})}c+=x;break;case"mp4a":case"sowt":case"raw ":case"twos":case"fl32":case"fl64":case"in24":case"in32":case"ulaw":case"alaw":case"lpcm":case"Opus":A=a.getUint16(c+v).toString();Object.prototype.hasOwnProperty.call(w,A)?c+=w[A]:c+=x;break;case"SA3D":y=this.$12(a,c+g+h,x);y!==null&&(f.sphericalMetadata.ytSa3dMetadataJson===null&&(f.sphericalMetadata.ytSa3dMetadataJson=y));c+=x;break;case"stsz":case"stz2":f.streamSampleCounts.push(a.getUint32(c+F));c+=x;break;default:c+=x}}f.completed=!0;f.sphericalMetadata.fbSpatialAudioMetadataXml&&(f.sphericalMetadata.fbSpatialAudioMetadataXml+="</fb360_spatial_audio>");return f};d.$10=function(a){var c={streams:{numAudioTracks:0},format:{},metadata:{}},d=a.widths.length,e=a.heights.length,f=a.streamTypes.length,g=a.streamDurations.length,h=a.streamSampleCounts.length,i=a.samples.length;if(d!==e||d!==f||d!==g||d!==h||d!==i)throw new Error("Number of parsed widths, heights, durations or sample counts for video file are mismatched.");for(var e=0;e<d;e++){var j={width:a.widths[e],height:a.heights[e],duration:a.streamDurations[e],type:a.streamTypes[e],sampleCount:a.streamSampleCounts[e]};if(j.type==="video"){this.$4&&a.samples[e].descriptions.forEach(function(a){a.width>j.width&&a.height>j.height&&(j.width=a.width,j.height=a.height)});f=j.width*j.height;g=c.streams.primaryVideo;(!g||g.width*g.height>f)&&(c.streams.primaryVideo=j)}else if(j.type==="audio"){h=c.streams.primaryAudio;(!h||h.duration<j.duration)&&(c.streams.primaryAudio=j);c.streams.numAudioTracks++}}c.format.duration=a.duration;c.format.isSpherical=a.sphericalMetadata.spherical;a.sphericalMetadata.spherical&&(c.metadata.sphericalMetadataXml=a.sphericalMetadata.sphericalMetadataXml,c.metadata.FBSphericalMetadataXML=a.sphericalMetadata.FBSphericalMetadataXML,c.metadata.fbSpatialAudioMetadataXml=a.sphericalMetadata.fbSpatialAudioMetadataXml,c.metadata.ytSa3dMetadataJson=a.sphericalMetadata.ytSa3dMetadataJson);b("VideoUploadSphericalLogger").setHasSphericalMetadata(a.sphericalMetadata.spherical);return c};return c}();e.exports=c}),null);
__d("VideoUploadSession",["requireCond","cr:909282","AsyncRequest","SubscriptionsHandler","VideoUploadCrashMonitor","VideoUploadFeatureDetector","VideoUploadFileValidator","VideoUploadLogger","VideoUploadMetadataParser","VideoUploadPostRequestManager","VideoUploadReceiveRequestManager","VideoUploadRequestContext","cr:1536876","VideoUploadStartRequestManager","WaterfallIDGenerator","getByPath","mixin"],(function(a,b,c,d,e,f){var g={CANCELED:"canceled",ABANDONED:"abandoned",SHUTDOWN:"shutdown"};a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$VideoUploadSession1=c.source;d.$VideoUploadSession2=c.composer_dialog_version;d.$VideoUploadSession3=c.target_id;d.$VideoUploadSession4=c.logging_delay;d.$VideoUploadSession5=c.silent_file_validation;d.$VideoUploadSession6=c.background_upload;d.$VideoUploadSession7=c.actor_id;d.$VideoUploadSession8=c.composer_entry_point_ref;d.$VideoUploadSession9=c.composer_work_shared_draft_mode;d.$VideoUploadSession10=c.video_publisher_action_source;d.$VideoUploadSession11=c.monitor_crashes;d.$VideoUploadSession12=c.isMultiMediaPost;d.$VideoUploadSession13=c.container_type;d.$VideoUploadSession14=c.number_of_partitions;d.$VideoUploadSession15=c.multi_partitioning_enabled;d.$VideoUploadSession16=c.change_default_chunk_size;d.$VideoUploadSession17=c.has_file_been_replaced?c.has_file_been_replaced:!1;d.$VideoUploadSession16&&(d.$VideoUploadSession18=c.client_chunk_size);d.$VideoUploadSession19=c.early_receive;d.$VideoUploadSession20=!1;d.$VideoUploadSession21=c.accept_dimensions_from_player;d.$VideoUploadSession22=c.ad_account_id;d.$VideoUploadSession23=c.waterfall_id;d.$VideoUploadSession24=new(b("VideoUploadFileValidator"))({minSize:c.min_size,maxSize:c.max_size,minLength:c.min_length,maxLength:c.max_length,minWidth:c.min_width,minHeight:c.min_height,extensions:c.extensions,source:c.source,require16to9AspectRatio:c.require_16to9_aspect_ratio,minAspectRatio:c.min_aspect_ratio,maxAspectRatio:c.max_aspect_ratio,acceptDimensionsFromPlayer:c.accept_dimensions_from_player});d.$VideoUploadSession25=b("VideoUploadFeatureDetector").supportsChunking();d.$VideoUploadSession26=b("VideoUploadFeatureDetector").supportsFileAPI();d.$VideoUploadSession25?(d.$VideoUploadSession27=c.parallel_chunk_uploads,d.$VideoUploadSession27&&(d.$VideoUploadSession28=c.parallel_chunk_upload_filesize,d.$VideoUploadSession29=c.default_chunk_size)):d.$VideoUploadSession27=!1;d.$VideoUploadSession30=c.shutdown_logging_enabled;d.$VideoUploadSession31=d.$VideoUploadSession32(c);d.$VideoUploadSession33=d.$VideoUploadSession34(c);if(d.$VideoUploadSession27)if(d.$VideoUploadSession15){var e=0;d.$VideoUploadSession35=[];for(e=0;e<d.$VideoUploadSession14-1;e++)d.$VideoUploadSession35[e]=d.$VideoUploadSession34(c)}else d.$VideoUploadSession35=d.$VideoUploadSession34(c);d.$VideoUploadSession36=d.$VideoUploadSession37(c);d.$VideoUploadSession38=c.log_free_local_storage;d.$VideoUploadSession39=null;return d}var d=c.prototype;d.$VideoUploadSession40=function(){this.$VideoUploadSession41=[];this.$VideoUploadSession42=[];this.$VideoUploadSession43=[];this.$VideoUploadSession44=[];this.$VideoUploadSession45=[];var a=0;for(a=0;a<this.$VideoUploadSession46-1;a++)this.$VideoUploadSession41.push(!1)};d.$VideoUploadSession47=function(){var a;this.$VideoUploadSession23==null&&(this.$VideoUploadSession23=b("WaterfallIDGenerator").generate());this.$VideoUploadSession48=new(b("VideoUploadLogger"))({actor_id:this.$VideoUploadSession7,ad_account_id:this.$VideoUploadSession22,source:this.$VideoUploadSession1,composer_dialog_version:this.$VideoUploadSession2,waterfall_id:this.$VideoUploadSession23,target_id:this.$VideoUploadSession3,delay:this.$VideoUploadSession4,is_chunked_upload:this.$VideoUploadSession25,composer_entry_point_ref:this.$VideoUploadSession8,composer_work_shared_draft_mode:this.$VideoUploadSession9,container_type:this.$VideoUploadSession13,has_file_been_replaced:this.$VideoUploadSession17,composer_session_id:this.$VideoUploadSession49,asset_id:(a=this.$VideoUploadSession50)==null?void 0:a.getStableAssetID()});this.inform("set-waterfall-id",{waterfallID:this.$VideoUploadSession23})};d.createTestLogger=function(){this.$VideoUploadSession47()};d.$VideoUploadSession51=function(){this.$VideoUploadSession48||this.$VideoUploadSession47();return this.$VideoUploadSession48};d.getLogger=function(){return!this.$VideoUploadSession48?null:this.$VideoUploadSession48};d.$VideoUploadSession52=function(){var a,c=this;a=b("cr:1536876")==null?void 0:(a=b("cr:1536876").VideoUploadRetries)==null?void 0:a.createState();a!=null&&(a.addListener("retry-attempted",function(a){var d=a.delay_retry_count,e=a.total_retry_count,f=a.since_started_ms,g=a.retry_context;a=a.backoff_ms;c.__logEvent(b("VideoUploadLogger").EVENT_RETRY_ATTEMPT,{retries:e,elapsed_time:f,error_trace:g==null?void 0:g.location,error_code:g==null?void 0:g.error_code,debug:{delay_retry_count:d,backoff_ms:a}})}),a.addListener("retries-abandoned",function(a){var d=a.delay_retry_count,e=a.total_retry_count,f=a.since_started_ms,g=a.retry_context;a=a.abandon_reason;c.__logEvent(b("VideoUploadLogger").EVENT_RETRY_ATTEMPT,{retries:e,elapsed_time:f,error:a,error_trace:g==null?void 0:g.location,error_code:g==null?void 0:g.error_code,debug:{delay_retry_count:d}})}));return a};d.start=function(a){var c=this;this.$VideoUploadSession53=null;this.$VideoUploadSession54=null;this.$VideoUploadSession55=null;this.$VideoUploadSession56=!1;this.$VideoUploadSession57=!1;this.$VideoUploadSession58=null;this.$VideoUploadSession50=a;this.$VideoUploadSession59=0;this.$VideoUploadSession60=!1;this.$VideoUploadSession61={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null};this.$VideoUploadSession62=!1;this.$VideoUploadSession39=this.$VideoUploadSession52();this.$VideoUploadSession47();this.$VideoUploadSession15&&(this.$VideoUploadSession46=Math.min(this.$VideoUploadSession14,Math.ceil(this.$VideoUploadSession50.getSize()/this.$VideoUploadSession28)));this.__logEvent(b("VideoUploadLogger").EVENT_REQUESTED_UPLOADING);this.inform("upload-requested");a=new(b("VideoUploadMetadataParser"))(this.$VideoUploadSession50,this.$VideoUploadSession63.bind(this),this.$VideoUploadSession21);a.parse();this.$VideoUploadSession38&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota(function(a,d){c.__logEvent(b("VideoUploadLogger").EVENT_MEASURE_FREE_LOCAL_STORAGE,{free_space_in_device:d})})};d.setTargetID=function(a){this.$VideoUploadSession3=a};d.setComposerSessionID=function(a){this.$VideoUploadSession49=a};d.post=function(a){this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_POST_REQUEST,this.$VideoUploadSession64);this.inform("post-started",a);var c=this.__createPostRequestContext(a);this.$VideoUploadSession36.sendRequest(c);this.$VideoUploadSession65=a};d.__createPostRequestContext=function(a){var c=new(b("VideoUploadRequestContext"))();this.__setupPostRequestContext(c,a);return c};d.__setupPostRequestContext=function(a,b){a.setMetadata(b).setVideoID(this.$VideoUploadSession53).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setComposerWorkSharedDraftMode(this.$VideoUploadSession9).setWaterfallID(this.$VideoUploadSession23).setComposerSessionID(this.$VideoUploadSession49).setSupportsChunking(this.$VideoUploadSession25).setCreatorProduct(this.$VideoUploadSession50.getCreatorProduct()).setFile(this.$VideoUploadSession50).setHasFileBeenReplaced(this.$VideoUploadSession17),b&&(b.spherical&&(this.$VideoUploadSession60=!0,a.setIsSphericalVideo(this.$VideoUploadSession60)),b.enable_omnistab&&(this.$VideoUploadSession62=!0,a.setEnableOmnistab(this.$VideoUploadSession62))),a.setComposerEntryPointRef&&a.setComposerEntryPointRef(this.$VideoUploadSession8)};d.$VideoUploadSession66=function(a,d){if(this.$VideoUploadSession56){var e={event_reason:d,debug:babelHelpers["extends"]({},this.__fetchReceiveRequestManagerStateLogData(),{is_background_upload:this.$VideoUploadSession6})};d=d===g.CANCELED?b("VideoUploadLogger").EVENT_CANCELED_UPLOADING:b("VideoUploadLogger").EVENT_ABANDONED_UPLOADING;this.$VideoUploadSession67();this.$VideoUploadSession6?(this.$VideoUploadSession57||this.__logEvent(d),this.$VideoUploadSession68&&(this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,e),this.$VideoUploadSession68=!1)):(this.__logEvent(d),this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,e));this.inform("upload-canceled")}else a&&this.$VideoUploadSession53&&c.deleteVideo(this.$VideoUploadSession53)};d.cancel=function(a){a===void 0&&(a=!1),this.$VideoUploadSession66(a,g.CANCELED)};d.abandon=function(a){a===void 0&&(a=!1),this.$VideoUploadSession66(a,g.ABANDONED)};d.isPostInProgress=function(){return this.$VideoUploadSession36.isInProgress()};d.isInProgress=function(){return this.$VideoUploadSession56};d.getHasUploadFinished=function(){return this.$VideoUploadSession57};d.getVideoID=function(){return this.$VideoUploadSession53};d.getUploadTime=function(){return this.$VideoUploadSession69};d.getExPartitionNumber=function(a){var b;for(b=0;b<this.$VideoUploadSession46-1;b++)if(a>=this.$VideoUploadSession42[b]&&a<this.$VideoUploadSession43[b])break;return b===this.$VideoUploadSession46?-1:b};d.getIsSphericalVideo=function(){return this.$VideoUploadSession60||!1};d.startFlow=function(){if(!this.$VideoUploadSession6||this.$VideoUploadSession68)return;this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.getIsSphericalVideo()?"true":null});this.$VideoUploadSession68=!0;this.$VideoUploadSession70&&this.$VideoUploadSession70.flowStarted()};d.__extractVideoMetadata=function(a){var c;a=(c=b("getByPath"))(a,["streams","primaryVideo"]);c={source_height:c(a,["height"]),source_width:c(a,["width"]),duration:c(a,["duration"])*1e3};c.original_video_duration=c.duration;return c};d.$VideoUploadSession63=function(a){var c;if(this.$VideoUploadSession5){var d=this.$VideoUploadSession24.getValidationErrorMessage(this.$VideoUploadSession50,a);d?(c={error_summary:d.summary,error_description:d.description},d=!1):d=!0}else d=this.$VideoUploadSession24.validate(this.$VideoUploadSession50,a);if(!d){this.__logEvent(b("VideoUploadLogger").EVENT_INVALIDATED_UPLOADING);this.inform("upload-failed",c);return}this.$VideoUploadSession64=this.__extractVideoMetadata(a);a&&a.format&&(this.$VideoUploadSession60=a.format.isSpherical,a.metadata&&(this.$VideoUploadSession61.sphericalMetadataXml=a.metadata.sphericalMetadataXml,this.$VideoUploadSession61.fbSpatialAudioMetadataXml=a.metadata.fbSpatialAudioMetadataXml,this.$VideoUploadSession61.ytSa3dMetadataJson=a.metadata.ytSa3dMetadataJson));this.$VideoUploadSession6||this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.getIsSphericalVideo()?"true":null});this.$VideoUploadSession71=this.$VideoUploadSession27&&this.$VideoUploadSession50.getSize()>=this.$VideoUploadSession28;this.$VideoUploadSession72=!1;this.$VideoUploadSession73=0;this.$VideoUploadSession74=this.$VideoUploadSession73;this.$VideoUploadSession75=0;this.$VideoUploadSession15?this.$VideoUploadSession40():this.$VideoUploadSession41=!1;if(this.$VideoUploadSession71)if(this.$VideoUploadSession15){d=0;this.$VideoUploadSession76=Math.ceil(this.$VideoUploadSession50.getSize()/this.$VideoUploadSession46);var e=this.$VideoUploadSession76,f=this.$VideoUploadSession76;for(d=0;d<this.$VideoUploadSession46-1;d++)this.$VideoUploadSession42[d]=e,e=Math.min(this.$VideoUploadSession42[d]+f,this.$VideoUploadSession50.getSize()),this.$VideoUploadSession43[d]=e,this.$VideoUploadSession44[d]=this.$VideoUploadSession42[d],this.$VideoUploadSession45[d]=0}else this.$VideoUploadSession76=Math.floor(this.$VideoUploadSession50.getSize()/2),this.$VideoUploadSession42=this.$VideoUploadSession76,this.$VideoUploadSession44=this.$VideoUploadSession42,this.$VideoUploadSession45=0,this.$VideoUploadSession43=this.$VideoUploadSession50.getSize();else this.$VideoUploadSession76=this.$VideoUploadSession50.getSize();d=new(b("VideoUploadRequestContext"))().setFile(this.$VideoUploadSession50).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setComposerWorkSharedDraftMode(this.$VideoUploadSession9).setWaterfallID(this.$VideoUploadSession23).setComposerSessionID(this.$VideoUploadSession49).setHasFileBeenReplaced(this.$VideoUploadSession17).setSupportsChunking(this.$VideoUploadSession25).setSupportsFileAPI(this.$VideoUploadSession26).setCreatorProduct(this.$VideoUploadSession50.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession73).setPartitionEndOffset(this.$VideoUploadSession76).setRetryState(this.$VideoUploadSession39);this.$VideoUploadSession27&&d.setUseParallelChunks(this.$VideoUploadSession27);this.$VideoUploadSession60&&(d.setIsSphericalVideo(this.$VideoUploadSession60),d.setSphericalMetadata(this.$VideoUploadSession61));d.setComposerEntryPointRef&&d.setComposerEntryPointRef(this.$VideoUploadSession8);d.setVideoPublisherActionSource(this.$VideoUploadSession10);this.$VideoUploadSession77();this.$VideoUploadSession31.sendRequest(d);this.$VideoUploadSession19&&this.$VideoUploadSession16&&this.$VideoUploadSession33.isResumabilityEnabled()&&!this.$VideoUploadSession33.isResumableServiceProxyReceiveEnabled()&&this.$VideoUploadSession78();this.inform("metadata-parsed",a)};d.$VideoUploadSession32=function(a){var b=this.$VideoUploadSession25?a.chunk_start_uri:a.start_uri;b=this.__getVideoUploadStartRequestManager(b,a.start_max_transport_retries,a.start_transport_retry_interval_base,a.start_max_transport_retry_timeout,a.skip_upload_enabled,a.skip_upload_file_size_limit,a.start_max_server_retries,a.start_server_retry_interval_base);b.subscribe("request-started",this.$VideoUploadSession79.bind(this));b.subscribe("request-finished",this.$VideoUploadSession80.bind(this));b.subscribe("request-failed",this.$VideoUploadSession81.bind(this));b.subscribe("request-canceled",this.$VideoUploadSession82.bind(this));return b};d.$VideoUploadSession34=function(a){var b=this.$VideoUploadSession25?a.chunk_receive_uri:a.receive_uri;b=this.__getVideoUploadReceiveRequestManager(b,a);b.subscribe("request-started",this.$VideoUploadSession83.bind(this));b.subscribe("request-progressed",this.$VideoUploadSession84.bind(this));b.subscribe("request-finished",this.$VideoUploadSession85.bind(this));b.subscribe("request-failed",this.$VideoUploadSession86.bind(this));b.subscribe("request-canceled",this.$VideoUploadSession87.bind(this));b.subscribe("request-timeout",this.$VideoUploadSession88.bind(this));b.subscribe("online",this.$VideoUploadSession89.bind(this));b.subscribe("offline",this.$VideoUploadSession90.bind(this));b.subscribe("resumable-called",this.$VideoUploadSession91.bind(this));b.subscribe("resumable-started",this.$VideoUploadSession92.bind(this));b.subscribe("resumable-success",this.$VideoUploadSession93.bind(this));b.subscribe("resumable-failed",this.$VideoUploadSession94.bind(this));return b};d.$VideoUploadSession37=function(a){var b=this.$VideoUploadSession25?a.chunk_post_uri:a.post_uri;b=this.__getVideoUploadPostRequestManager(b,a);b.subscribe("request-finished",this.__handlePostRequestFinished.bind(this));b.subscribe("request-failed",this.$VideoUploadSession95.bind(this));return b};d.$VideoUploadSession79=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_UPLOADING,babelHelpers["extends"]({hash_time:c.hash_time,hash_exception:c.hash_exception},this.$VideoUploadSession64)),this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_START_REQUEST,this.$VideoUploadSession64),this.$VideoUploadSession96=Date.now(),this.inform("upload-started")};d.$VideoUploadSession78=function(a){if(!this.$VideoUploadSession20){this.$VideoUploadSession20=!0;a||(a={video_id:null});var b;b=this.__createReceiveRequestContext(a,!1);this.$VideoUploadSession33.sendRequest(b);if(this.$VideoUploadSession71)if(this.$VideoUploadSession15){var c=0;for(c=0;c<this.$VideoUploadSession46-1;c++)b=this.__createReceiveRequestContext(a,!0,c),this.$VideoUploadSession35[c].sendRequest(b)}else b=this.__createReceiveRequestContext(a,!0),this.$VideoUploadSession35.sendRequest(b)}else this.$VideoUploadSession97()};d.$VideoUploadSession97=function(){this.$VideoUploadSession33.updateVideoID(this.$VideoUploadSession53);if(this.$VideoUploadSession71)if(this.$VideoUploadSession15){var a=0;for(a=0;a<this.$VideoUploadSession46-1;a++)this.$VideoUploadSession35[a].updateVideoID(this.$VideoUploadSession53)}else this.$VideoUploadSession35.updateVideoID(this.$VideoUploadSession53)};d.$VideoUploadSession98=function(a){if(this.$VideoUploadSession39==null)return((a==null?void 0:a.transport_retries)||0)+((a==null?void 0:a.server_retries)||0)+((a==null?void 0:a.timeout_retries)||0);else return this.$VideoUploadSession39.getTotalRetryCount()};d.$VideoUploadSession80=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_PROGRESS_UPLOADING_START_REQUEST,{retries:this.$VideoUploadSession98(c),transport_retries:c.transport_retries,hash_time:c.hash_time,skip_upload:c.skip_upload?1:null}),this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_START_REQUEST,babelHelpers["extends"]({video_id:c.video_id},this.$VideoUploadSession64)),this.$VideoUploadSession53=c.video_id,this.$VideoUploadSession54=c.upload_session_id,this.$VideoUploadSession55=c.fb_region,this.$VideoUploadSession99=c.skip_upload,!c.skip_upload?this.$VideoUploadSession78(c):(this.$VideoUploadSession100(),this.inform("upload-progressed",{start_offset:0,end_offset:this.$VideoUploadSession50.getSize(),file_size:this.$VideoUploadSession50.getSize(),sent_bytes:this.$VideoUploadSession50.getSize(),video_id:c.video_id,skip_upload:c.skip_upload}),this.$VideoUploadSession6&&this.__logFinishedUploading(),this.inform("upload-finished",{start_offset:0,end_offset:this.$VideoUploadSession50.getSize(),video_id:c.video_id,is_spherical_video:this.$VideoUploadSession60}))};d.__fetchReceiveRequestManagerStateLogData=function(){var a={};this.$VideoUploadSession33!=null&&(this.$VideoUploadSession33.appendStateLogData(a,"requestManager_"),a.request_manager_state=a.requestManager_last_log_state);if(this.$VideoUploadSession15){var b=0;for(b=0;b<this.$VideoUploadSession46-1;b++)this.$VideoUploadSession35[b]!=null&&this.$VideoUploadSession35[b].appendStateLogData(a,"requestManagerEx_"+b.toString())}else this.$VideoUploadSession35!=null&&this.$VideoUploadSession35.appendStateLogData(a,"requestManagerEx_");return a};d.__createReceiveRequestContext=function(a,c,d){c||(c=!1);var e=new(b("VideoUploadRequestContext"))();this.$VideoUploadSession15?this.__setupReceiveRequestContext(e,a,c,d):this.__setupReceiveRequestContext(e,a,c);return e};d.__setupReceiveRequestContext=function(a,b,c,d){var e,f,g;!c?(c=this.$VideoUploadSession73,e=this.$VideoUploadSession76,this.$VideoUploadSession16?(f=this.$VideoUploadSession73,g=this.$VideoUploadSession18?Math.min(this.$VideoUploadSession18,this.$VideoUploadSession76):this.$VideoUploadSession76):(f=b.start_offset,g=b.end_offset)):this.$VideoUploadSession15?(this.$VideoUploadSession16&&(this.$VideoUploadSession29=this.$VideoUploadSession43[d]-this.$VideoUploadSession42[d],this.$VideoUploadSession29=this.$VideoUploadSession18?Math.min(this.$VideoUploadSession18,this.$VideoUploadSession29):this.$VideoUploadSession29),c=this.$VideoUploadSession42[d],e=this.$VideoUploadSession43[d],f=this.$VideoUploadSession42[d],g=this.$VideoUploadSession42[d]+this.$VideoUploadSession29>=this.$VideoUploadSession43[d]?this.$VideoUploadSession43[d]:this.$VideoUploadSession42[d]+this.$VideoUploadSession29):(this.$VideoUploadSession16&&(this.$VideoUploadSession29=this.$VideoUploadSession43-this.$VideoUploadSession42,this.$VideoUploadSession29=this.$VideoUploadSession18?Math.min(this.$VideoUploadSession18,this.$VideoUploadSession29):this.$VideoUploadSession29),c=this.$VideoUploadSession42,e=this.$VideoUploadSession43,f=this.$VideoUploadSession42,g=this.$VideoUploadSession42+this.$VideoUploadSession29>=this.$VideoUploadSession43?this.$VideoUploadSession43:this.$VideoUploadSession42+this.$VideoUploadSession29);a.setFile(this.$VideoUploadSession50).setVideoID(b.video_id).setXPVAssetID(b.xpv_asset_id).setUploadSessionID(b.upload_session_id).setFbRegion(b.fb_region).setStartOffset(f).setEndOffset(g).setPartitionStartOffset(c).setPartitionEndOffset(e).setPartitionNo(d).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setComposerWorkSharedDraftMode(this.$VideoUploadSession9).setWaterfallID(this.$VideoUploadSession23).setComposerSessionID(this.$VideoUploadSession49).setSupportsChunking(this.$VideoUploadSession25).setHasFileBeenReplaced(this.$VideoUploadSession17).setRetryState(this.$VideoUploadSession39);this.$VideoUploadSession27&&a.setUseParallelChunks(this.$VideoUploadSession27);a.setComposerEntryPointRef&&a.setComposerEntryPointRef(this.$VideoUploadSession8);this.$VideoUploadSession18&&a.setClientChunkSize(this.$VideoUploadSession18)};d.$VideoUploadSession81=function(a,c){a=this.__getLogErrorData(c);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_START_REQUEST,a);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);a=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession6?this.$VideoUploadSession68&&(this.__logEvent(a),this.$VideoUploadSession68=!1):this.__logEvent(a);this.$VideoUploadSession100();this.$VideoUploadSession101();this.inform("upload-failed",c)};d.$VideoUploadSession82=function(a){this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_START_REQUEST)};d.$VideoUploadSession83=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_RECEIVE_REQUEST,{debug:c.debug}),!c.start_offset&&!c.transport_retries&&!c.server_retries&&this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession50.getSize(),upload_domain:c.upload_domain,debug:c.debug}),this.$VideoUploadSession25&&this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:c.start_offset,total_bytes:c.end_offset-c.start_offset,retries:this.$VideoUploadSession98(c),transport_retries:c.transport_retries,server_retries:c.server_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state,upload_domain:c.upload_domain,debug:c.debug})};d.$VideoUploadSession84=function(a,b){if(b.start_offset<this.$VideoUploadSession76)this.$VideoUploadSession74=b.start_offset,this.$VideoUploadSession75=b.sent_bytes;else if(this.$VideoUploadSession15){a=this.getExPartitionNumber(b.start_offset);a>-1&&(this.$VideoUploadSession44[a]=b.start_offset,this.$VideoUploadSession45[a]=b.sent_bytes)}else this.$VideoUploadSession44=b.start_offset,this.$VideoUploadSession45=b.sent_bytes;b.start_offset=this.$VideoUploadSession74;b.sent_bytes=this.$VideoUploadSession75;if(this.$VideoUploadSession71)if(this.$VideoUploadSession15)for(a=0;a<this.$VideoUploadSession46-1;a++)b.start_offset+=this.$VideoUploadSession44[a]-this.$VideoUploadSession42[a],b.sent_bytes+=this.$VideoUploadSession45[a];else b.start_offset+=this.$VideoUploadSession44-this.$VideoUploadSession42,b.sent_bytes+=this.$VideoUploadSession45;a=Math.min(b.start_offset+b.sent_bytes,b.file_size);a>this.$VideoUploadSession59&&(this.$VideoUploadSession59=a,this.inform("upload-progressed",b))};d.$VideoUploadSession85=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_RECEIVE_REQUEST,{debug:c.debug});this.$VideoUploadSession25&&this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:c.start_offset,sent_bytes:c.end_offset-c.start_offset,retries:this.$VideoUploadSession98(c),transport_retries:c.transport_retries,server_retries:c.server_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state,upload_domain:c.upload_domain,debug:c.debug});a=!1;if(c.start_offset<this.$VideoUploadSession76)this.$VideoUploadSession72=c.end_offset>=this.$VideoUploadSession76;else if(this.$VideoUploadSession15){var d;d=this.getExPartitionNumber(c.start_offset);if(d===-1){var e={error_summary:"Invalid offset",error_description:"Offset doesn't fall in any exPartition range."};this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING);this.inform("upload-failed",e);return}this.$VideoUploadSession41[d]=c.end_offset>=this.$VideoUploadSession43[d]}else this.$VideoUploadSession41=c.end_offset>=this.$VideoUploadSession43;if(this.$VideoUploadSession15)for(d=0;d<this.$VideoUploadSession46-1;d++)if(this.$VideoUploadSession41[d]===!1){a=!1;break}else a=!0;else a=this.$VideoUploadSession41;(!this.$VideoUploadSession26||this.$VideoUploadSession72&&(!this.$VideoUploadSession71||a))&&(this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession50.getSize(),upload_domain:c.upload_domain,debug:c.debug}),this.$VideoUploadSession69=Date.now()-this.$VideoUploadSession96,this.$VideoUploadSession6&&this.__logFinishedUploading(),c.video_id=this.$VideoUploadSession53,c.is_spherical_video=this.$VideoUploadSession60,this.inform("upload-finished",c),this.$VideoUploadSession12&&(this.$VideoUploadSession6||this.__logFinishedUploading(),this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_FLOW,c),this.$VideoUploadSession68=!1,this.$VideoUploadSession101(),this.inform("multimedia-upload-finished",c)))};d.$VideoUploadSession86=function(a,c){a=this.__getLogErrorData(c);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_RECEIVE_REQUEST,a);this.$VideoUploadSession25&&this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_SENDING_CHUNK_BYTES,a);if(this.$VideoUploadSession56){this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_SENDING_BYTES,a);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);var d=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession6?this.$VideoUploadSession68&&(this.__logEvent(d,a),this.$VideoUploadSession68=!1):this.__logEvent(d,a)}this.$VideoUploadSession101();this.inform("upload-failed",c)};d.$VideoUploadSession87=function(a){this.$VideoUploadSession25?this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_SENDING_CHUNK_BYTES):this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_SENDING_BYTES)};d.$VideoUploadSession88=function(a,c){a={start_offset:c.start_offset,sent_bytes:c.end_offset-c.start_offset,retries:this.$VideoUploadSession98(c),transport_retries:c.transport_retries,server_retries:c.server_retries,timeout_retries:c.timeout_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state,debug:c.debug};this.__logEvent(b("VideoUploadLogger").EVENT_TIMEOUT_SENDING_CHUNK_BYTES,a)};d.$VideoUploadSession89=function(a,b){this.inform("online",b)};d.$VideoUploadSession90=function(a,b){this.inform("offline",b)};d.$VideoUploadSession91=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_CALLED,c)};d.$VideoUploadSession92=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_STARTED,c)};d.$VideoUploadSession93=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_SUCCESS,c)};d.$VideoUploadSession94=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_FAILED,c)};d.__handlePostRequestFinished=function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_POST_REQUEST,babelHelpers["extends"]({video_id:this.$VideoUploadSession53},this.$VideoUploadSession64));c.video_id||(c.video_id=this.$VideoUploadSession53);this.$VideoUploadSession6||this.__logFinishedUploading();this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_FLOW);this.$VideoUploadSession68=!1;this.$VideoUploadSession101();a=babelHelpers["extends"]({},c,this.$VideoUploadSession65);this.inform("post-finished",a)};d.__logFinishedUploading=function(){this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_UPLOADING,babelHelpers["extends"]({elapsed_time:this.$VideoUploadSession69,skip_upload:this.$VideoUploadSession99?1:null,video_id:this.$VideoUploadSession53},this.$VideoUploadSession64)),this.$VideoUploadSession57=!0};d.$VideoUploadSession95=function(a,c){a=this.__getLogErrorData(c);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_POST_REQUEST,a);if(this.$VideoUploadSession56){this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);var d=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.__logEvent(d,a)}this.$VideoUploadSession101();this.inform("post-failed",c)};d.$VideoUploadSession100=function(){this.$VideoUploadSession33.cancelRequest();if(this.$VideoUploadSession71)if(this.$VideoUploadSession15){var a=0;for(a=0;a<this.$VideoUploadSession46-1;a++)this.$VideoUploadSession35[a].cancelRequest()}else this.$VideoUploadSession35.cancelRequest();this.$VideoUploadSession20=!1};d.$VideoUploadSession67=function(){this.$VideoUploadSession31.cancelRequest(),this.$VideoUploadSession100(),this.$VideoUploadSession101(),this.$VideoUploadSession53&&(c.deleteVideo(this.$VideoUploadSession53),this.$VideoUploadSession53=null,this.$VideoUploadSession54=null,this.$VideoUploadSession55=null)};d.$VideoUploadSession77=function(){var a=this;this.$VideoUploadSession56=!0;this.$VideoUploadSession30&&(this.$VideoUploadSession58=new(b("SubscriptionsHandler"))(),this.$VideoUploadSession58.addSubscriptions(this.$VideoUploadSession51().postOnShutdown(function(){if(a.$VideoUploadSession56){var c={event_reason:g.SHUTDOWN,debug:babelHelpers["extends"]({},a.__fetchReceiveRequestManagerStateLogData(),{is_background_upload:a.$VideoUploadSession6})};a.$VideoUploadSession6?a.$VideoUploadSession68&&a.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,c):a.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,c)}})));this.$VideoUploadSession11&&(this.$VideoUploadSession70=new(b("VideoUploadCrashMonitor"))(this.$VideoUploadSession23,this.$VideoUploadSession7,this.$VideoUploadSession1,this.$VideoUploadSession3,this.$VideoUploadSession4,this.$VideoUploadSession25,this.$VideoUploadSession8,!this.$VideoUploadSession6||this.$VideoUploadSession68),this.$VideoUploadSession70.startSession())};d.$VideoUploadSession101=function(){this.$VideoUploadSession56=!1,this.$VideoUploadSession58&&(this.$VideoUploadSession58.release(),this.$VideoUploadSession58=null),this.$VideoUploadSession70&&(this.$VideoUploadSession70.endSession(),this.$VideoUploadSession70=null)};d.__getLogErrorData=function(a){return{error:a.error_summary,error_code:a.error_code,error_description:a.error_description,retries:this.$VideoUploadSession98(a),transport_retries:a.transport_retries,server_retries:a.server_retries,request_manager_state:a.request_manager_state,debug:a.debug}};d.__logEvent=function(a,b){b=b||{},this.$VideoUploadSession50&&(b.file_size=this.$VideoUploadSession50.getSize(),b.file_extension=this.$VideoUploadSession50.getExtension(),b.sent_bytes=this.$VideoUploadSession59),this.$VideoUploadSession51().logEvent(a,b)};d.__getVideoUploadStartRequestManager=function(a,c,d,e,f,g,h,i){return new(b("VideoUploadStartRequestManager"))(a,c,d,e,f,g,h,i)};d.__getVideoUploadReceiveRequestManager=function(a,c){return new(b("VideoUploadReceiveRequestManager"))(a,c.max_transport_retries,c.max_transport_retry_timeout,c.max_server_retries,c.response_timeout_enabled,c.max_response_timeout_retries,c.response_timeout_speed_variation_factor_ppt,c.transport_retry_interval_base,c.server_retry_interval_base,c.receive_errors_force_retry,c.access_token,c.resumability_enabled,c.resumability_async_enabled,c.resumable_service_name,c.resumable_service_domain,c.datr,c.resumability_min_file_size,c.resumable_service_proxy_receive,c.resumable_service_send_media_info,c.resumable_service_send_file_size,c.resumable_reset_transport_retries_on_progress,c.add_flow_capture_header,c.traffic_tracing_enabled,c.traffic_tracing_min_file_size)};d.__getVideoUploadPostRequestManager=function(a,c){return new(b("VideoUploadPostRequestManager"))(a,c.post_max_transport_retries,c.post_transport_retry_interval_base,c.post_max_server_retries,c.post_server_retry_interval_base)};c.deleteVideo=function(a){a=new(b("AsyncRequest"))("/ajax/video/actions/delete").setData({fbid:a,redirect:!1});a.setErrorHandler(function(){});a.send()};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("VideoUploader",["requireCond","cr:909282","VideoUploadCrashMonitor","VideoUploadSession","mixin"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$VideoUploader1=c;d.$VideoUploader2=null;d.$VideoUploader3=null;d.$VideoUploader4=c.waterfall_id==null?null:c.waterfall_id;d.$VideoUploader5=d.$VideoUploader1.ad_account_id;c.monitor_crashes&&(d.$VideoUploader6=new(b("VideoUploadCrashMonitor"))(),d.$VideoUploader6.logKnownCrashes());return d}var d=c.prototype;d.setComposerSessionID=function(a){this.$VideoUploader7=a,this.$VideoUploader2&&this.$VideoUploader2.setComposerSessionID(a)};d.getLogger=function(){if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger()};d.upload=function(a){var b=this;if(this.$VideoUploader2)return;var c=this.__getVideoUploadSession(this.$VideoUploader1);c.setComposerSessionID(this.$VideoUploader7);c.subscribe(this.__getEventsWhichShouldListenFromSession(),function(a,c){return b.$VideoUploader8(a,c)});this.$VideoUploader2=c;c.start(a)};d.__getVideoUploadSession=function(a){return new(b("VideoUploadSession"))(a)};d.__getEventsWhichShouldListenFromSession=function(){return["upload-requested","upload-started","upload-progressed","upload-finished","upload-failed","upload-canceled","post-started","post-finished","post-failed","online","offline","metadata-parsed","set-waterfall-id"]};d.postUserRequest=function(){if(!this.$VideoUploader2)return;this.$VideoUploader2.startFlow&&this.$VideoUploader2.startFlow()};d.setTargetID=function(a){if(this.$VideoUploader2==null)return;this.$VideoUploader2.setTargetID(a)};d.setHasFileBeenReplaced=function(a){this.$VideoUploader1.has_file_been_replaced=a};d.post=function(a){if(!this.$VideoUploader2)return;this.$VideoUploader2.post(a)};d.getVideoID=function(){this.$VideoUploader2&&(this.$VideoUploader3=this.$VideoUploader2.getVideoID());return this.$VideoUploader3};d.cancel=function(a){a===void 0&&(a=!1);var c=this.getVideoID();this.$VideoUploader2?this.$VideoUploader2.cancel(a):a&&c&&b("VideoUploadSession").deleteVideo(c);this.reset()};d.abandon=function(a){a===void 0&&(a=!1);var c=this.getVideoID();this.$VideoUploader2?this.$VideoUploader2.abandon(a):a&&c&&b("VideoUploadSession").deleteVideo(c);this.reset()};d.reset=function(){this.$VideoUploader2&&(this.$VideoUploader3=this.getVideoID()),this.$VideoUploader2=null};d.getUploadSession=function(){return this.$VideoUploader2};d.getLoggerData=function(){return{waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader4:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref}};d.isPostInProgress=function(){return!!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress()};d.isSessionInProgress=function(){return!!this.$VideoUploader2&&this.$VideoUploader2.isInProgress()};d.isSessionExist=function(){return!!this.$VideoUploader2};d.getUploadParameters=function(){return this.$VideoUploader1};d.__getSession=function(){return this.$VideoUploader2};d.__getEventsForWhichSessionShouldBeSetToNull=function(){return["upload-failed","post-finished","multimedia-upload-finished"]};d.$VideoUploader8=function(a,b){this.__getEventsForWhichSessionShouldBeSetToNull().includes(a)&&this.reset(),this.__delegateEvent(a,b)};d.__delegateEvent=function(a,b){this.inform(a,b)};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("CometUFICreateCommentSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey"},b={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment"},c={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview"},d={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare"},e={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet"},f={defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext"},aa={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},ba={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},ca={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},da={defaultValue:!1,kind:"LocalArgument",name:"includeNestedComments"},ea={defaultValue:null,kind:"LocalArgument",name:"input"},fa={defaultValue:null,kind:"LocalArgument",name:"isComet"},ga={defaultValue:null,kind:"LocalArgument",name:"scale"},ha={defaultValue:null,kind:"LocalArgument",name:"useDefaultActor"},ia=[{kind:"Variable",name:"data",variableName:"input"}],g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},i=[h],ja={alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,{alias:null,args:null,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:i,storageKey:null}],storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},k={alias:"threading_depth",args:null,kind:"ScalarField",name:"depth",storageKey:null},l=[g],m={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"reply_parent_comment",plural:!1,selections:l,storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:"style_type_renderer_comet",args:[{kind:"Literal",name:"supported",value:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentQuiltImageStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer","StoryAttachmentPageInCommentStyleRenderer","StoryAttachmentInstantGamesTournamentActivityStyleRenderer","StoryAttachmentInstantGamesUpdateCommentStyleRenderer","StoryAttachmentSubscriptionGiftStyleRenderer"]}],concreteType:null,kind:"LinkedField",name:"style_type_renderer",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentAnimatedImageShareAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentAnimatedImageShareStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentDonationAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentDonationStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentFallbackAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentFallbackStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentImageAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPhotoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentQuiltImageAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentQuiltImageStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentStickerAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentStickerStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAutoplayAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoAutoplayStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentTipJarPaymentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentTipJarPaymentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPlaceInfoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentCommentPlaceInfoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentChatCommandAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentChatCommandStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPageInCommentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPageInCommentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentInstantGamesTournamentActivityAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentInstantGamesTournamentActivityStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentInstantGamesUpdateCommentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentInstantGamesUpdateCommentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFISubscriptionGiftingAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentSubscriptionGiftStyleRenderer",abstractKey:null}],storageKey:'style_type_renderer(supported:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentQuiltImageStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer","StoryAttachmentPageInCommentStyleRenderer","StoryAttachmentInstantGamesTournamentActivityStyleRenderer","StoryAttachmentInstantGamesUpdateCommentStyleRenderer","StoryAttachmentSubscriptionGiftStyleRenderer"])'},{alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null}],storageKey:null},p={kind:"Variable",name:"feed_location",variableName:"feedLocation"},q=[p],r={alias:null,args:q,kind:"ScalarField",name:"should_show_comment_menu",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t={kind:"TypeDiscriminator",abstractKey:"__isActor"},u={kind:"Variable",name:"scale",variableName:"scale"},v={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},w=[v],x={alias:"profile_picture_depth_0",args:[{kind:"Literal",name:"height",value:32},u,{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:w,storageKey:null},ka=[{kind:"Literal",name:"height",value:24},u,{kind:"Literal",name:"width",value:24}],la={alias:"profile_picture_depth_1",args:ka,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:w,storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},z={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active_account",storageKey:null}],storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},D={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]},ma={kind:"InlineFragment",selections:[y],type:"Entity",abstractKey:"__isEntity"},na={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[n,g,s,t,x,la,{kind:"InlineFragment",selections:[y,z,A,B,y,C,D],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[y,A,y],type:"Page",abstractKey:null},ma],storageKey:null},oa={alias:null,args:null,kind:"ScalarField",name:"is_author_weak_reference",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},pa={alias:null,args:null,concreteType:"PrivateReplyContext",kind:"LinkedField",name:"private_reply_context",plural:!1,selections:[E],storageKey:null};E={alias:null,args:null,concreteType:"PrivateReplyContext",kind:"LinkedField",name:"page_private_reply",plural:!1,selections:[E,{alias:null,args:null,kind:"ScalarField",name:"permalink",storageKey:null},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:l,storageKey:null}],storageKey:null};var F={kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"},G=[F];D={kind:"InlineFragment",selections:[C,D],type:"User",abstractKey:null};var H={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},qa={alias:null,args:G,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:[H,g],storageKey:null},ra={alias:null,args:null,concreteType:"FeedbackReaction",kind:"LinkedField",name:"supported_reactions",plural:!0,selections:[H],storageKey:null},sa={alias:null,args:null,kind:"ScalarField",name:"broadcast_is_ama_enabled",storageKey:null};H={alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction_count",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:[H,g,{alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'};var ta={alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count_reduced",storageKey:null}],storageKey:null},ua={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:l,storageKey:null},va={alias:null,args:null,kind:"ScalarField",name:"can_viewer_demote",storageKey:null},wa={alias:null,args:null,kind:"ScalarField",name:"did_viewer_demote",storageKey:null};F={alias:null,args:[{kind:"Variable",name:"location",variableName:"feedLocation"},F],kind:"ScalarField",name:"can_viewer_comment",storageKey:null};var xa={alias:null,args:G,kind:"ScalarField",name:"can_viewer_react",storageKey:null},ya={alias:null,args:G,kind:"ScalarField",name:"comment_composer_placeholder",storageKey:null},za={alias:null,args:null,concreteType:"PublicConversationsExperimentContext",kind:"LinkedField",name:"public_conversations_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"comment_vote_ui_version",storageKey:null}],storageKey:null},Aa={alias:null,args:null,kind:"ScalarField",name:"should_show_top_reactions",storageKey:null},Ba={alias:"comment_count",args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},Ca={alias:"toplevel_comment_count",args:[{kind:"Literal",name:"orderby",value:"toplevel"}],concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:i,storageKey:'top_level_comments(orderby:"toplevel")'},Da={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"threading_config",plural:!1,selections:[n],storageKey:null},Ea={alias:null,args:null,kind:"ScalarField",name:"can_viewer_pin_live_comments",storageKey:null},Fa={alias:null,args:null,concreteType:"BroadcastPinnedCommentEvent",kind:"LinkedField",name:"latest_pinned_comment_event",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"pinned_comment",plural:!1,selections:l,storageKey:null},g],storageKey:null},Ga={alias:null,args:null,concreteType:"WorkAMAUFIAnswerEventActionLinksCommentModuleRenderer",kind:"LinkedField",name:"work_answer_event_action_links_comment_renderer",plural:!1,selections:[{documentName:"CometUFICommentActionLinks_feedback_work_answer_event_action_links_comment_renderer",fragmentName:"GeminiUFIAMABroadcastAnswerActionLinks_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],storageKey:null},Ha={alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},I={kind:"Variable",name:"feed_context_enable_comment",variableName:"displayCommentsContextEnableComment"},J={kind:"Variable",name:"feed_context_fb_feed_location",variableName:"feedLocation"},K={kind:"Variable",name:"feed_context_is_ad_preview",variableName:"displayCommentsContextIsAdPreview"},L={kind:"Variable",name:"feed_context_is_aggregated_share",variableName:"displayCommentsContextIsAggregatedShare"},M={kind:"Variable",name:"feed_context_is_story_set",variableName:"displayCommentsContextIsStorySet"},N={kind:"Variable",name:"feedback_context",variableName:"displayCommentsFeedbackContext"},O={kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},P={kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"},Q={kind:"Literal",name:"is_initial_fetch",value:!0},Ia=[I,J,K,L,M,N,O,P,Q,{kind:"Variable",name:"is_top_level",variableName:"includeNestedComments"}],Ja={alias:null,args:null,kind:"ScalarField",name:"comment_order",storageKey:null},Ka={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"expanded_sub_reply_parents",plural:!0,selections:l,storageKey:null},La={alias:null,args:null,kind:"ScalarField",name:"is_initially_expanded",storageKey:null},Ma={alias:null,args:null,kind:"ScalarField",name:"page_size",storageKey:null},Na={alias:null,args:null,kind:"ScalarField",name:"reply_comment_order",storageKey:null},Oa={alias:null,args:null,kind:"ScalarField",name:"should_render_composer_preemptively",storageKey:null},Pa={alias:null,args:null,kind:"ScalarField",name:"after_count",storageKey:null},Qa={alias:null,args:null,kind:"ScalarField",name:"before_count",storageKey:null},Ra={alias:null,args:null,kind:"ScalarField",name:"legacy_fbid",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"created_time",storageKey:null},Sa={alias:null,args:null,kind:"ScalarField",name:"spam_display_mode",storageKey:null},S=[n,g],Ta={alias:null,args:G,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:S,storageKey:null},Ua={alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:l,storageKey:null};I=[I,J,K,L,M,N,O,P,Q,{kind:"Literal",name:"is_top_level",value:!1}];J={alias:"sub_replies_count",args:[{kind:"Literal",name:"orderby",value:"sub_replies"}],concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:i,storageKey:'top_level_comments(orderby:"sub_replies")'};K={alias:null,args:null,kind:"ScalarField",name:"upvote_downvote_total",storageKey:null};L={alias:null,args:null,kind:"ScalarField",name:"viewer_comment_vote_state",storageKey:null};M={alias:null,args:null,kind:"ScalarField",name:"work_ama_answer_status",storageKey:null};N={alias:null,args:null,concreteType:"PageAdminActorInfo",kind:"LinkedField",name:"page_admin_actor_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creator_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profile_uri",storageKey:null}],storageKey:null};O={alias:null,args:null,kind:"ScalarField",name:"is_author_banned_by_content_owner",storageKey:null};P={alias:null,args:null,kind:"ScalarField",name:"can_viewer_upvote_downvote",storageKey:null};Q={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment_parent",plural:!1,selections:[g,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[n,s,g,{kind:"InlineFragment",selections:[B,C],type:"User",abstractKey:null}],storageKey:null}],storageKey:null};B={alias:null,args:null,concreteType:"EditHistoryConnection",kind:"LinkedField",name:"edit_history",plural:!1,selections:i,storageKey:null};C={alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"parent_feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_ban_user",storageKey:null},F,g,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"viewer_acts_as_page",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_fbid",storageKey:null},{alias:null,args:null,concreteType:"PoliticalFigureData",kind:"LinkedField",name:"political_figure_data",plural:!1,selections:[s,{alias:null,args:null,concreteType:"PoliticalOffice",kind:"LinkedField",name:"political_office",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"generic_title",storageKey:null},g],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"best_profile",plural:!1,selections:S,storageKey:null},g],storageKey:null}],storageKey:null};i=[{kind:"Literal",name:"translation_type",value:"ORIGINAL"}];var T={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null};v=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}];var V={kind:"InlineFragment",selections:l,type:"Node",abstractKey:"__isNode"},W={alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"entity_is_weak_reference",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null};A={alias:null,args:i,concreteType:null,kind:"LinkedField",name:"preferred_body",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"translation_type",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[T,U,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:v,storageKey:null},V],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InlineStyleAtRange",kind:"LinkedField",name:"inline_style_ranges",plural:!0,selections:[T,U,{alias:null,args:null,kind:"ScalarField",name:"inline_style",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedEntitiesAtRange",kind:"LinkedField",name:"aggregated_ranges",plural:!0,selections:[T,U,h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"sample_entities",plural:!0,selections:[n,{kind:"InlineFragment",selections:[g,s],type:"User",abstractKey:null},V],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[n,{kind:"TypeDiscriminator",abstractKey:"__isEntity"},{alias:null,args:[{kind:"Literal",name:"site",value:"comet"}],kind:"ScalarField",name:"url",storageKey:'url(site:"comet")'},{alias:"mobileUrl",args:[{kind:"Literal",name:"site",value:"mobile"}],kind:"ScalarField",name:"url",storageKey:'url(site:"mobile")'},{kind:"InlineFragment",selections:[g,{kind:"InlineFragment",selections:[{alias:"profile_url",args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Entity",abstractKey:"__isEntity"}],type:"Actor",abstractKey:"__isActor"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"external_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_skip_redirect",storageKey:null}],type:"ExternalUrl",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"time_index",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:l,storageKey:null}],type:"VideoTimeIndex",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"category_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null},g,A],type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[W,z],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[W,{alias:null,args:null,kind:"ScalarField",name:"work_official_status",storageKey:null}],type:"Group",abstractKey:null},V,{condition:"isComet",kind:"Condition",passingValue:!1,selections:[{alias:"www_url",args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'}]}],storageKey:null},T,U,n,X],storageKey:null},{alias:null,args:null,concreteType:"ColorAtRange",kind:"LinkedField",name:"color_ranges",plural:!0,selections:[T,U,{alias:null,args:null,kind:"ScalarField",name:"hex_rgb_color_with_pound_key",storageKey:null}],storageKey:null},Y,{alias:null,args:null,concreteType:"DelightAtRange",kind:"LinkedField",name:"delight_ranges",plural:!0,selections:[n,{alias:null,args:null,concreteType:"TextDelightCampaign",kind:"LinkedField",name:"campaign",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"delight_surface",value:"COMMENT"}],concreteType:"TextDelightStylePair",kind:"LinkedField",name:"delight_styles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:'delight_styles(delight_surface:"COMMENT")'},g],storageKey:null},T,U],storageKey:null}],type:"TextWithEntities",abstractKey:null}],storageKey:'preferred_body(translation_type:"ORIGINAL")'};z={alias:null,args:null,concreteType:"PostTranslatability",kind:"LinkedField",name:"translatability_for_viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"source_dialect_name",storageKey:null}],storageKey:null};W={alias:null,args:null,kind:"ScalarField",name:"translation_available_for_viewer",storageKey:null};var Va={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"if_viewer_can_share",plural:!1,selections:[g,{documentName:"CometUFICommentActionLinks_comment__if_viewer_can_share",fragmentName:"CometUFICommentShareActionLink_comment",fragmentPropName:"comment",kind:"ModuleImport"}],storageKey:null};i={alias:"body_renderer",args:i,concreteType:null,kind:"LinkedField",name:"preferred_body",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyTextWithEntities_textWithEntities",fragmentPropName:"textWithEntities",kind:"ModuleImport"}],type:"TextWithEntities",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyComposedTextWithEntities_composedTextWithEntities",fragmentPropName:"composedTextWithEntities",kind:"ModuleImport"}],type:"FBMarkdownCommentBody",abstractKey:null}],storageKey:'preferred_body(translation_type:"ORIGINAL")'};var Wa={alias:null,args:null,kind:"ScalarField",name:"timestamp_in_video",storageKey:null},Xa={alias:null,args:null,kind:"ScalarField",name:"written_while_video_was_live",storageKey:null},Z={kind:"Literal",name:"is_comet",value:!0},$=[Y];$={alias:null,args:null,concreteType:"GroupCommentInfo",kind:"LinkedField",name:"group_comment_info",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupMembership",kind:"LinkedField",name:"author_membership",plural:!1,selections:[{alias:null,args:q,concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"top_member_tag",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tag_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"member_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"small_icon",plural:!1,selections:w,storageKey:null}],storageKey:null},g],storageKey:null},{alias:"author_badge",args:[p,Z,{kind:"Literal",name:"whitelist",value:"ORIGINAL_POST_AUTHOR"}],concreteType:"GroupCommentInfoCommentMemberBadgesConnection",kind:"LinkedField",name:"comment_member_badges",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommentInfoCommentMemberBadgesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"badge_name",plural:!1,selections:$,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"badge_description",plural:!1,selections:$,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"group",plural:!1,selections:l,storageKey:null},{alias:null,args:[p,Z],kind:"ScalarField",name:"is_author_with_member_profile",storageKey:null},{documentName:"CometUFICommentActorLink_comment",fragmentName:"CometUFIGroupCommentActorLink_groupCommentInfo",fragmentPropName:"groupCommentInfo",kind:"ModuleImport"}],storageKey:null};l={alias:null,args:null,kind:"ScalarField",name:"has_constituent_badge",storageKey:null};p={alias:null,args:null,kind:"ScalarField",name:"can_see_constituent_badge_upsell",storageKey:null};Z={alias:null,args:null,kind:"ScalarField",name:"legacy_token",storageKey:null};var Ya={alias:null,args:null,kind:"ScalarField",name:"question_and_answer_type",storageKey:null},Za={alias:null,args:null,kind:"ScalarField",name:"is_author_original_poster",storageKey:null},$a={alias:null,args:null,kind:"ScalarField",name:"is_viewer_comment_poster",storageKey:null},ab={alias:null,args:q,concreteType:"IdentityBadge",kind:"LinkedField",name:"identity_badges_web",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"badge_asset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"multiple_badge_asset",storageKey:null},Y,{alias:null,args:null,kind:"ScalarField",name:"information_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"information_asset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"information_description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"identity_badge_type",storageKey:null}],storageKey:null};q={alias:null,args:q,kind:"ScalarField",name:"can_show_multiple_identity_badges",storageKey:null};var bb={alias:null,args:null,kind:"ScalarField",name:"can_viewer_disable_preview",storageKey:null},cb={alias:null,args:null,kind:"ScalarField",name:"is_hidden_by_content_owner",storageKey:null},db={documentName:"CometUFIComment_comment",fragmentName:"CometUFICommentQualitySurvey_inlineSurveyConfig",fragmentPropName:"inlineSurveyConfig",kind:"ModuleImport"};u={alias:null,args:null,concreteType:"InlineSurveyStoryActionLink",kind:"LinkedField",name:"inline_survey_config",plural:!1,selections:[{alias:null,args:[u],concreteType:"Image",kind:"LinkedField",name:"favicon",plural:!1,selections:v,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followup_choices",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followup_question",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"main_choices",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"main_question",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_blob",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thankyou_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tessa_survey_config_id",storageKey:null},db],storageKey:null};v={alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:S,storageKey:null};S={alias:null,args:null,concreteType:"WorkAMAUFIAnsweredEventCommentModuleRenderer",kind:"LinkedField",name:"work_answered_event_comment_renderer",plural:!1,selections:[{documentName:"CometUFIComment_comment_work_answered_event_comment_renderer",fragmentName:"CometUFIAMABroadcastAnswerEventRow_data",fragmentPropName:"data",kind:"ModuleImport"}],storageKey:null};Y={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[Y,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[n,V],storageKey:null},X,T,U],storageKey:null}],storageKey:null};V={alias:null,args:null,kind:"ScalarField",name:"is_markdown_enabled",storageKey:null};X={alias:null,args:null,kind:"ScalarField",name:"optimistic_action",storageKey:null};T={alias:null,args:null,kind:"ScalarField",name:"optimistic_error_code",storageKey:null};U={alias:null,args:null,kind:"ScalarField",name:"optimistic_error",storageKey:null};var eb={alias:null,args:null,kind:"ScalarField",name:"is_locally_composed",storageKey:null},fb={alias:null,args:null,kind:"ScalarField",name:"is_created_from_subscription",storageKey:null},gb={alias:null,args:null,kind:"ScalarField",name:"client_id",storageKey:null},hb={kind:"ClientExtension",selections:[X,T,U,eb,fb,gb,{alias:null,args:null,kind:"ScalarField",name:"reply_comment_parent_fbid",storageKey:null}]},ib={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_cursor",storageKey:null}],storageKey:null},jb={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"ufi2_connection_generation",storageKey:null}]},kb=["feedback_source","focus_comment_id","comment_order"],lb={kind:"Variable",name:"__dynamicKey",variableName:"UFI2CommentsProvider_commentsKey"};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,aa,ba,ca,da,ea,fa,ga,ha],kind:"Fragment",metadata:null,name:"CometUFICreateCommentSubscription",selections:[{alias:null,args:ia,concreteType:"CommentCreateResponsePayload",kind:"LinkedField",name:"comment_create_subscribe",plural:!1,selections:[ja,{alias:null,args:null,concreteType:"CommentsEdge",kind:"LinkedField",name:"feedback_comment_edge",plural:!1,selections:[j,{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[g,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{args:[{kind:"Variable",name:"includeNestedComments",variableName:"includeNestedComments"}],kind:"FragmentSpread",name:"CometUFICommentList_feedback"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"parent_post_story",plural:!1,selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometUFICommentsCount_feedback"}],storageKey:null}],storageKey:null},k,m,{args:null,kind:"FragmentSpread",name:"CometUFIComment_comment"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[f,b,c,d,e,aa,ba,ca,da,ea,fa,ga,ha,a],kind:"Operation",name:"CometUFICreateCommentSubscription",selections:[{alias:null,args:ia,concreteType:"CommentCreateResponsePayload",kind:"LinkedField",name:"comment_create_subscribe",plural:!1,selections:[ja,{alias:null,args:null,concreteType:"CommentsEdge",kind:"LinkedField",name:"feedback_comment_edge",plural:!1,selections:[j,{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[o,g,r,na,oa,pa,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,E,{alias:null,args:G,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[n,g,t,s,x,la,ma,D],storageKey:null},qa,ra,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[g,sa],storageKey:null},H,ta,ua,va,wa,F,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,{alias:null,args:Ia,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[Ja,Ka,La,Ma,Na,Oa,Pa,Qa,h,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[g,Ra,na,oa,R,Sa,o,r,pa,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,E,Ta,qa,ra,Ua,H,ta,ua,va,wa,F,xa,ya,za,Aa,{condition:"includeNestedComments",kind:"Condition",passingValue:!0,selections:[Ba,Ca,Da,{alias:null,args:G,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[t,s,x,la,ma,D],storageKey:null},Ea,Fa,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[sa],storageKey:null},Ga,Ha,{alias:null,args:I,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"highlighted_comments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[n,s,{alias:"profilePictureForReplyExpander",args:ka,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:w,storageKey:null},g,D],storageKey:null},R,g],storageKey:null},Ja,Ka,La,Ma,Na,Oa,Pa,Qa,h,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[g,Ra,na,oa,R,Sa,o,r,pa,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,E,Ta,qa,ra,Ua,H,ta,ua,va,wa,F,xa,ya,za,Aa,J],storageKey:null},K,L,M,N,O,P,Q,B,C,A,z,W,y,Va,i,Wa,Xa,$,l,p,Z,Ya,Za,$a,ab,q,bb,cb,u,v,S,Y,V,m,k,n,hb],storageKey:null},j],storageKey:null},ib,jb],storageKey:null},{alias:null,args:I,filters:kb,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",kind:"LinkedHandle",name:"display_comments",dynamicKey:lb}]}],storageKey:null},K,L,M,N,O,P,Q,B,C,A,z,W,y,Va,i,Wa,Xa,$,l,p,Z,Ya,Za,$a,ab,q,bb,cb,u,v,S,Y,V,m,k,n,hb,{condition:"includeNestedComments",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[J],storageKey:null}]}],storageKey:null},j],storageKey:null},ib,jb],storageKey:null},{alias:null,args:Ia,filters:kb,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",kind:"LinkedHandle",name:"display_comments",dynamicKey:lb}],storageKey:null},K,L,M,N,Sa,O,P,R,Q,B,C,A,z,W,y,Va,i,Wa,Xa,$,l,p,Z,Ya,Za,$a,ab,q,bb,cb,{alias:null,args:null,concreteType:"InlineSurveyStoryActionLink",kind:"LinkedField",name:"inline_survey_config",plural:!1,selections:[db],storageKey:null},Ra,v,S,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"parent_post_story",plural:!1,selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,Ba,{alias:"i18n_comment_count",args:null,kind:"ScalarField",name:"comment_count_reduced",storageKey:null},y],storageKey:null},g],storageKey:null},k,m,{kind:"ClientExtension",selections:[X,T,U,eb,fb,gb]}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"3651647401530426",metadata:{subscriptionName:"comment_create_subscribe"},name:"CometUFICreateCommentSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("CometUFICommentActorConstituentBadge_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFICommentActorConstituentBadge_comment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_see_constituent_badge_upsell",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"legacy_token",storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"parent_feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"share_fbid",storageKey:null},{alias:null,args:null,concreteType:"PoliticalFigureData",kind:"LinkedField",name:"political_figure_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"PoliticalOffice",kind:"LinkedField",name:"political_office",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"generic_title",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"best_profile",plural:!1,selections:[a],storageKey:null}],storageKey:null}],storageKey:null}],type:"Comment",abstractKey:null}}();e.exports=a}),null);
__d("CometUFICommentActorGroupMemberAuthorBadge_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"feedLocation"}],kind:"Fragment",metadata:null,name:"CometUFICommentActorGroupMemberAuthorBadge_comment",selections:[{alias:null,args:null,concreteType:"GroupCommentInfo",kind:"LinkedField",name:"group_comment_info",plural:!1,selections:[{alias:"author_badge",args:[{kind:"Variable",name:"feed_location",variableName:"feedLocation"},{kind:"Literal",name:"is_comet",value:!0},{kind:"Literal",name:"whitelist",value:"ORIGINAL_POST_AUTHOR"}],concreteType:"GroupCommentInfoCommentMemberBadgesConnection",kind:"LinkedField",name:"comment_member_badges",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommentInfoCommentMemberBadgesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"badge_name",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"GroupsCometMemberAuthorBadgeHovercardPopover_comment"}],type:"Comment",abstractKey:null};e.exports=a}),null);
__d("CometUFICommentActorGroupMemberBadge_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"feedLocation"}],kind:"Fragment",metadata:null,name:"CometUFICommentActorGroupMemberBadge_comment",selections:[{alias:null,args:null,concreteType:"GroupCommentInfo",kind:"LinkedField",name:"group_comment_info",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupMembership",kind:"LinkedField",name:"author_membership",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"feed_location",variableName:"feedLocation"}],concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"top_member_tag",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tag_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"member_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"small_icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Comment",abstractKey:null};e.exports=a}),null);
__d("CometUFIFeedbackReactSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"useDefaultActor"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d=[c],e=[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[c,{args:null,kind:"FragmentSpread",name:"CometUFIFeedbackReactMutation_feedback"},{args:null,kind:"FragmentSpread",name:"UFI2ReactionsCount_feedback"},{args:null,kind:"FragmentSpread",name:"UFI2TopReactions_feedback"}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"liker",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:d,storageKey:null}],storageKey:null}],f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},h={alias:"i18n_reaction_count",args:null,kind:"ScalarField",name:"reaction_count_reduced",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},j=[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],k={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};d=[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[c,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:d,storageKey:null},{alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction_count",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:[g,c,{alias:null,args:null,kind:"ScalarField",name:"localized_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null}],storageKey:null},h],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'},{alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null}],storageKey:null},{alias:null,args:j,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:[g,c,f],storageKey:null},h,{alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"ImportantReactorsConnection",kind:"LinkedField",name:"important_reactors",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[f,k,c],storageKey:null}],storageKey:"important_reactors(first:2)"},{alias:"reaction_count",args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[i],storageKey:null},{alias:null,args:j,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[f,c,k],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"liker",plural:!1,selections:[f,{kind:"TypeDiscriminator",abstractKey:"__isActor"},c],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[f,c],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometUFIFeedbackReactSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"feedback_like_subscribe",plural:!1,selections:[{kind:"InlineFragment",selections:e,type:"FeedbackLikeResponsePayload",abstractKey:null},{kind:"InlineFragment",selections:e,type:"FeedbackUnlikeResponsePayload",abstractKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometUFIFeedbackReactSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"feedback_like_subscribe",plural:!1,selections:[f,{kind:"InlineFragment",selections:d,type:"FeedbackLikeResponsePayload",abstractKey:null},{kind:"InlineFragment",selections:d,type:"FeedbackUnlikeResponsePayload",abstractKey:null}],storageKey:null}]},params:{id:"2981224878623730",metadata:{subscriptionName:"feedback_like_subscribe"},name:"CometUFIFeedbackReactSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("CometUFIFeedbackReactSubscription_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFIFeedbackReactSubscription_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFIFeedbackReactMutation_feedback"},{args:null,kind:"FragmentSpread",name:"UFI2ReactionsCount_feedback"},{args:null,kind:"FragmentSpread",name:"UFI2TopReactions_feedback"}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometUFIFeedbackReactSubscription_liker.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFIFeedbackReactSubscription_liker",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Actor",abstractKey:"__isActor"};e.exports=a}),null);
__d("CometUFIFeedbackReactSubscription_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFIFeedbackReactSubscription_viewer",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometUFITypingSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c=[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UFI2TypingIndicatorImpl_feedback"}],storageKey:null}],d=[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"FeedbackTypersConnection",kind:"LinkedField",name:"feedback_typers",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"other_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometUFITypingSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"feedback_typing_subscribe",plural:!1,selections:[{kind:"InlineFragment",selections:c,type:"FeedbackStartTypingResponsePayload",abstractKey:null},{kind:"InlineFragment",selections:c,type:"FeedbackStopTypingResponsePayload",abstractKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometUFITypingSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"feedback_typing_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:d,type:"FeedbackStartTypingResponsePayload",abstractKey:null},{kind:"InlineFragment",selections:d,type:"FeedbackStopTypingResponsePayload",abstractKey:null}],storageKey:null}]},params:{id:"2548564581912271",metadata:{subscriptionName:"feedback_typing_subscribe"},name:"CometUFITypingSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("CometUFIUnhideCommentMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},b={defaultValue:null,kind:"LocalArgument",name:"input"},c={defaultValue:null,kind:"LocalArgument",name:"isComet"},d=[{kind:"Variable",name:"data",variableName:"input"}],e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"spam_display_mode",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"is_hidden_by_viewer",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"is_hidden_by_content_owner",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},j=[{kind:"Variable",name:"feed_location",variableName:"feedLocation"}];return{fragment:{argumentDefinitions:[a,b,c],kind:"Fragment",metadata:null,name:"CometUFIUnhideCommentMutation",selections:[{alias:null,args:d,concreteType:"CommentUnhideResponsePayload",kind:"LinkedField",name:"comment_unhide",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment",plural:!1,selections:[e,f,g,h,{args:null,kind:"FragmentSpread",name:"UFI2CommentMenu_comment"},{condition:"isComet",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometUFICommentMenu_comment"}]}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,c,a],kind:"Operation",name:"CometUFIUnhideCommentMutation",selections:[{alias:null,args:d,concreteType:"CommentUnhideResponsePayload",kind:"LinkedField",name:"comment_unhide",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment",plural:!1,selections:[e,f,g,h,{condition:"isComet",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"legacy_fbid",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[i,e,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"GroupCommentInfo",kind:"LinkedField",name:"group_comment_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_author_muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_report_comment_to_admin_with_tags",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_block_author",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"legacy_token",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comment_menu_tooltip",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"comment_menu_items",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"show_remove_content_options",storageKey:null}],type:"CommentMenuItemDeleteAndRemoveMember",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_author_banned_by_content_owner",storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"parent_feedback",plural:!1,selections:[e,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"viewer_acts_as_page",plural:!1,selections:[e],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"create_detailed_report_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"us_structured_reporting_enabled",storageKey:null}]},{condition:"isComet",kind:"Condition",passingValue:!0,selections:[{alias:null,args:j,kind:"ScalarField",name:"should_show_comment_menu",storageKey:null},{alias:"items",args:j,concreteType:null,kind:"LinkedField",name:"comment_menu_items",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemRemoveTag_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemRemoveTag",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemDelete_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemDelete",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemDeleteAndRemoveMember_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemDeleteAndRemoveMember",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemDivider_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemDivider",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemEdit_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemEdit",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemReportToAdmins_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemReportToAdmins",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemGiveFeedbackOrReport_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemGiveFeedbackOrReport",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemCreateDetailedReport_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemCreateDetailedReport",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemHide_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemHide",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemBanCommenter_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemBanCommenter",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemMuteMember_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemMuteMember",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemRemoveWithFeedback_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemRemoveWithFeedback",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemPublishTeleprompterComment_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemPublishTeleprompterComment",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemPublishVidwallaOverlay_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemPublishVidwallaOverlay",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemVidwallaSaveGraphic_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemVidwallaSaveGraphic",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemBanCommenterFromLiveVideoStream_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemBanCommenterFromLiveVideoStream",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemBanCommenterFromPage_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemBanCommenterFromPage",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemMuteCommenterForFifteenMinutes_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemMuteCommenterForFifteenMinutes",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemMuteCommenterForThirtyMinutes_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemMuteCommenterForThirtyMinutes",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentMenu_comment",fragmentName:"CometUFICommentMenuItemMuteCommenterForSixtyMinutes_commentMenuItem",fragmentPropName:"commentMenuItem",kind:"ModuleImport"}],type:"CommentMenuItemMuteCommenterForSixtyMinutes",abstractKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"optimistic_action",storageKey:null}]}]}],storageKey:null}],storageKey:null}]},params:{id:"3232896783397108",metadata:{},name:"CometUFIUnhideCommentMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometUFIPinCommentMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"PinnedCommentEventCreateResponsePayload",kind:"LinkedField",name:"pinned_comment_event_create",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometUFIPinCommentMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometUFIPinCommentMutation",selections:b},params:{id:"3123643284364920",metadata:{},name:"CometUFIPinCommentMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometUFIUnpinCommentMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"UnpinnedCommentEventCreateResponsePayload",kind:"LinkedField",name:"unpinned_comment_event_create",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometUFIUnpinCommentMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometUFIUnpinCommentMutation",selections:b},params:{id:"3405642312783245",metadata:{},name:"CometUFIUnpinCommentMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("UFI2BanActorMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FeedbackPageBanResponsePayload",kind:"LinkedField",name:"feedback_page_ban",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"UFI2BanActorMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"UFI2BanActorMutation",selections:b},params:{id:"2353097554735989",metadata:{},name:"UFI2BanActorMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometUFICreateCommentSubscription",["CometRelay","FBLogger","UFI2FeedbackSubscriptionTopicProvider","WebPixelRatio","forEachUFI2DisplayCommentsConnection","nodeIsInConnection","relay-runtime","CometUFICreateCommentSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";f.subscribe=a;var g,h=g!==void 0?g:g=b("CometUFICreateCommentSubscription.graphql");b("UFI2FeedbackSubscriptionTopicProvider").registerProvider(h,"gqls/comment_create_subscribe/top_level_feedback_id_");function a(a){var c=a.commentsKey,d=a.environment,e=a.feedbackSource,f=a.feedLocation,g=a.focusCommentID,i=a.isComet,j=a.onCompleted,k=a.onNext,l=a.subscriptionTargetID,m=a.topLevelFeedbackTargetID;a=a.useDefaultActor;function n(a){b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",m||"UNKNOWN").warn(a)}b("UFI2FeedbackSubscriptionTopicProvider").addSubscriptionTargetIDForFeedbackID(m,l);return b("CometRelay").requestSubscription(d,{onCompleted:j,onNext:k,subscription:h,updater:function(a){var c=a.getRootField("comment_create_subscribe");if(c==null){n("could not find comment create subscription payload");return}var d=c.getLinkedRecord("feedback");if(d==null){n("could not find feedback target in payload");return}var e=d.getDataID();if(e==null){n("could not get feedback target id");return}e=a.get(e);if(e==null){n("could not find feedback record");return}b("forEachUFI2DisplayCommentsConnection")(a,e,function(e){var f=c.getLinkedRecord("feedback_comment_edge");if(f==null){n("could not find comment edge");return}var g=f.getLinkedRecord("node");if(g==null){n("could not find comment node");return}if(b("nodeIsInConnection")(e,g,n))return;var h=e.getValue("before_count")||0;if(typeof h!=="number"){n("expected `before_count` to be a number");return}h=b("relay-runtime").ConnectionHandler.createEdge(a,e,g,f.getType());if(h==null){n("could not build comment edge");return}b("relay-runtime").ConnectionHandler.insertEdgeBefore(e,h);g.setValue(!0,"is_created_from_subscription");f=d.getLinkedRecord("display_comments");if(f==null){n("could not get display_comments from payload");return}h=f.getValue("count");if(h==null){n("could not get display_comments count from payload");return}e.setValue(h,"count")})},variables:{UFI2CommentsProvider_commentsKey:c,feedLocation:f,feedbackSource:e,focusCommentID:g,input:{top_level_feedback_id:m},isComet:i,scale:b("WebPixelRatio").get(),useDefaultActor:a}})}}),null);
__d("GroupsCometMemberAuthorBadgeHovercardPopover.entrypoint",["JSResource"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(){return{}},root:b("JSResource")("GroupsCometMemberAuthorBadgeHovercardPopover.react").__setRef("GroupsCometMemberAuthorBadgeHovercardPopover.entrypoint")};e.exports=a}),null);
__d("ConstituentTitleTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:ConstituentTitleLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:ConstituentTitleLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ConstituentTitleLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAddress=function(a){this.$1.address=a;return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setBadgeUpsellType=function(a){this.$1.badge_upsell_type=a;return this};c.setCancelStep=function(a){this.$1.cancel_step=a;return this};c.setCommentID=function(a){this.$1.comment_id=a;return this};c.setCommentRankingQeIdentifier=function(a){this.$1.comment_ranking_qe_identifier=a;return this};c.setDialogSource=function(a){this.$1.dialog_source=a;return this};c.setDialogType=function(a){this.$1.dialog_type=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setHasCivicEngagementAddress=function(a){this.$1.has_civic_engagement_address=a;return this};c.setPostID=function(a){this.$1.post_id=a;return this};c.setProfileIds=function(a){this.$1.profile_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={address:!0,appid:!0,badge_upsell_type:!0,cancel_step:!0,comment_id:!0,comment_ranking_qe_identifier:!0,dialog_source:!0,dialog_type:!0,event:!0,has_civic_engagement_address:!0,post_id:!0,profile_ids:!0,sessionid:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("XConstituentBadgeDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/constituent_badge/dialog/",{comment_id:{type:"String"},ft_id:{type:"FBID"},__asyncDialog:{type:"Int"}})}),null);
__d("CometUFICommentActorConstituentBadge.react",["ix","fbt","Actor","CometLazyDialogTrigger.react","CometRelay","CometTooltip.react","ConstituentTitleTypedLogger","JSResource","XConstituentBadgeDialogController","React","TetraIcon.react","fbicon","recoverableViolation","stylex","useVisibilityObserver","CometUFICommentActorConstituentBadge_comment.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("JSResource")("CometCompatModal.react").__setRef("CometUFICommentActorConstituentBadge.react"),k=b("React");function a(a){var c;a=b("CometRelay").useFragment(i!==void 0?i:i=b("CometUFICommentActorConstituentBadge_comment.graphql"),a.comment);var d=a.legacy_token,e=a.parent_feedback,f=k.useRef(!1),l=b("useVisibilityObserver")({onVisible:function(){if(f.current)return;f.current=!0;new(b("ConstituentTitleTypedLogger"))().setEvent("comment_vpv").setPostID(p).setCommentID(d).log()}}),m=b("Actor").useActor();m=m[0];var n=k.useMemo(function(){return b("XConstituentBadgeDialogController").getURIBuilder().setString("comment_id",d).getURI().toString()},[d]);if(!a.author||((c=a.author)==null?void 0:c.id)==null)return b("recoverableViolation")("missing politician","politician_tools");var o=a.author.short_name,p=e==null?void 0:e.share_fbid,q=m===a.author.id,r=e==null?void 0:(c=e.political_figure_data)==null?void 0:(m=c.political_office)==null?void 0:m.generic_title,s=e==null?void 0:(c=e.political_figure_data)==null?void 0:c.name;m=a.can_see_constituent_badge_upsell;function t(){if(!o||!r||!s)return null;return q?h._("Your constituent badge is on. {representative_name} is your {office_title}.",[h._param("representative_name",s),h._param("office_title",r)]):h._("{representative_name} is {comment_author_name}'s {politician_office_title}.",[h._param("representative_name",s),h._param("comment_author_name",o),h._param("politician_office_title",r)])}function u(){return h._("{comment_author_name} has a badge showing that they are a constituent of {representative_name}",[h._param("comment_author_name",o),h._param("representative_name",s)])}function v(a){return k.jsx(b("TetraIcon.react"),{alt:u(),color:"secondary",icon:b("fbicon")._(g("506962"),12),onPress:a})}e=m===!0?k.jsx(b("CometLazyDialogTrigger.react"),{dialogProps:{params:{rel:"dialog-post",uri:n}},dialogResource:j,children:function(a){return v(function(){a(),new(b("ConstituentTitleTypedLogger"))().setEvent("constituent_badge_click").setPostID(p).setCommentID(d).log()})}}):v();return k.jsx("span",{className:"l59n7fsa l9j0dhe7 kkf49tns",ref:l,children:k.jsx(b("CometTooltip.react"),{tooltip:t(),children:k.jsx("span",{className:"pcp91wgn iuny7tx3 p8fzw8mz ipjc6fyt",children:e})})})}}),null);
__d("CometUFICommentActorGroupMemberAuthorBadge.react",["CometHovercardTrigger.react","CometRelay","GroupsCometMemberAuthorBadgeHovercardPopover.entrypoint","React","TetraText.react","recoverableViolation","stylex","CometUFICommentActorGroupMemberAuthorBadge_comment.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=g!==void 0?g:g=b("CometUFICommentActorGroupMemberAuthorBadge_comment.graphql");function a(a){var c;a=a.comment$key;a=b("CometRelay").useFragment(i,a);c=a==null?void 0:(c=a.group_comment_info)==null?void 0:(c=c.author_badge)==null?void 0:(c=c.edges[0])==null?void 0:c.node;if(c==null)return null;var d=(c=c.badge_name)==null?void 0:c.text;return d==null?b("recoverableViolation")("missing name for author badge","groups_comet"):h.jsx(b("CometHovercardTrigger.react"),{align:"middle",display:"inline-block",popoverEntryPoint:b("GroupsCometMemberAuthorBadgeHovercardPopover.entrypoint"),popoverOtherProps:{comment$key:a},popoverProps:{},children:function(a){return h.jsx("div",{className:"b3onmgus e5nlhep0 ph5uu5jm ecm0bbzt hytbnt81 q9uorilb bnpdmtie qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj tdjehn4e",ref:a,children:h.jsx(b("TetraText.react"),{color:"secondary",type:"bodyLink4",children:d})})}})}}),null);
__d("CometUFICommentActorGroupMemberBadge.react",["fbt","CometRelay","GroupMemberTagType","ImageIconSource","MemberBadgeHovercard.react","React","TetraIcon.react","recoverableViolation","stylex","CometUFICommentActorGroupMemberBadge_comment.graphql"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React");function j(a){return a==null?null:b("GroupMemberTagType")[a]}function a(a){var c;a=b("CometRelay").useFragment(h!==void 0?h:h=b("CometUFICommentActorGroupMemberBadge_comment.graphql"),a.comment$key);a=a==null?void 0:(a=a.group_comment_info)==null?void 0:(a=a.author_membership)==null?void 0:a.top_member_tag;if(a==null)return null;var d=j(a.tag_type);if(d==null)return b("recoverableViolation")("invalid badge type: "+(a.tag_type!=null?a.tag_type:"null"),"groups_comet");var e=(c=a.small_icon)==null?void 0:c.uri;return a.group_id==null||a.member_id==null||e==null?b("recoverableViolation")("missing required badge fields","groups_comet"):i.jsx(b("MemberBadgeHovercard.react"),{badgeType:d,groupID:a.group_id,memberID:a.member_id,children:function(a){return i.jsx("span",{className:"e9o6kcyi pq6dq46d bp9cbjyn","data-testid":void 0,ref:a,children:i.jsx(b("TetraIcon.react"),{alt:g._("badge icon"),icon:new(b("ImageIconSource"))(e,12,12)})})}})}}),null);
__d("CometUFICommentActorVerifiedBadge.react",["ix","fbt","CometTooltip.react","React","TetraIcon.react","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(){return i.jsx("span",{className:"e9o6kcyi pq6dq46d bp9cbjyn",children:i.jsx(b("CometTooltip.react"),{tooltip:h._("Verified"),children:i.jsx(b("TetraIcon.react"),{color:"highlight",icon:b("fbicon")._(g("498144"),12),size:12})})})}}),null);
__d("CometUFIFeedbackReactSubscription",["CometRelay","UFI2FeedbackSubscriptionTopicProvider","emptyFunction","gkx","CometUFIFeedbackReactSubscription_feedback.graphql","CometUFIFeedbackReactSubscription_liker.graphql","CometUFIFeedbackReactSubscription_viewer.graphql","CometUFIFeedbackReactSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";f.subscribe=a;var g,h,i,j;g!==void 0?g:g=b("CometUFIFeedbackReactSubscription_feedback.graphql");h!==void 0?h:h=b("CometUFIFeedbackReactSubscription_liker.graphql");i!==void 0?i:i=b("CometUFIFeedbackReactSubscription_viewer.graphql");var k=j!==void 0?j:j=b("CometUFIFeedbackReactSubscription.graphql");b("UFI2FeedbackSubscriptionTopicProvider").registerProvider(k,"gqls/feedback_like_subscribe/feedback_id_");function a(a,c,d,e){if(b("gkx")("1352845"))return{dispose:b("emptyFunction")};b("UFI2FeedbackSubscriptionTopicProvider").addSubscriptionTargetIDForFeedbackID(c.feedback_id,e);return b("CometRelay").requestSubscription(a,{subscription:k,updater:function(a,b){var c,d;c=(c=b.feedback_like_subscribe)==null?void 0:(c=c.liker)==null?void 0:c.id;d=(d=b.feedback_like_subscribe)==null?void 0:(d=d.viewer)==null?void 0:(d=d.actor)==null?void 0:d.id;if(c!==d){b=(c=b.feedback_like_subscribe)==null?void 0:(d=c.feedback)==null?void 0:d.id;if(b!==void 0&&b!==null){c=a.get(b);c&&c.setValue(!0,"is_unseen")}}},variables:{input:c,useDefaultActor:d}})}}),null);
__d("CometUFITypingSubscription",["CometRelay","UFI2FeedbackSubscriptionTopicProvider","CometUFITypingSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";f.subscribe=a;var g,h=g!==void 0?g:g=b("CometUFITypingSubscription.graphql");b("UFI2FeedbackSubscriptionTopicProvider").registerProvider(h,"gqls/feedback_typing_subscribe/feedback_id_");function a(a,c,d,e){b("UFI2FeedbackSubscriptionTopicProvider").addSubscriptionTargetIDForFeedbackID(c,e);return b("CometRelay").requestSubscription(a,{onNext:d&&d.onNext,subscription:h,variables:{input:{feedback_id:c}}})}}),null);
__d("CometUFIUnhideCommentMutation",["CometRelay","FBLogger","CometUFIUnhideCommentMutation.graphql"],(function(a,b,c,d,e,f){"use strict";f.commit=a;var g,h=g!==void 0?g:g=b("CometUFIUnhideCommentMutation.graphql");function a(a,c){return b("CometRelay").commitMutation(a,{mutation:h,optimisticUpdater:function(a){a=a.get(c.commentId);if(a==null){b("FBLogger")("ufi2").mustfix("When trying to unhide a comment, the comment could not be found.");return}a.setValue(!1,"is_hidden_by_content_owner");a.setValue(!1,"is_hidden_by_viewer");a.setValue("none","spam_display_mode")},variables:{feedLocation:c.feedLocation,input:{actor_id:c.actorId,comment_id:c.commentId,feedback_source:c.feedbackSource,site:"www"},isComet:c.isComet}})}}),null);
__d("CometUFIViewOptionsSelectorMenu.react",["CometMenu.react","CometMenuItem.react","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.onChange;a=a.viewOptions;a=a.filter(Boolean);return g.jsx(b("CometMenu.react"),{withArrow:!0,children:a.map(function(a){return g.jsx(b("CometMenuItem.react"),{onClick:function(){a.value!=null&&c(a.value)},primaryText:a.title||"",secondaryText:a.description},a.value)})})}}),null);
__d("CometUFICreatorInfo.react",["ix","fbt","CometTooltip.react","CometUFIProfileLink.react","React","TetraIcon.react","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(a){var c;d=d();switch(a.labelType){case"commented":c=h._("Commented on by {creator}",[h._param("creator",d)]);break;case"edited_comment":c=h._("Edited by {creator}",[h._param("creator",d)]);break;case"sent_message":c=h._("Sent by {creator}",[h._param("creator",d)]);break;case"page_admin_note":c=h._("Noted by {creator}",[h._param("creator",d)]);break;default:return i.jsx("span",{})}d=i.jsxs(i.Fragment,{children:[c,i.jsx("span",{className:"ormqv51v l9j0dhe7 kkf49tns",children:i.jsx(b("CometTooltip.react"),{tooltip:m(),children:i.jsx(b("TetraIcon.react"),{color:"tertiary",icon:b("fbicon")._(g("479175"),12)})})})]});function d(){switch(a.creatorType){case"application":case"gray_account":case"indirect_admin":return i.jsx(b("CometTooltip.react"),{tooltip:e(),children:i.jsx("b",{children:a.creatorName})});case"business_admin":return i.jsx(b("CometUFIProfileLink.react"),{kind:"link",uid:a.creatorID,children:a.creatorName});case"direct_admin":return f();case"former_admin":return i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"ormqv51v l9j0dhe7 cgat1ltu",children:i.jsx(b("TetraIcon.react"),{color:"tertiary",icon:b("fbicon")._(g("648667"),12)})}),f()]});default:return i.jsx("span",{children:a.creatorName})}}function e(){switch(a.creatorType){case"application":return j();case"gray_account":return l();case"indirect_admin":return k()}return null}function f(){return a.profileURI==null||a.profileURI===""?i.jsx("span",{children:a.creatorName}):i.jsx(b("CometUFIProfileLink.react"),{kind:"link",uid:a.creatorID,children:a.creatorName})}function j(){switch(a.labelType){case"commented":return h._("This was commented on by someone using {application}.",[h._param("application",a.creatorName)]);case"edited_comment":return h._("This was edited by someone using {application}.",[h._param("application",a.creatorName)]);case"sent_message":return h._("This was sent by someone using {application}.",[h._param("application",a.creatorName)]);case"page_admin_note":return h._("This was noted by someone using {application}.",[h._param("application",a.creatorName)])}return null}function k(){switch(a.labelType){case"commented":return h._("This was commented on by someone from {page}.",[h._param("page",a.creatorName)]);case"edited_comment":return h._("This was edited by someone from {page}.",[h._param("page",a.creatorName)]);case"sent_message":return h._("This was sent by someone from {page}.",[h._param("page",a.creatorName)]);case"page_admin_note":return h._("This was noted by someone from {page}.",[h._param("page",a.creatorName)])}return null}function l(){switch(a.labelType){case"commented":return h._("This was commented on by someone who doesn't have a personal Facebook account.");case"edited_comment":return h._("This was edited by someone who doesn't have a personal Facebook account.");case"sent_message":return h._("This was sent by someone who doesn't have a personal Facebook account.");case"page_admin_note":return h._("This was noted by someone who doesn't have a personal Facebook account.")}return null}function m(){switch(a.labelType){case"commented":return h._("Only people who manage this Page can see who posted a comment.");case"edited_comment":return h._("Only people who manage this Page can see who edited a comment");case"sent_message":return h._("Only people who manage this Page can see who sent a message.");case"page_admin_note":return h._("Only people who manage this Page can see who created a note")}return null}return d}}),null);
__d("CometUFIPinCommentMutation",["Promise","CometRelay","CometUFIPinCommentMutation.graphql"],(function(a,b,c,d,e,f){"use strict";f.commit=a;var g,h=g!==void 0?g:g=b("CometUFIPinCommentMutation.graphql");function i(a,b,c){c=b.get(c);if(c==null)return;b=b.get(a);if(b==null)return;a=c.getOrCreateLinkedRecord("latest_pinned_comment_event","BroadcastPinnedCommentEvent");a.setLinkedRecord(b,"pinned_comment")}function a(a,c){return new(b("Promise"))(function(d,e){b("CometRelay").commitMutation(a,{mutation:h,onCompleted:function(a,b){if(b!=null){e(b);return}d(a)},onError:e,optimisticUpdater:function(a){return i(c.commentID,a,c.feedbackID)},updater:function(a){return i(c.commentID,a,c.feedbackID)},variables:{input:{comment_id:c.commentID,video_id:c.videoID,video_time_offset:0}}})})}}),null);
__d("CometUFIUnpinCommentMutation",["Promise","CometRelay","CometUFIUnpinCommentMutation.graphql"],(function(a,b,c,d,e,f){"use strict";f.commit=a;var g,h=g!==void 0?g:g=b("CometUFIUnpinCommentMutation.graphql");function i(a,b){a=a.get(b);if(a==null)return;a.setValue(null,"latest_pinned_comment_event")}function a(a,c){return new(b("Promise"))(function(d,e){b("CometRelay").commitMutation(a,{mutation:h,onCompleted:function(a,b){if(b!=null){e(b);return}d(a)},onError:e,optimisticUpdater:function(a){return i(a,c.feedbackID)},updater:function(a){return i(a,c.feedbackID)},variables:{input:{video_id:c.videoID,video_time_offset:0}}})})}}),null);
__d("UFI2RichComposerInput.react",["cx","CometVisualCompletionAttributes","DraftEditor.react","Keys","React","getDefaultKeyBinding","getEditorStateFromUFI2ComposerState","isSoftNewlineEvent","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("Keys").RETURN,i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){d.props.onComposerStateChange(function(b){return babelHelpers["extends"]({},b,{inputState:b.inputState.__type==="editor-state-based"?babelHelpers["extends"]({},b.inputState,{editorState:a}):{__type:"editor-state-based",editorState:a}})})},d.$2=function(a,b){return d.props.handleBeforeInput?d.props.handleBeforeInput(a,b):"not-handled"},d.$3=function(a,b){if(d.props.handleKeyCommand&&d.props.handleKeyCommand(a,b)==="handled")return"handled";if(a==="ufi-commit"){d.props.onCommit();return"handled"}return"not-handled"},d.$4=function(a){if(d.props.keyBindingFn){var c=d.props.keyBindingFn(a);if(c!=null)return c}return a.keyCode===h&&!b("isSoftNewlineEvent")(a)?"ufi-commit":b("getDefaultKeyBinding")(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.execCommand=function(a){this.props.handleCommand&&this.props.handleCommand(a)};d.render=function(){var a=this.props.composerState.ariaInputs;return i.jsx("div",babelHelpers["extends"]({className:b("joinClasses")((this.props.composerState.isLocked?"_3d2p":"")+" _3d2q",this.props.className)},b("CometVisualCompletionAttributes").IGNORE,{onClick:this.props.onClick,children:i.jsx(b("DraftEditor.react"),{ariaActiveDescendantID:a?a["aria-activedescendant"]:void 0,ariaControls:a?a["aria-controls"]:void 0,ariaDescribedBy:this.props.ariaDescribedBy,ariaLabel:String((a=this.props.ariaLabel)!=null?a:this.props.placeholder),editorRef:this.props.onInputRefUpdated,editorState:b("getEditorStateFromUFI2ComposerState")(this.props.composerState),handleBeforeInput:this.$2,handleKeyCommand:this.$3,handlePastedFiles:this.props.handlePastedFiles,keyBindingFn:this.$4,onBlur:this.props.onBlur,onChange:this.$1,onFocus:this.props.onFocus,placeholder:String(this.props.placeholder),preventScroll:!0,readOnly:this.props.composerState.isLocked,spellCheck:!0,stripPastedStyles:!0,webDriverTestID:this.props.webDriverTestID})}))};return c}(i.Component);e.exports=a}),null);
__d("removeEmojiFromEditorState",["keyCommandBackspaceEmoji","keyCommandDeleteEmoji"],(function(a,b,c,d,e,f){"use strict";function a(a,c){switch(a){case"backspace":return b("keyCommandBackspaceEmoji")(c)||c;case"delete":return b("keyCommandDeleteEmoji")(c)||c;default:return c}}e.exports=a}),null);
__d("getUpgradedUFI2EmojiComposerPlugin",["EmojiRenderer","EmojiSpan.react","installUFI2ComposerInputDecorators","removeEmojiFromEditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c={component:b("EmojiSpan.react"),props:a,strategy:function(a,c){b("EmojiRenderer").parse(a.getText()).forEach(function(a){var b=a.length;a=a.offset;c(a,a+b)})}};return{handleKeyCommand:function(a,c,d){var e=a.composerState.inputState;if(e.__type==="editor-state-based"){var f;switch(c){case"backspace":f="backspace";break;case"delete":f="delete";break}if(f){var g=b("removeEmojiFromEditorState")(f,d);if(e.editorState!==g){a.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:g})})});return"handled"}}}return a.handleKeyCommand?a.handleKeyCommand(c,d):"not-handled"},installEmojiInputDecorator:function(a){return b("installUFI2ComposerInputDecorators")(a,c)}}}e.exports=a}),null);
__d("EmoticonSpan.react",["cx","EmoticonsList","FBEmojiResource","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.children,d=a.contentState,e=a.size;a=a.entityKey;if(a==null)return null;d=d.getEntity(a).getData();a=b("EmoticonsList").emoji[d.type];d=new(b("FBEmojiResource"))(a);a=d.getImageURL(e);return a==null?null:h.jsx("span",{className:"_3gl1 _5zz4",style:{backgroundImage:"url("+a+")",backgroundSize:e+"px "+e+"px",height:e+"px",width:e+"px"},children:h.jsx("span",{className:"_ncl",children:c})})}a.defaultProps={size:16};e.exports=a}),null);
__d("replaceEmoticonsWithEntitiesInEditorState",["invariant","CharacterMetadata","EditorState","EmoticonsList","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=b("immutable").List;function a(a){var c=a.getSelection();if(!c.isCollapsed())return a;var d=c.getAnchorKey(),e=a.getCurrentContent(),f=e.getBlockMap().reduce(function(a,e){var f=e.getText(),i=f.split(b("EmoticonsList").regexp);if(i.length===1)return a;var j=i.splice(0,1).join(""),k=[];while(i.length){var l=i.splice(0,2);if(i.length<2&&l[0].length+(l[1]?l[1].length:0)===0)continue;l.length===2||g(0,5882,l.join(", "));k.push(l)}var m=e.getKey()===d,n=j.length,o=e.getCharacterList(),p=f;k.forEach(function(d,f){var g=d[0],i=d[1];if(!b("EmoticonsList").emotes[i]||e===a.getLastBlock()&&f===k.length-1||m&&c.anchorOffset>=n+g.length&&c.anchorOffset<=n+g.length+i.length||function(){for(var a=0;a<i.length;a++)if(e.getEntityAt(n+g.length+a)!=null)return!0;return!1}())n+=d[0].length+d[1].length;else{f=a.createEntity("EMOTICON","IMMUTABLE",{originalEmoticon:i,type:b("EmoticonsList").emotes[i]});d=f.getLastCreatedEntityKey();f=n+g.length;p=p.slice(0,f)+"\u3000"+p.slice(f+i.length);o=o.slice(0,f).concat(h.of(b("CharacterMetadata").applyEntity(o.get(f),d)),o.slice(f+i.length));n=f+1}});if(f!==p){l=e.merge({characterList:o,text:p});var q;if(m){i=c.getAnchorOffset()-(e.getLength()-l.getLength());q={selectionAfter:c.merge({anchorOffset:i,focusOffset:i}),selectionBefore:c}}return a.merge(babelHelpers["extends"]({blockMap:a.getBlockMap().set(e.getKey(),l)},q))}return a},e);if(f===e)return a;else return b("EditorState").push(a,f,"insert-characters")}e.exports=a}),null);
__d("getUpgradedUFI2EmoticonsComposerPlugin",["EmoticonSpan.react","React","getEntityMatcher","installUFI2ComposerInputDecorators","replaceEmoticonsWithEntitiesInEditorState"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a,c){a.inputProps.onComposerStateChange(function(a){a=babelHelpers["extends"]({},a,c(a));var d=a.inputState;switch(d.__type){case"editor-state-based":var e=b("replaceEmoticonsWithEntitiesInEditorState")(d.editorState);if(e!==d.editorState)return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},d,{editorState:e})});else return a;default:return a}})}function a(a){var c={component:b("EmoticonSpan.react"),props:a,strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"})};return{installPlugin:function(a){a.onInstallContentBlockToTextWithEntitiesInputMessageMappers(function(a,b,c,d){d=a.getEntityAt(c);if(d==null)return null;a=b.getEntity(d);if(a.getType()==="EMOTICON"){c=a.getData();b=c.originalEmoticon;return{message:{text:b}}}return null})},render:function(a,d){a.subscriptionsHandler;var e=babelHelpers.objectWithoutPropertiesLoose(a,["subscriptionsHandler"]);return g.jsx(d,babelHelpers["extends"]({},e,{inputProps:babelHelpers["extends"]({},e.inputProps,{composerState:b("installUFI2ComposerInputDecorators")(e.inputProps.composerState,c),onComposerStateChange:function(b){return h(a,b)}})}))}}}e.exports=a}),null);
__d("HashtagSpan.react",["cx","React"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return h.jsx("span",babelHelpers["extends"]({},this.props,{"data-offset-key":this.props.offsetKey,className:"_5zk7",spellCheck:!1,children:this.props.children}))};return b}(h.Component);e.exports=a}),null);
__d("getUpgradedUFI2HashtagComposerPlugin",["HashtagSpan.react","getHashtagMatches","installUFI2ComposerInputDecorators"],(function(a,b,c,d,e,f){"use strict";function a(){var a={component:b("HashtagSpan.react"),props:{},strategy:b("getHashtagMatches")};return{installHashtagInputDecorator:function(c){return b("installUFI2ComposerInputDecorators")(c,a)}}}e.exports=a}),null);
__d("getUpgradedUFI2PrefillMentionComposerPlugin",["DraftModifier","EditorState","FBLogger","SelectionState","createMentionEntityForContentState","getPlainTextFromUFI2InputState","gkx","replaceSelectionWithMention"],(function(a,b,c,d,e,f){"use strict";function g(a,c){var d=a.inputState;switch(d.__type){case"editor-state-based":var e=b("getPlainTextFromUFI2InputState")(d),f=d.editorState,g=!1;if(b("gkx")("1328264")&&e.length>0&&f.getCurrentContent().getBlocksAsArray().length===1){g=!0;var h=null,i=f.getCurrentContent().getFirstBlock(),j=i.getText().trim();for(var k=0;k<j.length;k++){var l=i.getEntityAt(k);l=l!=null?f.getCurrentContent().getEntity(l):null;if(l==null||l.getType()!=="MENTION"||k>0&&l.getData().id!==h){g=!1;break}h=l.getData().id}}if(e.trim()===""||g){l=b("replaceSelectionWithMention")(c,f,new(b("SelectionState"))({anchorKey:f.getCurrentContent().getFirstBlock().getKey(),anchorOffset:0,focusKey:f.getCurrentContent().getLastBlock().getKey(),focusOffset:f.getCurrentContent().getLastBlock().getLength()}),b("createMentionEntityForContentState")).getCurrentContent();i=c.getTitle().length;f=b("EditorState").push(f,b("DraftModifier").insertText(l,b("SelectionState").createEmpty(f.getCurrentContent().getLastBlock().getKey()).merge({anchorOffset:i,focusOffset:i})," "),"insert-fragment");return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},d,{editorState:b("EditorState").moveFocusToEnd(f)})})}else return null;case"plain-text":d.text.trim()===""&&b("FBLogger")("ufi2").warn("Someone called for the composer to be prefilled with a mention but the composer state was of the `plain-text` type. Adding mentions to a plain-text composer is not yet implemented (T29402486).");return null;default:return d.__type}}function a(){return{handleCommand:function(a,b){a.__type==="PrefillMention"&&b.onComposerStateChange(function(b){return g(b,a.mentionableEntity)}),b.handleCommand&&b.handleCommand(a)}}}e.exports=a}),null);
__d("UFI2BanActorMutation",["RelayModern","forEachUFI2DisplayCommentsConnection","UFI2BanActorMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("UFI2BanActorMutation.graphql");e.exports={commit:function(a,c){var d=c.actorId,e=c.feedbackId,f=c.pageId,g=c.targetUserId,j=c.undoBan;c.feedbackSource;c=function(a){if(e==null)return;var c=a.get(e);if(!c)return;b("forEachUFI2DisplayCommentsConnection")(a,c,function(a){a=a.getLinkedRecords("edges");if(!a)return;a.forEach(function(a){if(!a)return;a=a.getLinkedRecord("node");if(!a)return;var b=a.getLinkedRecord("author");if(!b)return;if(b.getValue("id")===g){b=a.getValue("is_hidden_by_content_owner");a.setValue(j&&b!==!0?"none":"spam","spam_display_mode");a.setValue(!j,"is_author_banned_by_content_owner")}})})};return h(a,{mutation:i,optimisticResponse:{feedback_page_ban:{__typename:"FeedbackPageBanResponsePayload"}},optimisticUpdater:c,updater:c,variables:{input:{actor_id:d,ban_action:j?"UNDO_BAN":"BAN",page_id:f,target_user_id:g}}})}}}),null);
__d("BinarySearch",["unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a={GREATEST_LOWER_BOUND:"GREATEST_LOWER_BOUND",GREATEST_STRICT_LOWER_BOUND:"GREATEST_STRICT_LOWER_BOUND",LEAST_STRICT_UPPER_BOUND:"LEAST_STRICT_UPPER_BOUND",LEAST_UPPER_BOUND:"LEAST_UPPER_BOUND",NEAREST:"NEAREST"};var g=function(a,c){if(typeof a!=="number"||typeof c!=="number")throw b("unrecoverableViolation")("The default comparator can only be used with sequences of numbers.","comet_infra");return a-c},h={GREATEST_LOWER_BOUND:a.GREATEST_LOWER_BOUND,GREATEST_STRICT_LOWER_BOUND:a.GREATEST_STRICT_LOWER_BOUND,LEAST_STRICT_UPPER_BOUND:a.LEAST_STRICT_UPPER_BOUND,LEAST_UPPER_BOUND:a.LEAST_UPPER_BOUND,NEAREST:a.NEAREST,find:function(a,b,c,d,e){e===void 0&&(e=g);var f=h.LEAST_UPPER_BOUND;f=h.findBound(a,b,c,d,e,f);if(c<=f&&f<d){c=a(f);return e(c,b)===0?c:void 0}else return void 0},findIndex:function(a,b,c,d,e){e===void 0&&(e=g);var f=h.LEAST_UPPER_BOUND;f=h.findBound(a,b,c,d,e,f);if(c<=f&&f<d)return e(a(f),b)===0?f:-1;else return-1},findBound:function(a,c,d,e,f,g){switch(g){case h.LEAST_UPPER_BOUND:return h.leastUpperBound(a,c,d,e,f);case h.GREATEST_LOWER_BOUND:return h.greatestLowerBound(a,c,d,e,f);case h.LEAST_STRICT_UPPER_BOUND:return h.leastStrictUpperBound(a,c,d,e,f);case h.GREATEST_STRICT_LOWER_BOUND:return h.greatestStrictLowerBound(a,c,d,e,f);case h.NEAREST:return h.nearest(a,c,d,e,f);default:throw b("unrecoverableViolation")("Invalid mode "+g,"comet_infra")}},leastUpperBound:function(a,b,c,d,e){c=c;d=d;while(c+1<d){var f=c+Math.floor((d-c)/2);e(a(f),b)>=0?d=f:c=f}return c<d&&e(a(c),b)>=0?c:d},greatestLowerBound:function(a,b,c,d,e){return h.leastStrictUpperBound(a,b,c,d,e)-1},leastStrictUpperBound:function(a,b,c,d,e){c=c;d=d;while(c+1<d){var f=c+Math.floor((d-c)/2);e(a(f),b)>0?d=f:c=f}return c<d&&e(a(c),b)>0?c:d},greatestStrictLowerBound:function(a,b,c,d,e){return h.leastUpperBound(a,b,c,d,e)-1},nearest:function(a,b,c,d,e){var f=h.greatestLowerBound(a,b,c,d,e),g=Math.abs(e(a(f),b));e=Math.abs(e(a(f+1),b));return g<e?Math.max(f,c):Math.min(f+1,d-1)},findInArray:function(a,b,c){return h.find(function(b){return a[b]},b,0,a.length,c)},findIndexInArray:function(a,b,c){return h.findIndex(function(b){return a[b]},b,0,a.length,c)},findBoundInArray:function(a,b,c,d){return h.findBound(function(b){return a[b]},b,0,a.length,c,d)}};e.exports=h}),null);
__d("KeyframesPerformanceLog",["performanceNow"],(function(a,b,c,d,e,f){"use strict";var g,h=60;a=function(){function a(a,b){this.$1=0,this.$2=-1,this.$3=-1,this.$6=a,this.$5=b,this.$6=a,this.reset()}var c=a.prototype;c.onNextFrame=function(a){this.$7=a};c.start=function(){if(this.$2<0||this.$3>=0){var a=(g||(g=b("performanceNow")))();this.$2<0?this.$2=a:this.$3>=0&&(this.$2+=a-this.$3,this.$3=-1);this.$5&&this.$5("start")}};c.pause=function(){this.$3<0&&this.$2>=0&&(this.$3=(g||(g=b("performanceNow")))(),this.$5&&this.$5("pause"))};c.reset=function(){this.$1=0,this.$4={one:0,two:0,four:0,eight:0},this.$3=-1,this.$2=-1};c.addFrame=function(){this.$1+=1,this.$7&&(this.$7(),this.$7=null)};c.addFrameDrop=function(a){a>=8?this.$4.eight+=1:a>=4?this.$4.four+=1:a>=2?this.$4.two+=1:a>=1&&(this.$4.one+=1)};c.finish=function(){if(this.$2>=0){var a=(g||(g=b("performanceNow")))(),c=this.$3>=0?a-this.$3:0;a=Math.max(Math.floor(a-this.$2-c),1);c=this.$1?this.$1/a*1e3:h;this.$6({animation_duration:a,display_refresh_rate:h,eight_frame_drop_count:this.$4.eight,four_frame_drop_count:this.$4.four,frame_rate:c,one_frame_drop_count:this.$4.one,two_frame_drop_count:this.$4.two});this.reset()}};return a}();e.exports=a}),null);
__d("KeyframesPluginsLoader",["Promise","Bootloader","flatbuffers"],(function(a,b,c,d,e,f){"use strict";var g={DynamicProperties:function(a){return b("Bootloader").loadModules(["KeyframesPluginDynamicProperties","KeyframesPluginDynamicPropertiesSchema"],a,"KeyframesPluginsLoader")},LayerName:function(a){return b("Bootloader").loadModules(["KeyframesPluginLayerName","KeyframesPluginLayerNameSchema"],a,"KeyframesPluginsLoader")},LayerTags:function(a){return b("Bootloader").loadModules(["KeyframesPluginLayerTags","KeyframesPluginLayerTagsSchema"],a,"KeyframesPluginsLoader")},RandomSubdocument:function(a){return b("Bootloader").loadModules(["KeyframesPluginRandomSubdocument","KeyframesPluginRandomSubdocumentSchema"],a,"KeyframesPluginsLoader")},Sound:function(a){return b("Bootloader").loadModules(["KeyframesPluginSound","KeyframesPluginSoundSchema"],a,"KeyframesPluginsLoader")},SubdocumentSwap:function(a){return b("Bootloader").loadModules(["KeyframesPluginSubdocumentSwap","KeyframesPluginSubdocumentSwapSchema"],a,"KeyframesPluginsLoader")},TrimPath:function(a){return b("Bootloader").loadModules(["KeyframesPluginTrimPath","KeyframesPluginTrimPathSchema"],a,"KeyframesPluginsLoader")}};function h(a,b){return g[a]?g[a](b):null}function i(a){a=a.map(function(a){return new(b("Promise"))(function(b,c){var d=h(a,function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];b(c)});d||c("Unknown plugin "+a)})});return b("Promise").all(a)}a=function(){a.fromPluginTable=function(b){return i(b).then(function(c){return new a(b,c)})};a.getSupportedPlugins=function(){return g};function a(a,b){this.instances=[],this.$1={},this.$2={},this.$4=a,this.$3=b}var c=a.prototype;c.getPluginTable=function(){return this.$4};c.getPluginsForLayer=function(a){return this.$1[a]};c.maybeInstantiatePluginsForLayer=function(a){var c=a.id();if(!this.$2[c]){var d=a.pluginsLength();if(d)for(var e=0;e<d;e++){var f=a.plugins(e),g=new(b("flatbuffers").ByteBuffer)(f.contentArray());f=f.index();if(this.$3[f]){var h=this.$3[f],i=h[0];h=h[1];f="getRootAsPlugin"+this.$4[f];h=h[f](g);f=new i(h,a);this.$1[c]||(this.$1[c]=[]);this.$1[c].push(f);this.instances.push(f);f.animationDidLoad()}}this.$2[c]=!0}};return a}();e.exports=a}),null);
__d("KeyframesVersion",[],(function(a,b,c,d,e,f){"use strict";var g="2.0.0";a={getCurrentVersion:function(){return g}};e.exports=a}),null);
__d("FBKeyframesLoggedSession",["BanzaiLogger","CurrentUser","FacebookAppIDs","FunnelLogger","KeyframesPerformanceLog","KeyframesPluginsLoader","KeyframesVersion","gkx","once","performanceNow","uuid"],(function(a,b,c,d,e,f){"use strict";var g;a=!1;var h=b("gkx")("1136485"),i="KEYFRAMES_FUNNEL",j="KeyframesFramePerfLoggerConfig",k=2,l=9e18,m={appid:b("FacebookAppIDs").WWW,appversion:null,connection_class:null,country:null,deviceid:null,extras:null,isemployee:b("CurrentUser").isEmployee()?1:0,name:"keyframes_frame_perf_report",vc:null,year_class:null};function n(a){return parseInt(a.match(/[a-f0-9]+$/gi),16)}function o(){var a=(g||(g=b("performanceNow")))();return function(){return Math.floor((g||(g=b("performanceNow")))()-a)}}function p(){return{value:Date.now()}}c=function(){function a(c,d){var e=this;this.$2=!1;this.$3=0;this.$5=1;this.$11=b("KeyframesVersion").getCurrentVersion();this.$15=function(b){e.$13("play_ended");e.$3++;if(e.$3===e.$5){b=Object.assign({},b,m,{animation_duration:String(b.animation_duration),asset_id:e.$6.assetID||null,asset_name:e.$6.assetID?null:e.$6.assetName,display_refresh_rate:String(b.display_refresh_rate),keyframes_version:e.$11,project_name:e.$6.projectName,session_id:e.$9});a.performanceLoggingMethod(b);e.$5<l&&(e.$5*=k)}};this.$16=function(a){switch(a){case"start":e.$13("play_started");return;case"pause":e.$13("play_ended");return}};this.$10=d||p();this.$6=c;this.$9=b("uuid")();this.$4=n(this.$9)}a.performanceLoggingMethod=function(a){b("BanzaiLogger").log(j,a)};var c=a.prototype;c.startDecode=function(a){var c=this;if(!this.$1){this.$12();this.$13("asset_decode_started",a);var d=o();this.$1=b("once")(function(a,b){c.$13("asset_decode_ended",a,{"time_since:asset_decode_started":d(),plugins_decoded:b||[]})})}return this.$1};c.error=function(a){this.$12(),this.$1?this.$14("asset_decode_failed",a):this.$14("asset_request_failed",a)};c.getUUID=function(){return this.$9};c.getInstanceID=function(){return this.$4};c.getPerformanceLogIfEnabled=function(){var a=this;if(h){if(!this.$7){var c=this.$12(),d=new(b("KeyframesPerformanceLog"))(this.$15,this.$16);d.onNextFrame(function(){return a.$13("first_frame_rendered",p(),{"time_since:session_started":c()})});this.$7=d}return this.$7}return null};c.$12=function(){this.$8||(h&&(b("FunnelLogger").startFunnelAtTime(i,this.$10.value,this.$4),this.$13("session_started",this.$10,{supported_plugins:Object.keys(b("KeyframesPluginsLoader").getSupportedPlugins())})),this.$8=o());return this.$8};c.$13=function(a,c,d){c=c||p(),h&&(this.$2||b("FunnelLogger").appendActionAtTimeWithPayload(i,c.value,this.$4,a,Object.assign({},this.$17(),d)))};c.$14=function(a,c){c=c||p(),h&&(this.$2||(this.$13("session_failed",c,{fail_reason:a}),b("FunnelLogger").endFunnelAtTime(i,c.value,this.$4),this.$2=!0))};c.$17=function(){return{asset_id:this.$6.assetID||null,asset_name:this.$6.assetID?null:this.$6.assetName,asset_source:"network",keyframes_version:this.$11,project_name:this.$6.projectName,session_id:this.$9}};return a}();e.exports=c}),null);
__d("KeyframesVideoUtils",["Promise"],(function(a,b,c,d,e,f){"use strict";var g=window.setTimeout,h=4;function a(a){var b=document.createElement("video");b.setAttribute("webkit-playsinline","");b.setAttribute("playsinline","");b.autoplay=!1;b.src=a;b.currentTime=0;a.startsWith("blob:")||(b.crossOrigin="anonymous");return b}function c(a,c){return new(b("Promise"))(function(b,d){var e=function b(){a.pause(),a.currentTime=c,a.removeEventListener("canplaythrough",b),f()},f=function c(){a.readyState===h?b(a):g(c,10)},i=function b(c){a.removeEventListener("error",b),d(c)};a.currentTime=c;a.addEventListener("error",i);a.readyState===h?b(a):a.addEventListener("canplaythrough",e)})}e.exports={createVideo:a,loadVideo:c}}),null);
__d("KeyframesAssetDecoder",["Promise","BlobFactory","KeyframesPluginsLoader","KeyframesSchema","KeyframesVideoUtils","flatbuffers","promiseDone","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";var g=b("KeyframesSchema").Document,h="medium",i=a.URL||a.webkitURL||{};function j(a){a=new(b("flatbuffers").ByteBuffer)(a);return g.bufferHasIdentifier(a)?g.getRootAsDocument(a):null}function k(a){return new(b("Promise"))(function(b,c){var d=new Image();d.onload=function(){return b(d)};d.onerror=function(b){return c("Decode: error requesting image uri "+a)};d.src=a})}function l(a){a=b("KeyframesVideoUtils").createVideo(a);return b("KeyframesVideoUtils").loadVideo(a,0)}function m(b,c,d){return a.createImageBitmap?b.width<c||b.height<d?o(b,c,d).then(function(b){return a.createImageBitmap(b,0,0,c,d)["catch"](function(a){return b})}):a.createImageBitmap(b,0,0,b.width,b.height,{resizeWidth:c,resizeHeight:d,rezizeQuality:h})["catch"](function(a){return o(b,c,d)}):o(b,c,d)}function n(a,c,d){a.width=c;a.height=d;return b("Promise").resolve(a)}function o(a,c,d){return new(b("Promise"))(function(b){var e=document.createElement("canvas");e.width=c;e.height=d;var f=e.getContext("2d");f.drawImage(a,0,0,c,d);b(e)})}function p(a,b){var c=[];for(var d=0;d<a.length;d++){var e=a[d],f=b[d].size().width(),g=b[d].size().height();if(f!==e.width||g!==e.height){var h=document.createElement("canvas");h.width=f;h.height=g;var i=h.getContext("2d");i.drawImage(e,0,0,f,g);c.push(h)}else c.push(e)}return c}function q(a,c,d){if(!i.createObjectURL)return b("Promise").reject("URL API not supported");var e=i.createObjectURL(a);c=k(e);b("promiseDone")(c,function(){return b("requestIdleCallback")(function(){return i.revokeObjectURL(e)})});return c}function r(c){if(b("BlobFactory").isSupported()){var d=c.contentArray();if(!d)return b("Promise").reject("Decode: tried to decode a null bitmap");var e=b("BlobFactory").getBlob([d]),f=c.size().width(),g=c.size().height();return a.createImageBitmap?a.createImageBitmap(e,0,0,f,g)["catch"](function(a){return q(e,f,g)}):q(e,f,g)}return b("Promise").reject("Decode: browser does not support bitmap creation")}function s(a){if(b("BlobFactory").isSupported()){var c=a.size();a=a.contentArray();if(!a)return b("Promise").reject("Decode: tried to decode a null video");a=b("BlobFactory").getBlob([a]);if(!i.createObjectURL)return b("Promise").reject("URL API not supported");var d=i.createObjectURL(a);a=l(d).then(function(a){return n(a,c.width(),c.height())});b("promiseDone")(a,function(){b("requestIdleCallback")(function(){return i.revokeObjectURL(d)})});return a}return b("Promise").reject("Decode: browser does not support video creation")}function t(a){var b=[];for(var c=a.pluginsLength()-1;c>=0;c--)b.unshift(a.plugins(c));return b.length?b:null}function u(a){var b=[];for(var c=a.bitmapsLength()-1;c>=0;c--)b.unshift(a.bitmaps(c));return b}function v(a){var b=[];for(var c=a.videosLength()-1;c>=0;c--)b.unshift(a.videos(c));return b}function w(a){var b={};for(var c=0;c<a.length;c++){var d=a[c].name();d&&(b[d]={index:c,width:a[c].size().width(),height:a[c].size().height()})}return b}function x(a){var b={};for(var c=0;c<a.length;c++){var d=a[c].name();d&&(b[d]={index:c,width:a[c].size().width(),height:a[c].size().height()})}return b}function y(a){var b=[];for(var c,d=a.subdocumentsLength()-1;d>=0;d--)c=a.subdocuments(d),b.unshift(c);return b}function z(a){a=j(a);return!a?b("Promise").reject("Decode: could not create flatbuffer doc"):A(a)}function A(a){var c=u(a),d=x(c),e=v(a),f=w(e),g=c.filter(function(a){return a.contentLength()||!a.name()}).map(r);e=e.filter(function(a){return a.contentLength()||!a.name()}).map(s);var h=y(a).map(A),i=t(a);i=i?b("KeyframesPluginsLoader").fromPluginTable(i):b("Promise").resolve(null);return b("Promise").all([b("Promise").all(g),b("Promise").all(e),i,b("Promise").all(h)]).then(function(b){var e=b[0],g=b[1],h=b[2];b=b[3];return{bitmaps:p(e,c),bitmapNames:d,videos:g,videoNames:f,doc:a,pluginsLoader:h,subassets:b}})}function B(a){return!Uint8Array?b("Promise").reject("Decode: typed arrays not supported"):b("Promise").resolve(new Uint8Array(a))}function C(a,c){var d={},e=[],f=Object.entries(a);a=function(){var a=f[g],h=a[0];a=a[1];a=c(a,h);e.push(a);b("promiseDone")(a,function(a){return d[h]=a})};for(var g=0;g<f.length;g++)a();return b("Promise").all(e).then(function(){return d})}function D(a,c,d){if(!a.bitmapNames[c]){var e=Object.keys(a.bitmapNames).join(",");return b("Promise").reject("Decode: missing replacement bitmap name "+c+", available names: "+e)}e=a.bitmapNames[c];var f=e.index;c=e.width;e=e.height;return m(d,c,e).then(function(b){a.bitmaps[f]=b})}function E(a,c,d){if(!a.videoNames[c]){var e=Object.keys(a.videoNames).join(",");return b("Promise").reject("Decode: missing replacement video name "+c+", available names: "+e)}e=a.videoNames[c];var f=e.index;c=e.width;e=e.height;return n(d,c,e).then(function(b){a.videos[f]=b})}function F(a){var b=babelHelpers["extends"]({},a);b.bitmaps=a.bitmaps.slice();return b}var G={fromDocumentBytes:function(a){if(a instanceof ArrayBuffer)return B(a).then(z);else if(a instanceof Uint8Array)return z(a);return b("Promise").reject("Decode: unsupported byte container passed")},replaceBitmapsWithURIs:function(a,b){return C(b,function(a){return k(a)}).then(function(b){return G.replaceBitmapsWithImageSources(a,b)})},replaceBitmapsWithImageSources:function(a,b){var c=F(a);return C(b,function(a,b){return D(c,b,a)}).then(function(){return c})},replaceVideosWithURIs:function(a,b){return C(b,l).then(function(b){return G.replaceVideosWithVideoSources(a,b)})},replaceVideosWithVideoSources:function(a,b){var c=F(a);return C(b,function(a,b){return E(c,b,a)}).then(function(){return c})}};e.exports=G}),null);
__d("KeyframesCanvasPolyfills",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a.getTransform!==void 0)return;else a.currentTransform?a.getTransform=function(){var b=a.currentTransform;return{a:b.a,b:b.b,c:b.c,d:b.d,e:b.e,f:b.f}}:a.mozCurrentTransform!==void 0?a.getTransform=function(){var b=a.mozCurrentTransform;return{a:b[0],b:b[1],c:b[2],d:b[3],e:b[4],f:b[5]}}:a.getTransform=function(){return g}}var g={a:1,b:0,c:0,d:1,e:0,f:0};e.exports={addGetTransformPolyfill:a}}),null);
__d("KeyframesCanvasPool",["KeyframesCanvasPolyfills","nullthrows"],(function(a,b,c,d,e,f){"use strict";var g=b("KeyframesCanvasPolyfills").addGetTransformPolyfill;a=function(){function a(a){var b=this;this.$4=function(a){a.canvas.width=b.$1.width.physical,a.canvas.height=b.$1.height.physical,a.canvas.style.width=b.$1.width.logical+"px",a.canvas.style.height=b.$1.height.logical+"px"};this.$1=a;this.$2=[];this.$3=[]}var c=a.prototype;c.getCanvas=function(){if(this.$2.length){var a=this.$2.pop();this.$3.push(a);return a}else{a=document.createElement("canvas");var c=b("nullthrows")(a.getContext("2d"));g(c);a={canvas:a,ctx:c};this.$4(a);this.$3.push(a);return a}};c.clearAllAllocated=function(){var a=this;this.$3.forEach(function(b){b.ctx.clearRect(0,0,Math.max(a.$1.width.physical,a.$1.width.intrinsic),Math.max(a.$1.height.physical,a.$1.height.intrinsic))},this)};c.freeAll=function(){this.$2=[].concat(this.$3,this.$2),this.$3=[]};c.resizeAll=function(){this.$2.forEach(this.$4,this),this.$3.forEach(this.$4,this)};return a}();e.exports=a}),null);
__d("KeyframesDimensions",["invariant","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";var h=b("WebPixelRatio").get(),i=function(){function a(a){this.overridden=!1,this.intrinsic=a,this.$1(a)}var b=a.prototype;b.$1=function(a){this.logical=a,this.physical=Math.floor(this.logical*h)};b.scale=function(a,b){this.overridden&&g(0,1136),this.$1(a*b)};b.override=function(a){this.overridden=!0,this.$1(a)};b.reset=function(){this.overridden=!1,this.$1(this.intrinsic)};b.getPhysicalChangeRatio=function(){return this.physical/this.intrinsic};return a}();a=function(){function a(a,b){this.ratio=b?a/b:0,this.width=new i(a),this.height=new i(b)}var b=a.prototype;b.setWidth=function(a){this.width.override(a),this.height.overridden||this.height.scale(a,this.ratio?1/this.ratio:0)};b.setHeight=function(a){this.height.override(a),this.width.overridden||this.width.scale(a,this.ratio)};b.reset=function(){this.height.reset(),this.width.reset()};return a}();e.exports=a}),null);
__d("KeyframesLoop",["Run","TimeSlice","emptyFunction","gkx","performanceNow","requestAnimationFramePolyfill"],(function(a,b,c,d,e,f){"use strict";var g,h=1e3,i=new Set();function j(a){var c=(g||(g=b("performanceNow")))();a.callback(Math.min(c-(a.previousTime||c),h));a.previousTime=c;a.framesRemaining-=1;a.framesRemaining<=0&&a.cancel()}function k(a){i.size>0&&(i.forEach(j),b("requestAnimationFramePolyfill")(k))}b("gkx")("708253")||b("Run").onLeave(function(){i.forEach(function(a){return a.cancel()})});window.addEventListener("focus",function(){i.forEach(function(a){return a.previousTime=(g||(g=b("performanceNow")))()-16.67})});a=function(){function a(a){this.framesRemaining=Infinity,this.callback=a,this.previousTime=0}var c=a.prototype;c.start=function(a){a===void 0&&(a=Infinity),this.framesRemaining=a,this.$1||(i.size===0&&b("requestAnimationFramePolyfill")(k),i.add(this),this.previousTime=(g||(g=b("performanceNow")))(),this.$1=b("TimeSlice").getGuardedContinuation("KeyframesLoop"))};c.cancel=function(){this.$1&&(this.$1(b("emptyFunction")),this.$1=null,i["delete"](this))};c.isRunning=function(){return!!this.$1};return a}();e.exports=a}),null);
__d("KeyframesTrackMattes",[],(function(a,b,c,d,e,f){"use strict";e.exports={1:"destination-in",2:"destination-out"}}),null);
__d("KeyframesVideoManager",["regeneratorRuntime","Promise","KeyframesVideoUtils"],(function(a,b,c,d,e,f){"use strict";var g=.2,h=100,i=[.85,1.15];e.exports=function(){function a(a){this.$1=a,this.$3=1/a.doc.frameRate(),this.$2=l(a.doc.rootLayer(),a),this.$4=this.$5()}var c=a.prototype;c.getVideos=function(){return this.$1.videos};c.getTimeWindows=function(){return this.$2};c.forEach=function(a){this.getVideos().forEach(a)};c.pause=function(){this.forEach(function(a){a.pause()})};c.mute=function(){this.forEach(function(a){a.muted=!0})};c.unMute=function(){this.forEach(function(a){a.muted=!1})};c.renderProgress=function(a){var b=this;this.$2.forEach(function(c,d){var e=c.video,f=k(c,a),h=j(c,a);h=b.$1.doc.duration()*h;var l=Math.abs(h-e.currentTime);c=b.$1.doc.duration()*(c.toProgress-c.fromProgress);if(l>g&&e.currentTime<c&&h<c){l=(c-e.currentTime)/(c-h);l>=i[0]&&l<=i[1]&&b.changeVideoPlaybackRate(d,l)}f&&e.paused?e.play():f==!1&&e.paused==!1&&(e.pause(),e.currentTime=0)})};c.$5=function(){return this.$2.map(function(a){var b=a.video;return n(function(a){b.playbackRate=a},h,!0)})};c.changeVideoPlaybackRate=function(a,b){this.$4[a](b)};c.seekToProgress=function(a){var c=this,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=this.$2.map(function(d){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:e=d.video;f=0;k(d,a)&&(g=j(d,a),f=m(c.$1.doc.duration()*g));e.pause();e.currentTime=f;h.next=7;return b("regeneratorRuntime").awrap(b("KeyframesVideoUtils").loadVideo(e,f));case 7:case"end":return h.stop()}},null,this)});e.next=3;return b("regeneratorRuntime").awrap(b("Promise").all(d));case 3:case"end":return e.stop()}},null,this)};return a}();function j(a,b){return b-a.fromProgress}function k(a,b){return b>=a.fromProgress&&b<=a.toProgress}function l(a,b){var c=[],d=a.videoIndex();if(d!=-1){var e=b.videos[d];d=b.doc.videos(d);e!=null&&c.push({fromProgress:a.fromProgress(),toProgress:a.toProgress(),name:d!=null?d.name():null,video:e})}for(var d=0;d<a.sublayersLength();d++)c=c.concat(l(a.sublayers(d),b));return c}function m(a){return Math.round(a*100)/100}function n(a,b,c){b===void 0&&(b=100);c===void 0&&(c=!1);var d;return function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=function(){d=null,c||a.apply(void 0,f)},i=c&&!d;clearTimeout(d);d=setTimeout(h,b);i&&a.apply(void 0,f)}}}),null);
__d("KeyframesRenderer",["invariant","Promise","regeneratorRuntime","ErrorGuard","KeyframesCanvasPolyfills","KeyframesCanvasPool","KeyframesCanvasUtils","KeyframesDimensions","KeyframesLoop","KeyframesTrackMattes","KeyframesTween","KeyframesVideoManager","gkx","nullthrows","performanceNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("KeyframesCanvasPolyfills").addGetTransformPolyfill,k=(a=b("KeyframesCanvasUtils")).drawPath,l=a.getCanvasLineCap,m=a.getCanvasStyle,n=a.LINE_JOINS,o=(c=b("KeyframesTween")).maybeTweenColor,p=c.maybeTweenColorArray,q=c.maybeTweenPath,r=c.maybeTweenPoint2,s=c.maybeTweenScalar,t=c.maybeTweenScalarArray,u=c.tweenPointOnPath,v=1,w={ERROR_FRAMEDROP:"ERROR_FRAMEDROP"};d=60;var x=1e3/d,y=1,z="source-over";function A(a,c){return b("gkx")("801076")?(h||(h=b("ErrorGuard"))).guard(a,{name:c}):a}var B=function(){function a(a,b){b===void 0&&(b=100),this.$3=!1,this.$4=0,this.$1=a,this.$2=b}var c=a.prototype;c.callOrIgnoreThrottled=function(){if((i||(i=b("performanceNow")))()>=this.$4){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];this.$5(c)}else this.$3=!0};c.callIfIgnored=function(){if(this.$3){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$5(b)}};c.callImmediately=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$5(b)};c.resetThrottling=function(){this.$4=0};c.$5=function(a){this.$3=!1,this.$4=(i||(i=b("performanceNow")))()+this.$2,this.$1.apply(null,a)};return a}();function C(a,b){if(a.pluginsLoader){a.pluginsLoader.instances.forEach(b);for(var c=a.subassets.length-1;0<=c;c--)C(a.subassets[c],b)}}function D(a,b,c,d){if(a.pluginsLoader){for(var e=a.pluginsLoader.instances.length-1;0<=e;e--)a.pluginsLoader.instances[e].animationWillRenderLayer(b,c,d);for(var e=a.subassets.length-1;0<=e;e--)D(a.subassets[e],b,c,d)}}function E(a,b,c,d){a.save(),a.beginPath(),a.arc(b,c,d,0,2*Math.PI,!0),a.closePath(),a.clip(),a.clearRect(b-d,c-d,d*2,d*2),a.restore()}function F(a,b,c,d){d=r(a,b.rampStart());var e=r(a,b.rampEnd()),f=b.colors(),g=b.positions();f&&g?(f=p(a,f),g=t(a,g)):(f=[o(a,b.colorStart()),o(a,b.colorEnd())],g=[0,1]);if(b.type()===v){var h=b.highlightLength();h=h!==null?s(a,h):0;var i=b.highlightAngle();i=i!==null?s(a,b.highlightAngle()):0;a=d.x;b=d.y;var j=Math.sqrt(Math.pow(d.x-e.x,2)+Math.pow(d.y-e.y,2)),k=Math.acos((e.x-a)/j),l=a+j*h*Math.cos(k-i);k=b-j*h*Math.sin(k-i);i=0;h!==0&&(c.clip(),c.fillStyle=m(f[f.length-1]),c.fill(),E(c,a,b,j));h=c.createRadialGradient(l,k,i,a,b,j)}else h=c.createLinearGradient(d.x,d.y,e.x,e.y);for(var l=0,k=f.length;l<k;l++)h.addColorStop(g[l],m(f[l]));return h}function G(a,c,d,e,f,g,h,i,j){j===void 0&&(j=y);if(h<Math.max(g.fromProgress(),0)||h>Math.min(g.toProgress(),1))return;try{i&&i.maybeInstantiatePluginsForLayer(g)}catch(a){}a=a;var p,t=g.isTrackMatte(),v=g.trackMatteType();if(t||v!==0){var w=a.getTransform();p=c.getCanvas();p.ctx.setTransform(w.a,w.b,w.c,w.d,w.e,w.f);p.isTrackMatte=t;p.trackMatteType=v;p.ctx.globalCompositeOperation=z;a=p.ctx}a.save();w=g.position();if(w){t=u(h,w);v=t.x;w=t.y;a.translate(v,w)}else{t=g.xPosition();t&&a.translate(s(h,t),0);v=g.yPosition();v&&a.translate(0,s(h,v))}w=g.rotation();w&&a.rotate(s(h,w));t=g.scale();if(t){v=r(h,t);w=v.x;t=v.y;a.scale(w,t)}v=g.anchorPoint();if(v){w=r(h,v);t=w.x;v=w.y;a.translate(-t,-v)}w=g.opacity();w=w!=null?s(h,w):1;a.globalAlpha=w*j;t=!1;if(i){v=i.getPluginsForLayer(g.id());if(v)for(var x=0;x<v.length;x++)v[x].render(a,h),t=t||v[x].rendersLayer}g.clippingPath()&&(k(a,q(h,g.clippingPath())),a.clip());if(!t&&g.path()){k(a,q(h,g.path()));x=g.gradient();v=g.fillColor();t=!1;var A=!1;x?(a.fillStyle=F(h,x,a),t=!0):v&&(a.fillStyle=m(o(h,v)),t=!0);if(g.strokeWidth()){x=s(h,g.strokeWidth());x>0&&(a.strokeStyle=m(o(h,g.strokeColor())),a.lineJoin=n[g.strokeLineJoin()],a.lineCap=l(g.strokeLineCap()),a.lineWidth=x,A=!0)}g.vectorCompositeOrder()===0?(t&&a.fill(),A&&a.stroke()):(A&&a.stroke(),t&&a.fill())}v=g.bitmapIndex();x=d[v];x&&x.width!==0&&x.height!==0&&a.drawImage(x,0,0);A=g.videoIndex();t=e[A];t!=null&&a.drawImage(t,0,0,t.width,t.height);v=g.subdocumentIndex();if(f[v]){x=f[v].doc.size();a.save();a.beginPath();a.rect(0,0,x.width(),x.height());a.clip();G(a,c,f[v].bitmaps,f[v].videos,f[v].subassets,f[v].doc.rootLayer(),h-g.progressOffset(),f[v].pluginsLoader,w*j);a.restore()}var B;for(var A=0;A<g.sublayersLength();A++){t=G(a,c,d,e,f,g.sublayers(A),h,i,w*j);if(!B&&t&&t.trackMatteType!==void 0)B=t;else if(B&&t&&t.isTrackMatte!==void 0){x=a.getTransform();a.setTransform(1,0,0,1,0,0);B.ctx.setTransform(1,0,0,1,0,0);v=t;B.ctx.globalCompositeOperation=b("KeyframesTrackMattes")[B.trackMatteType===void 0?1:B.trackMatteType];B.ctx.drawImage(v.canvas,0,0);a.drawImage(B.canvas,0,0);a.setTransform(x.a,x.b,x.c,x.d,x.e,x.f);B=void 0;v=void 0}else B&&!t?(a.drawImage(B.canvas,0,0),B=void 0,v=void 0):t&&t.isTrackMatte!==void 0&&(B=void 0,v=void 0)}a.restore();return p}f=function(){function a(a,c){var d=this;this.$5=0;this.$6=0;this.$8=!1;this.$9=!1;this.$10=!1;this.$11=0;this.$16=!1;this.$17=0;this.$18=1;this.$19=1;this.$21=1;this.$22=0;this.$26=function(a){(d.$12||d.$15)&&d.$34(a),!d.$16?d.redrawIfNeeded():(d.$10&&d.$32(),d.$24.renderProgress(d.$11),d.$33(d.$11),d.$11+=a/d.$5,d.$14&&d.$14.callOrIgnoreThrottled(d.$17),d.$11>=d.$21&&(d.$11%=d.$21,d.$19=Math.max(0,d.$19-1),d.$15&&d.$15.finish(),d.$19===0?d.pause():(d.$24.seekToProgress(0),d.$15&&d.$15.start(),d.$11+=d.$22),d.$13&&d.$13(d.$19),d.$30()))};this.$33=A(function(a){a>=0&&a<=1||g(0,750,a),this.$3.clearRect(0,0,this.$23.width.intrinsic,this.$23.height.intrinsic),this.$1.pluginsLoader&&D(this.$1,a,this.$16,this.$8),this.$4.clearAllAllocated(),this.$4.freeAll(),G(this.$3,this.$4,this.$1.bitmaps,this.$1.videos,this.$1.subassets,this.$20,a,this.$1.pluginsLoader),this.$17=a,this.$9=!1,this.$15&&this.$15.addFrame()},"KeyframesRenderer: _renderProgress()");this.$32=A(function(){this.$2.width=this.$23.width.physical,this.$2.height=this.$23.height.physical,this.$2.style.width=this.$23.width.logical+"px",this.$2.style.height=this.$23.height.logical+"px",this.$3.setTransform(1,0,0,1,0,0),this.$3.scale(this.$23.width.getPhysicalChangeRatio(),this.$23.height.getPhysicalChangeRatio()),this.$4.resizeAll(),this.$10=!1,this.$9=!0},"KeyframesRenderer: _resize()");this.$23=new(b("KeyframesDimensions"))(a.doc.size().width(),a.doc.size().height());this.$4=new(b("KeyframesCanvasPool"))(this.$23);this.$2=document.createElement("canvas");this.$3=b("nullthrows")(this.$2.getContext("2d"));j(this.$3);this.$7=new(b("KeyframesLoop"))(this.$26);this.$15=c;this.$24=new(b("KeyframesVideoManager"))(a);this.setDecodedAsset(a);this.$27();this.$25=b("Promise").resolve()}var c=a.prototype;c.play=function(){this.$16||(this.$16=!0,this.isFinished()&&(this.$19=this.$18,this.$11=this.$22),this.$15&&this.$15.start(),this.$7.start());return this};c.pause=function(){this.$16&&(this.$16=!1,this.$15&&this.$15.pause(),this.$9?this.$28():(this.$7.cancel(),this.$14&&this.$14.callIfIgnored(this.$17)));this.$24.pause();this.$29(this.$24.seekToProgress(this.$17));D(this.$1,this.$17,this.$16,this.$8);return this};c.isPlaying=function(){return this.$16};c.isFinished=function(){return this.$19===0};c.isMuted=function(){return this.$8};c.mute=function(){this.$8=!0,this.$24.mute()};c.unMute=function(){this.$8=!1,this.$24.unMute()};c.repeatCount=function(a){this.$18=this.$19=Math.max(1,a);return this};c.repeatForever=function(){return this.repeatCount(Infinity)};c.getRepeatsRemaining=function(){return this.$19};c.seekToProgress=function(a){var b=this;a>=0&&a<=1||g(0,749,a);this.$14&&this.$14.resetThrottling();this.$17=this.$11=a;this.$29(this.$24.seekToProgress(a).then(function(){return b.$28()}));a===0&&this.$30();this.$28();return this};c.setStartAndEndAt=function(a,b){if(a>=b)throw new Error("Cannot set the start time before the end time.");else if(b<=a)throw new Error("Cannot set the end time before the start time.");this.$22=a;this.$21=b;return this};c.setStartAt=function(a){if(a>=this.$21)throw new Error("Cannot set the start time before the end time.");this.$22=a;return this};c.setEndAt=function(a){if(a<=this.$22)throw new Error("Cannot set the end time before the start time.");this.$21=a;return this};c.getDuration=function(){return this.$5};c.getFrameRate=function(){return this.$6};c.getIntrinsicSize=function(){return[this.$23.width.intrinsic,this.$23.height.intrinsic]};c.getWidth=function(){return this.$23.width.logical};c.getHeight=function(){return this.$23.height.logical};c.setWidth=function(a){this.$23.setWidth(a);this.$27();return this};c.setHeight=function(a){this.$23.setHeight(a);this.$27();return this};c.getDecodedAsset=function(){return babelHelpers["extends"]({},this.$1)};c.setDecodedAsset=function(a){this.$1=a;this.$5=a.doc.duration()*1e3;this.$6=a.doc.frameRate();this.$20=a.doc.rootLayer();this.$24=new(b("KeyframesVideoManager"))(a);this.$28();this.$31();return this};c.resetDimensions=function(){this.$23.reset();this.$27();return this};c.onError=function(a){this.$12=a;return this};c.onRepeatEnd=function(a){this.$13=a;return this};c.onProgress=function(a,b){this.$14=a&&new B(a,b);return this};c.getProgress=function(){return this.$17};c.getElement=function(){return this.$2};c.hasPerformanceLogging=function(){return!!this.$15};c.redrawIfNeeded=function(){(this.$10||this.$9)&&(this.$10&&this.$32(),this.$9&&this.$33(this.$17),this.$14&&this.$14.callImmediately(this.$17));return this};c.waitForVideoUpdate=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(this.$25);case 2:case"end":return a.stop()}},null,this)};c.$29=function(a){this.$25=a,b("promiseDone")(a)};c.$27=function(){this.$10=!0,this.$28()};c.$28=function(){this.$9=!0,this.$7.isRunning()||this.$7.start(1)};c.$31=function(){C(this.$1,function(a){return a.animationDidLoad()})};c.$30=function(){var a=this;C(this.$1,function(b){return b.animationWillRepeat(a.$11,a.$19)})};c.$34=function(a){a=Math.round(a/x-1);a>0&&(this.$15&&this.$15.addFrameDrop(a),this.$12&&this.$12(w.ERROR_FRAMEDROP,a))};return a}();e.exports=f}),null);
__d("BDLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={ERROR:"error",WARNING:"warning",INFO:"info"};b={KEY_NOT_FOUND:"key_not_found",APPEND_SIGNAL:"bd_append_signal",APPEND_SIGNAL_FAIL:"bd_append_signal_fail",HB_COLLECTED:"append_hb",HB_COLLECTION_FAILED:"hb_collection_failed",BD_EXCEPTION:"bd_exception",SIGNAL_NOT_IMPLEMENTED:"signal_not_implemented",SIGNAL_VALUE_NULL:"signal_value_null",EMPTY_SIGNAL_CONFIG:"empty_signal_config",INVALID_BUFFER_SIZE:"invalid_buffer_size",INVALID_DURATION:"invalid_duration",SIGNAL_FLAGS_MISSING:"signal_flags_missing",DYNAMIC_SIGNAL_COLLECTION_STARTED:"dynamic_signal_collection_started",INVALID_GUID:"invalid_guid",INVALID_LENGTH:"invalid_length",GET_LOCAL_STORAGE_ERROR:"get_local_storage_error",WEB_STORAGE:"web_storage",PARSE_CONFIG_ERROR:"parse_config_error",HB_START_FAILURE:"hb_start_failure",HB_ALREADY_RUNNING:"hb_already_running",TRY_RESTARTING_HB:"try_restarting_hb",BANZAI_LOG_ERROR:"banzai_log_error"};c="JS";e.exports={LEVELS:a,OPERATIONS:b,COMPONENT_NAME:c}}),null);
__d("BDOperationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBdSessionID=function(a){this.$1.bd_session_id=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setDurationUs=function(a){this.$1.duration_us=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setExceptionStackTrace=function(a){this.$1.exception_stack_trace=a;return this};c.setExceptionType=function(a){this.$1.exception_type=a;return this};c.setIntValue=function(a){this.$1.int_value=a;return this};c.setLevel=function(a){this.$1.level=a;return this};c.setLoggerConfigContext=function(a){this.$1.logger_config_context=a;return this};c.setOperation=function(a){this.$1.operation=a;return this};c.setOperationInfo=function(a){this.$1.operation_info=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setSessionlets=function(a){this.$1.sessionlets=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={bd_session_id:!0,component:!0,duration_us:!0,exception_message:!0,exception_stack_trace:!0,exception_type:!0,int_value:!0,level:!0,logger_config_context:!0,operation:!0,operation_info:!0,sessionlets:!0,time:!0,weight:!0};e.exports=a}),null);
__d("BDOperationLogHelper",["BDLoggingConstants","BDOperationTypedLogger","Random"],(function(a,b,c,d,e,f){"use strict";var g={logInfo:function(a,c,d,e){g.log(a,b("BDLoggingConstants").LEVELS.INFO,c,d,e)},logWarning:function(a,c,d,e){g.log(a,b("BDLoggingConstants").LEVELS.WARNING,c,d,e)},logError:function(a,c,d,e){g.log(a,b("BDLoggingConstants").LEVELS.ERROR,c,d,e)},log:function(a,c,d,e,f){e===void 0&&(e={});if(b("Random").coinflip(g.getFlipSamplingByOperation(d))){if(e===null)throw new Error("opeartion info null");e.source=a;new(b("BDOperationTypedLogger"))().setLevel(c).setDurationUs(f).setOperation(d).setComponent(b("BDLoggingConstants").COMPONENT_NAME).setOperationInfo(e).log()}},getFlipSamplingByOperation:function(a){var c=b("BDLoggingConstants").OPERATIONS;switch(a){case c.APPEND_SIGNAL:case c.HB_COLLECTED:case c.SIGNAL_NOT_IMPLEMENTED:return 1e3;default:return 1}}};e.exports=g}),null);
__d("BDSignalBufferData",[],(function(a,b,c,d,e,f){"use strict";a={};e.exports=a}),null);
__d("SignalValueContext",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.cn=a}var b=a.prototype;b.getSignalValueContextName=function(){return this.cn};return a}();e.exports=a}),null);
__d("BDSignalCollectorBase",["regeneratorRuntime","BDSignalBufferData","SignalValueContext"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.signalType=a}var c=a.prototype;c.executeSignalCollection=function(){throw new Error("Child class responsibility to implement executeSignalCollection")};c.executeAsyncSignalCollection=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.executeSignalCollection());case 2:a=c.sent;return c.abrupt("return",a);case 4:case"end":return c.stop()}},null,this)};a.getSanitizedURI=function(){var a=window.location.href,b=a.indexOf("?");return b<0?a:a.substring(0,b)};c.getContext=function(){return new(b("SignalValueContext"))(a.getSanitizedURI())};c.throwIfNotInitialized=function(){if(!(this.signalType in b("BDSignalBufferData")))throw new Error("Signal is not intialized")};return a}();e.exports=a}),null);
__d("SignalErrorValueTypeDef",[],(function(a,b,c,d,e,f){"use strict";var g="ec",h="en",i="es",j=500;a=function(){function a(a,b,c){this.$1=a,this.$2=b,c!=null&&(this.$3=c.substr(0,j))}var b=a.prototype;b.getErrorCode=function(){return this.$1};b.getErrorName=function(){return this.$2};b.getErrorDetails=function(){return this.$3};b.isEqual=function(a){return this.$1===a.getErrorCode()&&this.$3===a.getErrorDetails()&&this.$2===a.getErrorName()};b.toJSON=function(){var a={};a[g]=this.$1;switch(this.$1){case 0:a[h]=this.$2;a[i]=this.$3;break}return a};return a}();e.exports={SignalErrorValueTypeDef:a}}),null);
__d("SignalValueTypeDef",["BDLoggingConstants","BDOperationLogHelper","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f){"use strict";var g=b("BDLoggingConstants").OPERATIONS,h="SignalValueTypeDef",i="t",j="ctx",k="v",l="e",m={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN",CUSTOM_OBJECT:"CUSTOM_OBJECT",INT_ARRAY:"INT_ARRAY",TOUCH:"TOUCH",MAP:"MAP",LIST:"LIST",SENSOR:"SENSOR",ERROR:"ERROR"};a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e!=null?e:0}var c=a.prototype;c.getTimeStampMS=function(){return this.$1};c.getSignalContext=function(){return this.$2};c.getSignalValue=function(){return this.$3};c.getSignalValueType=function(){return this.$4};c.isEqual=function(a,c){if(a==null){b("BDOperationLogHelper").logWarning(h,g.SIGNAL_VALUE_NULL);return!1}if(this.getSignalValueType()!==a.getSignalValueType())return!1;if(this.getSignalValueType()===m.ERROR&&a.getSignalValueType()===m.ERROR)return this.equalValue(a);var d=!1;c.has(128)&&(d=this.equalValue(a));c.has(256)&&(d=d&&this.getSignalContext()!=null&&a.getSignalContext()!=null&&this.getSignalContext().getSignalValueContextName()===a.getSignalContext().getSignalValueContextName());c.has(512)&&(d=d&&Math.abs(this.getTimeStampMS()-a.getTimeStampMS())<=this.$5);return d};c.equalValue=function(a){if(this.isPrimitiveType())return this.getSignalValue()===a.getSignalValue();throw new Error("Must implement in the subclasses")};c.toJSON=function(a){var c={};a&&(c[i]=this.$1/1e3,this.$2!=null&&(c[j]=this.$2));this.$3==null?c[l]=new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(2):this.addValueOrErrorToJSON(c);return c};c.addValueOrErrorToJSON=function(a){if(this.isPrimitiveType())a[k]=this.$3;else throw new Error("Must implement in the subclasses")};c.isPrimitiveType=function(){switch(typeof this.$3){case"number":case"boolean":case"string":return!0;default:return!1}};return a}();e.exports={SignalValueTypeDef:a,VALUE_TYPES:m,BD_VALUE:k,BD_ERROR:l}}),null);
__d("ErrorSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.ERROR)||this}var d=c.prototype;d.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};d.addValueOrErrorToJSON=function(a){a[b("SignalValueTypeDef").BD_ERROR]=this.getSignalValue().toJSON()};return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("NumberSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.NUMBER)||this}return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("BDConnectionRTTSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","NumberSignalValueType","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();if(navigator.connection&&navigator.connection.rtt!=null){var a=navigator.connection.rtt;a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),a)}else a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.connection.rtt not supported"));return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30004,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("CustomObjectSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.CUSTOM_OBJECT)||this}var d=c.prototype;d.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};d.addValueOrErrorToJSON=function(a){a[b("SignalValueTypeDef").BD_VALUE]=this.getSignalValue().toJSON()};return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("HeartbeatObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.isAppForeground=!0}var b=a.prototype;b.toJSON=function(){return{f:this.isAppForeground}};b.isEqual=function(a){return!1};return a}();e.exports=a}),null);
__d("BDHeartbeatSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatObject"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("HeartbeatObject"))());return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:38e3,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("BDUtils",[],(function(a,b,c,d,e,f){"use strict";a={uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a=="x"?b:b&3|8;return a.toString(16)})}};e.exports=a}),null);
__d("HeartbeatV2Object",["HeartbeatObject"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.id="";c.id=b;return c}var c=b.prototype;c.toJSON=function(){return{f:this.isAppForeground,id:this.id}};return b}(b("HeartbeatObject"));e.exports=a}),null);
__d("BDHeartbeatV2SignalCollector",["BDSignalCollectorBase","BDUtils","CustomObjectSignalValueType","HeartbeatV2Object"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("HeartbeatV2Object"))(b("BDUtils").uuid()));return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:38001,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("StringArrayObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.strings=[],this.strings=a}var b=a.prototype;b.toJSON=function(){return this.strings};b.isEqual=function(b){if(!(b instanceof a))return!1;if(b.strings===this.strings)return!0;if(b.strings.length!==this.strings.length)return!1;for(var c=0;c<this.strings.length;c++)if(this.strings[c]!==b.strings[c])return!1;return!0};return a}();e.exports=a}),null);
__d("BDLanguagesSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","StringArrayObject"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();var a=[].concat(navigator.languages);a=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("StringArrayObject"))(a));return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30003,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("BDMimeTypeCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();var a=navigator.mimeTypes?navigator.mimeTypes.length:-1;a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30002,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("StringSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.STRING)||this}return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("BDNavigatorNotificationPermissionSignalCollector",["regeneratorRuntime","BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeAsyncSignalCollection=function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:this.throwIfNotInitialized();d.prev=1;if(!navigator.permissions){d.next=9;break}d.next=5;return b("regeneratorRuntime").awrap(navigator.permissions.query({name:"notifications"}));case 5:c=d.sent;a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),c.state);d.next=10;break;case 9:a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.permissions not supported"));case 10:d.next=15;break;case 12:d.prev=12,d.t0=d["catch"](1),a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"notifications cannot be queried from navigator.permissions"));case 15:return d.abrupt("return",{valueOrError:a});case 16:case"end":return d.stop()}},null,this,[[1,12]])};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30008,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("BDNavigatorPlatformSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();var a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),navigator.platform);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30015,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("BDNavigatorVendorSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();var a=navigator.vendor;a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30012,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("BDNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();var a;window.Notification?a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),Notification.permission):a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"Notification not supported"));return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30007,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("BDPluginCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();var a=navigator.plugins?navigator.plugins.length:-1;a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30001,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("BooleanSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.BOOLEAN)||this}return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("BDWebdriverSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();var a=!!navigator.webdriver;a=new(b("BooleanSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:3e4,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("DimensionObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.width=null,this.height=null,this.width=a,this.height=b}var b=a.prototype;b.toJSON=function(){return{w:this.width,h:this.height}};b.isEqual=function(b){if(b instanceof a)return this.width===b.width&&this.height===b.height;else return!1};return a}();e.exports=a}),null);
__d("BDWindowOuterDimensionSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","DimensionObject"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){this.throwIfNotInitialized();var a=window.outerHeight,c=window.outerWidth;c=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("DimensionObject"))(c,a));return{valueOrError:c}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30005,get:function(){h==null&&(h=new g());return h}};e.exports=i}),null);
__d("SignalCollectorMap",["BDWebdriverSignalCollector","BDPluginCountSignalCollector","BDMimeTypeCountSignalCollector","BDLanguagesSignalCollector","BDConnectionRTTSignalCollector","BDWindowOuterDimensionSignalCollector","BDNotificationPermissionSignalCollector","BDNavigatorNotificationPermissionSignalCollector","BDNavigatorVendorSignalCollector","BDNavigatorPlatformSignalCollector","BDHeartbeatSignalCollector","BDHeartbeatV2SignalCollector"],(function(a,b,c,d,e,f){"use strict";a={3e4:b("BDWebdriverSignalCollector"),30001:b("BDPluginCountSignalCollector"),30002:b("BDMimeTypeCountSignalCollector"),30003:b("BDLanguagesSignalCollector"),30004:b("BDConnectionRTTSignalCollector"),30005:b("BDWindowOuterDimensionSignalCollector"),30007:b("BDNotificationPermissionSignalCollector"),30008:b("BDNavigatorNotificationPermissionSignalCollector"),30012:b("BDNavigatorVendorSignalCollector"),30015:b("BDNavigatorPlatformSignalCollector"),38e3:b("BDHeartbeatSignalCollector"),38001:b("BDHeartbeatV2SignalCollector")};e.exports=a}),null);
__d("BDSignalWrapper",["BDSignalBufferData","SignalCollectorMap"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.signalFlags=a,this.signalType=b}var c=a.prototype;c.getSignalCollector=function(a){if(this.canExecuteForReputationTier(a)){return(a=b("SignalCollectorMap")[this.signalType])==null?void 0:a.get(this.signalFlags)}return null};c.canExecuteForReputationTier=function(a){return this.signalType===38001?!0:this.signalFlags.includes(a)};c.getBufferConfig=function(){return b("BDSignalBufferData")[this.signalType]};return a}();e.exports=a}),null);
__d("BDClientConfig",["BDLoggingConstants","BDOperationLogHelper","BDSignalWrapper"],(function(a,b,c,d,e,f){"use strict";var g=b("BDLoggingConstants").OPERATIONS,h="BDClientConfig",i=function(){function a(){this.reputationTier=0,this.staticSignalBufferSize=1,this.dynamicSignalBufferSize=1,this.biometricSignalBufferSize=1,this.staticSignals=[],this.dynamicSignals=[],this.biometricSignals=[],this.heartbeatSignal=new(b("BDSignalWrapper"))([],38001),this.bufferSizeBySignalIdMap={},this.periodicCollectionIntervalMs=Number.MAX_SAFE_INTEGER,this.signalConfigGenerationTimeStampMs=0,this.suspiciousTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.allTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.heartbeatIntervalMs=-1,this.parsingDone=!1,this.bufferSizeBySignalIdMap[38001]=1}var c=a.prototype;c.setClientReputationTier=function(a){this.reputationTier=a;return this};c.getClientReputationTier=function(){return this.reputationTier};c.setStaticSignalBufferSize=function(a){a>0?this.staticSignalBufferSize=a:b("BDOperationLogHelper").logError(h,g.INVALID_BUFFER_SIZE,{size:a.toString(),type:"s"});return this};c.getStaticSignalBufferSize=function(){return this.staticSignalBufferSize};c.setDynamicSignalBufferSize=function(a){a>1?this.dynamicSignalBufferSize=a:b("BDOperationLogHelper").logError(h,g.INVALID_BUFFER_SIZE,{size:a.toString(),type:"d"});return this};c.getDynamicSignalBufferSize=function(){return this.dynamicSignalBufferSize};c.setBiometricSignalBufferSize=function(a){a>1?this.biometricSignalBufferSize=a:b("BDOperationLogHelper").logError(h,g.INVALID_BUFFER_SIZE,{size:a.toString(),type:"b"});return this};c.getBiometricSignalBufferSize=function(){return this.biometricSignalBufferSize};c.setConfigGenerationTimeStamp=function(a){this.signalConfigGenerationTimeStampMs=a;return this};c.getConfigGenerationTimeStamp=function(){return this.signalConfigGenerationTimeStampMs};c.setHeartbeatIntervalMinutes=function(a){this.heartbeatIntervalMs=a*60*1e3;return this};c.getHeartbeatIntervalMs=function(){return this.heartbeatIntervalMs};c.setSuspiciousTiersFlushDurationMinutes=function(a){a>0?this.suspiciousTiersFlushDurationMs=a*60*1e3:b("BDOperationLogHelper").logError(h,g.INVALID_DURATION,{size:a.toString(),type:"fds"});return this};c.getSuspiciousTiersFlushDurationMs=function(){return this.suspiciousTiersFlushDurationMs};c.setAllTiersFlushDurationMinutes=function(a){a>0?this.allTiersFlushDurationMs=a*60*1e3:b("BDOperationLogHelper").logError(h,g.INVALID_DURATION,{size:a.toString(),type:"fda"});return this};c.getAllTiersFlushDurationMs=function(){return this.allTiersFlushDurationMs};c.getFlushDurationByReputationTierMs=function(){return this.reputationTier===262144?this.allTiersFlushDurationMs:this.suspiciousTiersFlushDurationMs};c.addMultipleSignalsToClientConfig=function(a){var b=this;a.forEach(function(a){return b.addSignalToClientConfig(a)});return this};c.addSignalToClientConfig=function(a){var c=a.getSignalFlags(),d=a.getSignalId();if(d===38e3)return this;var e=new(b("BDSignalWrapper"))(c,d);if(d===38001){this.heartbeatSignal=e;return this}!c.includes(2)?this.staticSignals.push(e):c.includes(4)?this.biometricSignals.push(e):this.dynamicSignals.push(e);a.getBufferSize()>0&&(this.bufferSizeBySignalIdMap[a.getSignalId()]=a.getBufferSize());return this};c.setPeriodicCollectionIntervalSeconds=function(a){a>0?this.periodicCollectionIntervalMs=a*1e3:b("BDOperationLogHelper").logError(h,g.INVALID_DURATION,{size:a.toString(),type:"pi"});return this};c.getPeriodicCollectionIntervalMs=function(){return this.periodicCollectionIntervalMs};c.getDynamicSignals=function(){return this.dynamicSignals};c.getStaticSignals=function(){return this.staticSignals};c.getBiometricSignals=function(){return this.biometricSignals};c.getHeartbeatSignal=function(){return this.heartbeatSignal};c.getBufferSizeBySignalId=function(a){return this.bufferSizeBySignalIdMap[a]};c.setParsingDone=function(a){this.parsingDone=a};c.isParsingDone=function(){return this.parsingDone};return a}(),j=null;a={get:function(){j==null&&(j=new i());return j}};e.exports=a}),null);
__d("BDCollectionTypeEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({STATIC:0,DYNAMIC:1,BIOMETRIC:2});e.exports=a}),null);
__d("BotDetection_SignalFlags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTIVE:1,DYNAMIC:2,BIOMETRIC:4,DEPRECATED:8,WEB:16,IOS_NATIVE:32,ANDROID_NATIVE:64,EQUAL_BY_VALUE:128,EQUAL_BY_CONTEXT:256,EQUAL_BY_TIMESTAMP:512,SUSPICIOUS_TIER:1024,PARANOID_TIER:2048,RANDOM_SAMPLE_TIER_DEPRECATED:4096,BENIGN_TIER:262144,EMPLOYEES_TIER:524288,BUNDLE:8192,ONSITE:16384,OFFSITE:32768,OFFSITE_SENSITIVE:65536,SENSITIVE:131072})}),null);
__d("BDServerSignalConfig",["BDLoggingConstants","BDOperationLogHelper","BotDetection_SignalFlags"],(function(a,b,c,d,e,f){"use strict";var g=b("BDLoggingConstants").OPERATIONS,h="BDServerSignalConfig";a=function(){function a(a,b,c){this.parsedSignalFlags=[],this.signalId=a,this.signalFlags=b,this.bufferSize=c}var c=a.prototype;c.getSignalId=function(){return this.signalId};c.getSignalFlags=function(){var a=this;if(this.parsedSignalFlags.length===0){var c=Object.keys(b("BotDetection_SignalFlags"));c.forEach(function(c){(b("BotDetection_SignalFlags")[c]&a.signalFlags)===b("BotDetection_SignalFlags")[c]&&a.parsedSignalFlags.push(b("BotDetection_SignalFlags")[c])})}this.parsedSignalFlags.length===0&&b("BDOperationLogHelper").logError(h,g.SIGNAL_FLAGS_MISSING,{id:this.signalId.toString(),flags:this.signalFlags.toString()});return this.parsedSignalFlags};c.getBufferSize=function(){return this.bufferSize!=null?this.bufferSize:0};return a}();e.exports=a}),null);
__d("BDServerConfig",["BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDServerSignalConfig"],(function(a,b,c,d,e,f){"use strict";var g=b("BDLoggingConstants").OPERATIONS,h="BDServerConfig";a={parseConfig:function(a){var c=[];try{var d=JSON.parse(a.sc),e=new Map(d.c);e.forEach(function(a,d){return c.push(new(b("BDServerSignalConfig"))(d,a))});if(e.size===0){b("BDOperationLogHelper").logError(h,g.EMPTY_SIGNAL_CONFIG);return}e=b("BDClientConfig").get();e.setClientReputationTier(a.rt).setPeriodicCollectionIntervalSeconds(a.i).addMultipleSignalsToClientConfig(c).setConfigGenerationTimeStamp(d.t).setAllTiersFlushDurationMinutes(a.fda).setSuspiciousTiersFlushDurationMinutes(a.fds).setHeartbeatIntervalMinutes(a.hbi).setStaticSignalBufferSize(a.sbs).setDynamicSignalBufferSize(a.dbs).setBiometricSignalBufferSize(a.bbs).setParsingDone(!0)}catch(a){b("BDOperationLogHelper").logError(h,g.PARSE_CONFIG_ERROR,{e:a})}}};e.exports=a}),null);
__d("BDSignalBuffer",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDSignalBufferData"],(function(a,b,c,d,e,f){"use strict";var g=b("BDLoggingConstants").OPERATIONS,h="BDSignalBuffer";a={initialize:function(a,c){if(a in b("BDSignalBufferData"))return;var d=1;c!==void 0&&(d=c);b("BDSignalBufferData")[a]={values:[],max_buffer_size:d}},clearBuffer:function(a){if(a in b("BDSignalBufferData"))b("BDSignalBufferData")[a].values=[];else throw new Error("Tried to clear signal buffer that was not intialized:")},appendSignal:function(a,c){if(a in b("BDSignalBufferData")){var d=b("BDSignalBufferData")[a],e=d.values;d=d.max_buffer_size;e.length>=d&&e.shift();e.push(c);b("BDOperationLogHelper").logInfo(h,g.APPEND_SIGNAL,{id:a.toString()})}else{b("BDOperationLogHelper").logError(h,g.APPEND_SIGNAL_FAIL,{id:a.toString()});throw new Error("Tried to append signal that was not intialized:")}},getLastSignalFormatBySignalId:function(a){var c;a=b("BDSignalBufferData")[a];c=a==null?void 0:(c=a.values)==null?void 0:c.length;return c!=null&&c>0?a.values[c-1]:{valueOrError:void 0}},retrieveSignal:function(a){return b("BDSignalBufferData")[a].values},retrieveSignals:function(a){var c={};for(var d=0;d<a.length;d++){var e=a[d];e in b("BDSignalBufferData")&&(c[e]=this.retrieveSignal(e).map(function(a){return a.valueOrError}))}return c},getSignalsAsJSONString:function(a){a=this._getSignalIdsByCollectionType(a);return JSON.stringify(this.retrieveSignals(a))},_getSignalIdsByCollectionType:function(a){var c=b("BDClientConfig").get(),d=[];a.forEach(function(a){switch(a){case b("BDCollectionTypeEnum").STATIC:d=[].concat(d,c.getStaticSignals());break;case b("BDCollectionTypeEnum").DYNAMIC:d=[].concat(d,c.getDynamicSignals());break;case b("BDCollectionTypeEnum").BIOMETRIC:d=[].concat(d,c.getBiometricSignals());break}});return d.map(function(a){return a.signalType})}};e.exports=a}),null);
__d("BdPdcSignalsFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","bd_pdc_signals");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("SignalCollectionManager",["regeneratorRuntime","Promise","BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDSignalBuffer","SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";var g=b("BDLoggingConstants").OPERATIONS,h="SignalCollectionManager",i=function(){function a(){}var c=a.prototype;c.collectSignals=function(a,c){var d=this,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=[];a.forEach(function(a){a.signalFlags.includes(4)?d.$1(a,c):e.push(d.$2(a,c))});f.next=4;return b("regeneratorRuntime").awrap(b("Promise").all(e));case 4:case"end":return f.stop()}},null,this)};c.isEqualToLastCollectedSignal=function(a,c){var d=b("BDSignalBuffer").getLastSignalFormatBySignalId(c.signalType);return d.valueOrError==void 0?!1:a.isEqual(d.valueOrError,new Set(c.signalFlags))};c.getCircularBufferSize=function(a){var c=b("BDClientConfig").get(),d=c.getBufferSizeBySignalId(a.signalType);if(d!=null&&c.getBufferSizeBySignalId(a.signalType)>0)return d;if(!a.signalFlags.includes(2))return c.getStaticSignalBufferSize();else if(a.signalFlags.includes(4))return c.getBiometricSignalBufferSize();else return c.getDynamicSignalBufferSize()};c.$2=function(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=a.getSignalCollector(c);if(!(d!=null)){f.next=15;break}a.getBufferConfig()==null&&b("BDSignalBuffer").initialize(a.signalType,this.getCircularBufferSize(a));f.prev=3;f.next=6;return b("regeneratorRuntime").awrap(d.executeAsyncSignalCollection());case 6:e=f.sent;e.valueOrError&&!this.isEqualToLastCollectedSignal(e.valueOrError,a)&&b("BDSignalBuffer").appendSignal(a.signalType,e);f.next=13;break;case 10:f.prev=10,f.t0=f["catch"](3),b("BDOperationLogHelper").logError(h,g.BD_EXCEPTION,{error:f.t0});case 13:f.next=16;break;case 15:b("BDOperationLogHelper").logWarning(h,g.SIGNAL_NOT_IMPLEMENTED,{id:a.signalType.toString()});case 16:case"end":return f.stop()}},null,this,[[3,10]])};c.$1=function(a,c){b("BDOperationLogHelper").logWarning(h,g.SIGNAL_NOT_IMPLEMENTED,{id:a.signalType.toString()})};return a}(),j=null;a={get:function(){j==null&&(j=new i());return j}};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("javascript-blowfish-1.0.5",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a=function(b,c){this.key=b,(c==="ecb"||c==="cbc")&&(this.mode=c),this.sBox0=a.sBox0.slice(),this.sBox1=a.sBox1.slice(),this.sBox2=a.sBox2.slice(),this.sBox3=a.sBox3.slice(),this.pArray=a.pArray.slice(),this.generateSubkeys(b)};a.prototype={sBox0:null,sBox1:null,sBox2:null,sBox3:null,pArray:null,key:null,mode:"ecb",iv:"abc12345",keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encrypt:function(a,b){if(this.mode==="ecb")return this.encryptECB(a);if(this.mode==="cbc")return this.encryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},decrypt:function(a,b){if(this.mode==="ecb")return this.decryptECB(a);if(this.mode==="cbc")return this.decryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},encryptECB:function(a){a=this.utf8Decode(a);var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8){var f=8-e.length;while(0<f--)e+="\0"}var g;f=this.split64by32(e);e=f[0];g=f[1];f=this.encipher(e,g);e=f[0];g=f[1];c+=this.num2block32(e)+this.num2block32(g)}return c},encryptCBC:function(a,b){a=this.utf8Decode(a);var c=Math.ceil(a.length/8),d;b=this.split64by32(b);d=b[0];b=b[1];var e="";for(var f=0;f<c;f++){var g=a.substr(f*8,8);if(g.length<8){var h=8-g.length;while(0<h--)g+="\0"}var i;h=this.split64by32(g);g=h[0];i=h[1];g=this.xor(g,d);i=this.xor(i,b);h=this.encipher(g,i);g=h[0];i=h[1];d=g;b=i;e+=this.num2block32(g)+this.num2block32(i)}return e},decryptECB:function(a){var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u044b\u0439\u0442\u0430\u043c.");var f,g;e=this.split64by32(e);f=e[0];g=e[1];e=this.decipher(f,g);f=e[0];g=e[1];c+=this.num2block32(f)+this.num2block32(g)}c=this.utf8Encode(c);return c},decryptCBC:function(a,b){var c=Math.ceil(a.length/8),d,e,f;b=this.split64by32(b);d=b[0];b=b[1];var g="";for(var h=0;h<c;h++){var i=a.substr(h*8,8);if(i.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u0439\u0442\u0430\u043c.");var j,k;i=this.split64by32(i);j=i[0];k=i[1];e=j;f=k;i=this.decipher(j,k);j=i[0];k=i[1];j=this.xor(j,d);k=this.xor(k,b);d=e;b=f;g+=this.num2block32(j)+this.num2block32(k)}g=this.utf8Encode(g);return g},F:function(a){var b=a>>>24,c=a<<8>>>24,d=a<<16>>>24;a=a<<24>>>24;b=this.addMod32(this.sBox0[b],this.sBox1[c]);b=this.xor(b,this.sBox2[d]);b=this.addMod32(b,this.sBox3[a]);return b},encipher:function(a,b){var c;for(var d=0;d<16;d++)a=this.xor(a,this.pArray[d]),b=this.xor(this.F(a),b),c=a,a=b,b=c;c=a;a=b;b=c;b=this.xor(b,this.pArray[16]);a=this.xor(a,this.pArray[17]);return[a,b]},decipher:function(a,b){var c;a=this.xor(a,this.pArray[17]);b=this.xor(b,this.pArray[16]);c=a;a=b;b=c;for(var d=15;d>=0;d--)c=a,a=b,b=c,b=this.xor(this.F(a),b),a=this.xor(a,this.pArray[d]);return[a,b]},generateSubkeys:function(a){var b=0,c=0,d,e;for(d=0;d<18;d++){for(e=4;e>0;e--)b=this.fixNegative(b<<8|a.charCodeAt(c)),c=(c+1)%a.length;this.pArray[d]=this.xor(this.pArray[d],b);b=0}e=[0,0];for(d=0;d<18;d+=2)e=this.encipher(e[0],e[1]),this.pArray[d]=e[0],this.pArray[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox0[d]=e[0],this.sBox0[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox1[d]=e[0],this.sBox1[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox2[d]=e[0],this.sBox2[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox3[d]=e[0],this.sBox3[d+1]=e[1]},block32toNum:function(a){return this.fixNegative(a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3))},num2block32:function(a){return String.fromCharCode(a>>>24)+String.fromCharCode(a<<8>>>24)+String.fromCharCode(a<<16>>>24)+String.fromCharCode(a<<24>>>24)},xor:function(a,b){return this.fixNegative(a^b)},addMod32:function(a,b){return this.fixNegative(a+b|0)},fixNegative:function(a){return a>>>0},split64by32:function(a){var b=a.substring(0,4);a=a.substring(4,8);return[this.block32toNum(b),this.block32toNum(a)]},utf8Decode:function(a){var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128))}return b},utf8Encode:function(a){var b="",c=0,d=0,e=0,f;while(c<a.length)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(e=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|e&63),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=3);return b},base64Encode:function(a){var b="",c,d,e,f,g,h,i=0;while(i<a.length)c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=a.charCodeAt(i++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this.keyStr.charAt(f)+this.keyStr.charAt(c)+this.keyStr.charAt(g)+this.keyStr.charAt(h);return b},base64Decode:function(a){var b="",c,d,e,f,g,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<a.length)d=this.keyStr.indexOf(a.charAt(h++)),e=this.keyStr.indexOf(a.charAt(h++)),f=this.keyStr.indexOf(a.charAt(h++)),g=this.keyStr.indexOf(a.charAt(h++)),d=d<<2|e>>4,e=(e&15)<<4|f>>2,c=(f&3)<<6|g,b=b+String.fromCharCode(d),f!=64&&(b=b+String.fromCharCode(e)),g!=64&&(b=b+String.fromCharCode(c));return b},trimZeros:function(a){return a.replace(/\0+$/g,"")}};a.pArray=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731];a.sBox0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946];a.sBox1=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055];a.sBox2=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504];a.sBox3=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];g.exports=a}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("javascript-blowfish",["javascript-blowfish-1.0.5"],(function(a,b,c,d,e,f){e.exports=b("javascript-blowfish-1.0.5")()}),null);
__d("BDClientSignalCollectionTrigger",["regeneratorRuntime","Promise","BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BdPdcSignalsFalcoEvent","BDServerConfig","BDSignalBuffer","BDUtils","SignalCollectionManager","WebStorage","javascript-blowfish"],(function(a,b,c,d,e,f){"use strict";var g,h=b("BDLoggingConstants").OPERATIONS,i="BDClientSignalCollectionTrigger",j="signal_flush_timestamp",k=!1,l=!1,m=!1,n=0,o=0,p=0,q=30,r=5,s,t,u=b("BDUtils").uuid(),v=b("BDClientConfig").get(),w=Object.freeze({NONE:0,VITAL:1,CRITICAL:2}),x={startSignalCollection:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(k){c.next=15;break}k=!0;b("BDServerConfig").parseConfig(a);if(v.isParsingDone()){c.next=7;break}b("BDOperationLogHelper").logError(i,h.PARSE_CONFIG_ERROR,{config:JSON.stringify(a)});k=!1;return c.abrupt("return");case 7:a!=null&&(o=a.hbcbc&&a.hbcbc>0?a.hbcbc:o,p=a.hbvbc&&a.hbvbc>0?a.hbvbc:p,q=a.hbbi&&a.hbbi>0?a.hbbi:q);x.startHeartbeatDelayed();t=new(b("Promise"))(function(a,c){try{v.getClientReputationTier()!==0&&(v.getDynamicSignals().length>0&&(x.collectDynamicSignals(),b("BDOperationLogHelper").logInfo(i,h.DYNAMIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()}))),a()}catch(a){c(a)}});if(!(v.getClientReputationTier()!==0)){c.next=15;break}c.next=13;return b("regeneratorRuntime").awrap(t);case 13:c.next=15;return b("regeneratorRuntime").awrap(x.startSignalPosting());case 15:k&&!l&&!m&&r>0&&(r-=1,b("BDOperationLogHelper").logWarning(i,h.TRY_RESTARTING_HB),x.startHeartbeatDelayed());case 16:case"end":return c.stop()}},null,this)},retrieveSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(t);case 2:a.next=4;return b("regeneratorRuntime").awrap(x.postSignals([b("BDCollectionTypeEnum").DYNAMIC,b("BDCollectionTypeEnum").BIOMETRIC,b("BDCollectionTypeEnum").STATIC]));case 4:case"end":return a.stop()}},null,this)},postSignals:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(x.collectStaticSignals());case 2:x.setTimestampInStorage(Date.now(),j),x._postSignalsHelper(b("BDSignalBuffer").getSignalsAsJSONString(a),w.NONE);case 4:case"end":return c.stop()}},null,this)},_postSignalsHelper:function(a,c){var d=v.getConfigGenerationTimeStamp(),e=v.getClientReputationTier(),f=x.encryptDataUsingAsid(u,a);a=function(){return{asid:u,ct:d,rt:e,sjd:f}};var g=!1;try{c===w.CRITICAL?b("BdPdcSignalsFalcoEvent").logCritical(a):c===w.VITAL?b("BdPdcSignalsFalcoEvent").logImmediately(a):b("BdPdcSignalsFalcoEvent").log(a),g=!0}catch(a){b("BDOperationLogHelper").logError(i,h.BANZAI_LOG_ERROR,a),g=!1}finally{return g}},getInitialVector:function(a){if(a.length!==16){b("BDOperationLogHelper").logError(i,h.INVALID_LENGTH);return""}var c="";for(var d=0;d<8;d++)c+=String.fromCharCode(a.charCodeAt(d)^a.charCodeAt(8+d));return c},encryptDataUsingAsid:function(a,c){if(a.length!==36){b("BDOperationLogHelper").logError(i,h.INVALID_GUID);return c}a=a.slice(19,23)+a.slice(24,36);var d=x.getInitialVector(a);a=new(b("javascript-blowfish"))(a,"cbc");return a.base64Encode(a.encrypt(c,d))},startSignalPosting:function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a=x.getTimestampInStorage(j);c=Date.now()-a;if(!(c>=v.getFlushDurationByReputationTierMs())){d.next=7;break}d.next=5;return b("regeneratorRuntime").awrap(x.postSignalsIntermittently());case 5:d.next=8;break;case 7:window.setTimeout(function(){x.postSignalsIntermittently()},v.getFlushDurationByReputationTierMs()-c);case 8:case"end":return d.stop()}},null,this)},postSignalsIntermittently:function(){x.postSignals([b("BDCollectionTypeEnum").STATIC]),window.setInterval(function(){x.postSignals([b("BDCollectionTypeEnum").STATIC,b("BDCollectionTypeEnum").DYNAMIC,b("BDCollectionTypeEnum").BIOMETRIC])},v.getFlushDurationByReputationTierMs())},setTimestampInStorage:function(a,c){var d=(g||(g=b("WebStorage"))).getLocalStorage();if(!d){b("BDOperationLogHelper").logError(i,h.GET_LOCAL_STORAGE_ERROR);return}d=g.setItemGuarded(d,c,a.toString());d!=null&&b("BDOperationLogHelper").logError(i,h.WEB_STORAGE,{error:d.message})},getTimestampInStorage:function(a){var c=(g||(g=b("WebStorage"))).getLocalStorage();if(!c){b("BDOperationLogHelper").logError(i,h.GET_LOCAL_STORAGE_ERROR);return 0}c=c.getItem(a);if(c==null)return 0;a=Number.parseInt(c,10);return Number.isFinite(a)?a:0},resetHeartbeatStartedForTest:function(){l=!1,m=!1},startHeartbeatDelayed:function(){if(l||m)return;var a=x.getTimestampInStorage(x.HEARTBEAT_TIMESTAMP_STORAGE_KEY);a=Date.now()-a;try{a>=v.getHeartbeatIntervalMs()?x.startHeartbeat():(window.setTimeout(function(){return x.startHeartbeat()},v.getHeartbeatIntervalMs()-a),m=!0)}catch(c){b("BDOperationLogHelper").logError(i,h.HB_START_FAILURE,{lastBeatSince:a.toString(),hbi:v.getHeartbeatIntervalMs().toString(),e:c})}},HEARTBEAT_TIMESTAMP_STORAGE_KEY:"hb_timestamp",startHeartbeat:function(){!l&&v.getHeartbeatIntervalMs()>0&&(x.collectHeartbeatTimes(o,p),n!==0&&(window.clearInterval(n),b("BDOperationLogHelper").logWarning(i,h.HB_ALREADY_RUNNING)),n=window.setInterval(function(){return x.collectHeartbeatTimes(o,p)},v.getHeartbeatIntervalMs()),l=!0)},collectHeartbeatTimes:function(a,b){if(a<=0&&b<=0)return;a>0&&x.collectHeartbeat(w.CRITICAL);b>0&&x.collectHeartbeat(w.VITAL);(a>1||b>1)&&window.setTimeout(function(){return x.collectHeartbeatTimes(a-1,b-1)},q*1e3)},collectHeartbeat:function(a){var c;c=v==null?void 0:(c=v.getHeartbeatSignal())==null?void 0:(c=c.getSignalCollector(v.getClientReputationTier()))==null?void 0:c.executeSignalCollection();if(c==null){b("BDOperationLogHelper").logError(i,h.HB_COLLECTION_FAILED,{urgency:a.toString()});return}else b("BDOperationLogHelper").logInfo(i,h.HB_COLLECTED,{urgency:a.toString()});x.postHeartbeat(a,c)&&x.setTimestampInStorage(Date.now(),x.HEARTBEAT_TIMESTAMP_STORAGE_KEY)},postHeartbeat:function(a,b){var c={};c[38001]=[b==null?void 0:b.valueOrError];b=JSON.stringify(c);return x._postSignalsHelper(b,a)},collectStaticSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(x.collectSignalsOneTime(v.getStaticSignals()));case 2:case"end":return a.stop()}},null,this)},collectDynamicSignals:function(){x.stopDynamicSignalCollection(),s=window.setInterval(function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(x.collectSignalsOneTime(v.getDynamicSignals()));case 2:case"end":return a.stop()}},null,this)},v.getPeriodicCollectionIntervalMs())},stopDynamicSignalCollection:function(){s!=null&&(window.clearInterval(s),s=null)},collectSignalsOneTime:function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=v.getClientReputationTier();if(!(c!==0)){d.next=4;break}d.next=4;return b("regeneratorRuntime").awrap(b("SignalCollectionManager").get().collectSignals(a,c));case 4:case"end":return d.stop()}},null,this)}};e.exports=x}),null);
__d("BDCometSignalCollectionTrigger",["BDClientSignalCollectionTrigger","BDSignalCollectionData"],(function(a,b,c,d,e,f){"use strict";a={initSignalCollection:function(){b("BDClientSignalCollectionTrigger").startSignalCollection(b("BDSignalCollectionData"))}};e.exports=a}),null);
__d("BootloaderEventsPerf",["invariant","Bootloader"],(function(a,b,c,d,e,f,g){var h={count:0,downloaded:0,duration:0};function i(a,b,c){return Math.max(0,((c=c)!=null?c:0)-Math.max(a,(c=b)!=null?c:0))}function j(){return{blocking:babelHelpers["extends"]({},h),all:babelHelpers["extends"]({},h)}}function k(a,b,c){var d=[a.all];b&&d.push(a.blocking);for(var b=0;b<d.length;b++){a=d[b];a.count++;c&&(a.downloaded++,a.duration=Math.max(a.duration,c))}}function l(a,c,d,e,f){var g=b("Bootloader").getResourceState(d);k(a,c,i(e,g.loadStart,g.loadEnd));g.loadError!=null&&f.add(d)}function m(a,b,c,d){var e=j();for(var a=a,f=Array.isArray(a),h=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=a.length)break;i=a[h++]}else{h=a.next();if(h.done)break;i=h.value}i=i;var k=i[0];i=i[1];switch(i.type){case"async":l(c,i.blocking,k,b,d);break;case"css":l(e,!i.nonblocking,k,b,d);break;case"js":l(e,!0,k,b,d);break;default:i.type,g(0,3721)}}return e}function a(a){var c=a.startTime,d=0,e=0,f=0,g=0;for(var h=a.components,n=Array.isArray(h),o=0,h=n?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=h.length)break;p=h[o++]}else{o=h.next();if(o.done)break;p=o.value}p=p;p=b("Bootloader").getComponentTiming(p);d=Math.max(d,p.tierTwoEnd-p.tierTwoStart);e=Math.max(e,p.tierTwoEnd-c);f=Math.max(f,p.tierThreeEnd-p.tierThreeStart);g=Math.max(g,p.tierThreeEnd-c)}p=new Set();o=j();n=m(a.tierOne,c,o,p);h=m(a.tierTwo,c,o,p);var q=m(a.tierThree,c,o,p),r=o.blocking.downloaded!=0,s=j(),t=new Map(),u=0,v=0,w=0;for(var x=a.beRequests.values(),y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}A=A;u+=i(c,c,A.requestStart);v+=A.serverGenTime;w+=A.jsmodsEnd-A.jsmodsStart;k(s,r,A.responseStart-A.requestStart);for(var B=A.blocking.keys(),C=Array.isArray(B),D=0,B=C?B:B[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var E;if(C){if(D>=B.length)break;E=B[D++]}else{D=B.next();if(D.done)break;E=D.value}E=E;t.set(E,!0)}for(var E=A.all.keys(),D=Array.isArray(E),C=0,E=D?E:E[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(D){if(C>=E.length)break;B=E[C++]}else{C=E.next();if(C.done)break;B=C.value}A=B;t.has(A)||t.set(A,!1)}}B=j();for(var A=t,C=Array.isArray(A),D=0,A=C?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(C){if(D>=A.length)break;E=A[D++]}else{D=A.next();if(D.done)break;E=D.value}z=E;y=z[0];x=z[1];if(a.tierOne.has(y)||a.tierTwo.has(y)||a.tierThree.has(y))continue;l(B,x,y,c,p)}return{ref:a.ref,components:a.components,timeslice_context:(r=a.timesliceContext)==null?void 0:r.name,start_time:c,err_count:p.size,resources:{t1:n,t2:h,t3:q,be:s,unpredicted:B,async:o},durations:{be_start_wait:u,be_server_gen:v,be_jsmods:w,callback_wait:a.callbackStart-c,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-c,rdfd_requirelazy:d,rdfd_done_wait:e,rd_requirelazy:f,rd_done_wait:g}}}function c(a){a.start_time;var b=a.resources,c=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,["start_time","resources","durations"]);b=Object.entries(b);for(var d=0;d<b.length;d++){var e=b[d],f=e[0];e=e[1];e=Object.entries(e);for(var g=0;g<e.length;g++){var h=e[g],i=h[0];h=h[1];h=Object.entries(h);for(var j=0;j<h.length;j++){var k=h[j],l=k[0];k=k[1];a[f+"_"+i+"_resources_"+l]=Math.round(Number(k))}}}l=Object.entries(c);for(var k=0;k<l.length;k++){h=l[k];j=h[0];i=h[1];a[j+"_duration"]=Math.round(Number(i))}return a}e.exports={computeData:a,flattenData:c}}),null);